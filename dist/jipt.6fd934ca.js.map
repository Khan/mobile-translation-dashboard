{"version":3,"sources":["jipt.js"],"names":["undefined","$","editContextTimeout","stringsToUpdate","updatedStrings","newStrings","isMobile","navigator","userAgent","match","config","preload_texts","project","document","domain","before_dom_insert","text","before_commit","edit_strings_context","touch_optimized","documentElement","escape","setCookie","name","value","expires","expires_date","Date","getTime","toGMTString","cookie","removeCookie","getCookie","check_name","documentCookies","split","temporaryCookies","cookieName","cookieValue","isThereAnyCookie","i","length","replace","unescape","Storage","save","key","full_key","get_project_identifier","window","localStorage","setItem","get","getItem","delete","removeItem","Url","join","login","enterpriseLogin","entryPoint","apiEntryPoint","jiptCDN","authDomain","crowdinDomain","getEntryPoint","getAuthEntryPoint","url","params","queryParams","param","getFullUrl","path","getJiptPath","action","pathAction","continue","jipt","user","redirectHash","applyUserConfig","cfg","_jipt","maskDocument","mask","message","body","bodyLoadInterval","maskStyle","messageStyle","message_margin","style","opacity","createElement","setAttribute","clientHeight","setInterval","getElementsByTagName","clearInterval","appendChild","unmaskDocument","getElementById","parentNode","removeChild","loadResource","resourceIdentifier","resourceType","callback","resourceHandler","loaded","onload","onreadystatechange","readyState","htmlspecialchars","string","callbacks","phrases","concurrentRequestsMaxCount","pendingRequests","_phrases","need_load","was_loaded","load_timeout","projectLink","projectId","projectName","projectURL","editor","currentTranslation","target_languages","workflowSteps","language","code","id","workflowStep","type","source_language","isLoggedIn","isLeader","isManager","picture","regexp","placeholders","startPhrase","globalStartPhrase","globalPhrase","exactPhrase","delimiterPart","plural","endPart","wrapText","regexp_new","status","untranslated","partially_translated","translated","partially_approved","approved","hidden","not_found","not_visible_on_step","file_not_available_for_language","pluralsPreview","translatable_placeholders","translation_preview","plural_id","alertFunction","confirmFunction","promptFunction","loginDialog","editorDialog","translationDialog","dialog_zindex","minimized_translation_panel","translations_preview","translations_highlight","translations_filter","panel_search_phrase","rebuild_panel_timeout","panel_page","panel_pages","open_hotkeys_settings","open_editor_settings","editor_loaded","editorDialogIframe","not_found_warning","loginDialogContent","signup","translationDialogButtons","screenshotBtn","translationDialogContent","checked_preview","checked_highlight","checked_filter","user_name","user_picture","user_picture_src","profile","option_preview","option_highlight","option_filter","keyboard_shortcuts","jiptWorkflowStep","init","jQuery","noConflict","init_plugins","init_editor_listener","ready","checkCookie","init_login_panel","init_highlight","init_preview","init_filter","init_touch_optimized","init_project","init_jipt_dialog","init_mouse_touch_events","init_drags","init_center_position","init_icu","fn","jiptDialog","options","extend","modal","position","save_position","drags","resize","fixed","title_pane","minimize_btn","close_btn","minimized","icon","buttons_pane","width","height","save_height","custom_class","close_callback","iframe","dialog_inner","dialog","content","parent","hasClass","console","warn","open","close","destroy","toggle_minimized","center","is","move_to_front","createOverlay","attr","css","appendTo","addClass","iframe_contents","html","display","overflow","empty","append","iframe_doc","contents","write","mousedown","e","target","closest","dialog_id","icon_class","title_buttons","before","after","data","udraggable","handle","find","click","on","restorePosition","setPosition","show_only","offset","removeClass","JSON","parse","outerHeight","offset_top","top","scrollTop","offset_left","left","scrollLeft","stringify","outerWidth","savePosition","unload","min_offset_left","min_offset_top","max_offset_left","max_offset_top","show","hide","trigger","remove","time","sensor","__ResizeSensor","clearTimeout","setTimeout","detach","siblings","end","$Special","event","special","motionMapMap","isMoveBound","pxPinchZoom","optionKey","doDisableMouse","defaultOptMap","bound_ns_map","wheel_ratio","px_radius","ignore_class","tap_time","held_tap_time","callbackList","zoomMouseNum","zoomTouchNum","boundList","Ue","motionDragId","motionHeldId","motionDzoomId","motion1ZoomId","motion2ZoomId","checkMatchVal","removeListVal","pushUniqVal","makeListPlus","fnHeld","fnMotionStart","fnMotionMove","fnMotionEnd","onMouse","onTouch","onMousewheel","match_count","idx","removed_count","splice","call","push","input_list","isArray","remove_val","match_val","push_uniq","setup","a_names","fn_bind","elem_this","$to_bind","seen_map","option_map","namespace_key","ue_namespace_code","namespace_list","slice","NSPACE_00","hasOwnProperty","bind","add","arg_map","namespace_str","namespace","event_type","elem_bound","isEmptyObject","teardown","$bound","NSPACE_01","unbind","removeData","timestamp","motion_id","motion_map","event_ue","idto_tapheld","do_allow_tap","px_end_x","px_start_x","px_end_y","px_start_y","ms_timestop","ms_elapsed","ms_timestart","uheld","Event","uheldstart","event_src","request_dzoom","elem","$target","do_zoomstart","cb_map","uzoomstart","preventDefault","utap","pop","selector_str","callback_match","callback_nomatch","elem_target","timeStamp","orig_target","px_current_x","clientX","px_current_y","clientY","px_delta_zoom","do_zoommove","px_pinch_zoom","mzoom1_map","mzoom2_map","px_delta_x","px_delta_y","Math","abs","pd_delta_y","floor","sqrt","pow","uzoommove","uheldmove","udragmove","udragstart","do_zoomend","udragend","uheldend","uzoomend","o_event","originalEvent","a_touches","changedTouches","touch_event","handler_fn","String","identifier","button","stopImmediatePropagation","shiftKey","ue","ueSetGlobalCb","min","max","requestAnimationFrame","work","cancelAnimationFrame","UDraggable","el","that","$el","defaults","positionElement","getStartPosition","updatePositionFrameHandler","queuedUpdate","ui","pos","started","dragUpdate","apply","queuePositionUpdate","prototype","constructor","disabled","normalisePosition","longPress","start","move","off","disable","enable","option","arguments","containment","_initContainment","right","bottom","helper","y","x","originalPosition","_start","_stopPropagation","delta_x","delta_y","axis","cur","_applyGrid","_applyContainment","drag","stop","stopPropagation","_mouseDistanceMet","_mouseDelayMet","distance","delay","o","$c","ce","Array","offsetParent","innerWidth","innerHeight","grid","gx","gy","cont","parseInt","dragging","args","results","each","$this","result","scroll","scroll_top","scroll_left","place_close_btn","getLoginDialogTitle","change","getWorkflowStepsOptions","val","_login_action","_join_action","set_current_language","workflow_step","setCurrentWorkflowStep","show_login_panel","init_translation_panel","timeout","getTranslationDialogTitle","getTranslationDialogButtons","targetLanguages","_get_target_languages_options","load_phrases","selected","location","reload","_logout_action","prop","set_translations_preview","rebuild_panel_phrases","show_editor","rel","show_settings","hrefHash","substring","indexOf","takeScreenshotBtn","translationsPreviewEnabled","translationsHighlightEnabled","devicePixelRatio","getScale","__html2canvas","allowTaint","scrollY","scrollX","proxy","scrollHeight","windowHeight","logging","then","canvas","accumulatedDataForTags","phrase","elements","elementKey","element","win","ownerDocument","defaultView","bbox","getBoundingClientRect","round","pageXOffset","pageYOffset","stringId","dataURL","toDataURL","blob","dataURItoBlob","formData","FormData","screenshotExtension","storageScreenshotName","title","hostname","pathname","notAllowedChars","request","storageId","screenshotName","bodyData","autoTag","screenshotId","fadeOut","error","errorTemplate","encodeURIComponent","catch","dataURI","byteString","atob","mimeString","ia","Uint8Array","charCodeAt","Blob","clear_btn","input","focus","select","submit","page","blur","language_code","workflowStepId","language_id","language_name","origin","protocol","host","pathName","search","languageCode","preloadTexts","response","userName","userPicture","workflowStepIds","sourceLanguageCode","editorLink","projectModelId","projectUrl","hasIcu","Object","keys","placeholdersRegexps","fileFormat","RegExp","missedLanguage","show_languages_panel","init_translations","alert","handle_browser_popups","confirm","prompt","init_editor","method","context","translations","phrase_id","source_segment","get_source_segment","new_value","phrase2preview","isIcu","get_icu_placeholders","get_placeholders","update_strings_context","_load_phrases_delayed","init_dom_mutation_handler","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","forEach","mutation","handle_dom_mutation","observe","attributes","childList","characterData","subtree","characterDataOldValue","attributeOldValue","addedNodes","crowdin_each_element","removedNodes","remove_phrases_not_on_page","nodeType","match_element_text","check_if_jipt_class_was_removed","matches","oldValue","match_element_attributes","attributeName","className","p","delayed_rebuild_panel_phrases","findTextsDOM","self","phrases_ids","get_phrases_from_text","innerHTML","_phrases_ids","_show_no_texts_warning","_load_phrases","handle_document_title","editor_height","client_height","EditorDialogClose","getEditorDialogTitle","getEditorDialogButtons","place_translation_preview","send_post_message","contentWindow","postMessage","onmessage","msg_type","translation_id","translation","top_suggestion","translation_status","update_phrase_dom_highlight","update_phrase_highlight","show_next_element","active_element","show_prev_element","setup_jipt_validation","handle_before_commit_request","request_id","handle_save_suggestions","editor_settings","close_editor_dialog","hotkeys_settings","validation_enabled","source","save_suggestions","set_draft_suggestion","suggestions","force_saving","newValue","hide_translation_badge","textContent","show_translation_badge","hasChildNodes","childNodes","nodeValue","startMatch","toLowerCase","match_element_html","textNode","nodeName","exactMatch","siblingsCount","handle_element","replaceWith","crowdinPhrase","firstChild","currentNode","nodes","is_tags_broken","outerHTML","nextSibling","attribute","jq_element","getAttribute","item","phraseId","pluralId","element_data","addPhraseToElement","translatable_item","element_classname","mouseenter","hover_show_translation_badge","get_translation_segment","jipt_segment","file_format","values","regexpPlaceholders","matchedKeys","matchedValues","delimiter","matched","result_split","shift","is_editor_element","currentValue","placeholderValues","select_element","update_active_phrase_highlight","preview_enabled","replace_placeholders_icu","replace_placeholders","stored_placeholders","obj","icu_parser","MessageFormatLight","compiler","insert_source_text_in_dom","sanitizing_text","current_translation","sanitizer","tags","get_element_position","node","offsetLeft","offsetTop","translateX","translateY","transform","mat","node_el","tagName","getComputedStyle","getPropertyValue","clientLeft","clientTop","webkitTransform","mozTransform","parseFloat","parentElement","create_translation_badge","badge_id","badge","touch","zIndex","mouseleave","children","prependTo","elementPosition","get_element_data","is_parent_element","child_elements","first","get_phrase_status","show_badge_popup","list","not_found_string","disabled_class","status_class","phrase_classname","preview","autoHideBadgePopup","one","highlight_panel_opened_phrase","class_name","index","get_next_phrase","next_id","get_first_untranslated","selector","findNext","get_prev_phrase","prev_id","next_phrase","refresh_suggestions","prev_phrase","visibleOnStep","direction","self_only","reached_active_phrase","reverse","mode","preload_ids","prev_phrase_id","next_phrase_id","show_string","string_id","test","languages","map","opt","defaultSelected","loginLanguageField","parents","errorMessage","success","_show_error_dialog","languageField","href","eventMethod","addEventListener","eventer","messageEvent","src","query","strings","toString","itemClass","item_counter","items_on_page","pages","current_page","start_item","fileNotAvailableForLanguage","disabled_title","no_items_help","ceil","input_size","prev_btn","next_btn","size","getJoinProjectDialogTpl","joinRequestSent","buttonUrl","projectManagersUrl","languageUrl","buttonText","sendRequestBtn","Boolean","logoutLinkTpl","mfaSettingsAndLogoutTpl","profileUrl","configURL","get_in_context_config_url","helpURL","warningDialogContent","warningDialog","msg","hideLogoutLink","view","hideLink","errorDialog","dialogConfig","_handle_jipt_error","errorCode","ownerUrl","mfa_settings_url","$element","classes","statuses","no_preview_class","phrase_no_preview_classname","inArray","classname","errorCallback","additionalHeaders","headers","Accept","isBlob","ajax","xhrFields","withCredentials","dataType","crossDomain","contentType","processData","beforeSend","xhr","settings","active","abort","complete","responseJSON","candidate","next","first_child","parent_next","prev","prev_last","ids","responses_count","serialized_ids_chunks","serialized_ids","serialize_ids","string_chunks","j","editStringsContext","phrasesIds","new_context","stringsToCheck","send_strings","phrase_ids","exec","chunks","chunk","last","searchLength","searchPos","substr","get_workflow_proofread_step_id","s_id","target_language","uri_protocol_named_ref_map","Tab","NewLine","uri_blacklist_protocols","javascript","vbscript","mhtml","uri_protocol_colon","uri_protocols_whitespaces","special_attr_value_unquoted_chars","sensitive_html_entities","null_value","_getProtocol","_convertSpecialChars","reg","repeat_action","tag","matchFullTag","_replaceTags","_getRawProtocol","_htmlDecode","_getCharacter","num","isFinite","_fromCodePoint","fromCodePoint","codePoint","fromCharCode","_stringify","m","namedRefMap","reNamedRef","decodedStr","named","named1","Number"],"mappings":"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","file":"jipt.6fd934ca.js","sourceRoot":"../static","sourcesContent":["// Copied from https://github.com/Khan/webapp/blob/31b9cfc1f5629de6eba6a461b77e187cf8342639/services/static/third_party/jipt/jipt-base.js\n(function(undefined) {\n    var $, // self loaded jQuery object\n        editContextTimeout = null,\n        stringsToUpdate = {\n            updatedStrings: [],\n            newStrings: [],\n        },\n        isMobile = navigator.userAgent.match(\n            /Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Windows Phone/i,\n        ),\n        config = {\n            preload_texts: 'auto',\n            project: document.domain,\n\n            // before_dom_insert(text, node, attribute)\n            before_dom_insert: function(text) {\n                return text;\n            },\n\n            // before_commit(source, translation, context, language)\n            before_commit: null,\n\n            // edit_string_context(context)\n            edit_strings_context: null,\n\n            // show badges for all elements\n            touch_optimized: 'ontouchstart' in document.documentElement,\n\n            // escape()\n            escape: null,\n\n            // sub-domain for enterprise\n            domain: null,\n        },\n        setCookie = function(name, value, expires) {\n            if (typeof expires === 'undefined') {\n                var expires_date = new Date(\n                    new Date().getTime() + 365 * 24 * 60 * 60 * 1000,\n                );\n                expires = expires_date.toGMTString();\n            }\n\n            document.cookie =\n                name + '=' + escape(value) + '; path=/; expires=' + expires;\n        },\n        removeCookie = function(name) {\n            document.cookie =\n                name + '=; path=/; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        },\n        getCookie = function(check_name) {\n            var documentCookies = document.cookie.split(';');\n            var temporaryCookies = '';\n            var cookieName = '';\n            var cookieValue = '';\n            var isThereAnyCookie = false;\n\n            for (var i = 0; i < documentCookies.length; i++) {\n                temporaryCookies = documentCookies[i].split('=');\n                cookieName = temporaryCookies[0].replace(/^\\s+|\\s+$/g, '');\n\n                if (cookieName === check_name) {\n                    isThereAnyCookie = true;\n\n                    if (temporaryCookies.length > 1) {\n                        cookieValue = unescape(\n                            temporaryCookies[1].replace(/^\\s+|\\s+$/g, ''),\n                        );\n                    }\n\n                    return cookieValue;\n                }\n\n                temporaryCookies = null;\n                cookieName = '';\n            }\n\n            if (!isThereAnyCookie) {\n                return null;\n            }\n        },\n        Storage = {\n            save: function(key, value) {\n                full_key = 'jipt_' + key + '_' + get_project_identifier();\n\n                if (window.localStorage) {\n                    localStorage.setItem(full_key, value);\n                } else {\n                    setCookie(full_key, value);\n                }\n            },\n            get: function(key) {\n                var value = null;\n                var full_key = 'jipt_' + key + '_' + get_project_identifier();\n\n                if (window.localStorage) {\n                    value = localStorage.getItem(full_key)\n                        ? localStorage.getItem(full_key)\n                        : null;\n\n                    // from (string) to (type) 'undefined'\n                    value = value === 'undefined' ? undefined : value;\n                } else {\n                    value = getCookie(full_key);\n                }\n\n                return value;\n            },\n            delete: function(key) {\n                var full_key = 'jipt_' + key + '_' + get_project_identifier();\n\n                if (window.localStorage) {\n                    localStorage.removeItem(full_key);\n                } else {\n                    removeCookie(full_key);\n                }\n            },\n        },\n        Url = {\n            join: 'join',\n            login: 'login',\n            enterpriseLogin: 'u/signin',\n\n            entryPoint: '',\n            apiEntryPoint: '',\n            jiptCDN: 'https://cdn.crowdin.com/jipt',\n\n            authDomain: 'https://accounts.crowdin.com',\n            crowdinDomain: 'crowdin.com',\n\n            getEntryPoint: function() {\n                if (this.entryPoint.length === 0) {\n                    var domain =\n                        config.domain != null ? config.domain + '.' : '';\n\n                    this.entryPoint = 'https://' + domain + this.crowdinDomain;\n                }\n\n                return this.entryPoint;\n            },\n\n            getAuthEntryPoint: function(url, params) {\n                params = params || {};\n                if (config.domain !== null) {\n                    params.domain = config.domain;\n                }\n\n                var queryParams = $.param(params);\n\n                return (\n                    this.authDomain +\n                    url +\n                    (queryParams ? '?' + queryParams : '')\n                );\n            },\n\n            getFullUrl: function(path) {\n                return this.getEntryPoint() + path;\n            },\n\n            getJiptPath: function(action) {\n                var pathAction;\n\n                if (action == this.join || action == this.login) {\n                    pathAction = config.domain ? this.enterpriseLogin : action;\n                } else {\n                    pathAction = this.login;\n                }\n\n                return this.getAuthEntryPoint('/login', {\n                    continue:\n                        '/' +\n                        pathAction +\n                        '?redirect_hash=' +\n                        jipt.user.redirectHash,\n                });\n            },\n        },\n        get_project_identifier = function() {\n            return config.project;\n        },\n        applyUserConfig = function() {\n            var cfg = _jipt || [];\n\n            for (var i = 0; i < cfg.length; i++) {\n                config[cfg[i][0]] = cfg[i][1];\n            }\n        },\n        maskDocument = function() {\n            var mask,\n                message,\n                body,\n                bodyLoadInterval,\n                maskStyle = '';\n            var messageStyle = '';\n            var message_margin = 0;\n\n            document.documentElement.style.opacity = '0';\n\n            maskStyle += 'position: fixed;';\n            maskStyle += 'top: 0;';\n            maskStyle += 'right: 0;';\n            maskStyle += 'bottom: 0;';\n            maskStyle += 'left: 0;';\n            maskStyle += 'z-index: 2037483647;';\n            maskStyle += 'text-align: center;';\n            maskStyle += 'background-color: #fff;';\n\n            mask = document.createElement('div');\n            mask.setAttribute('id', 'crowdin-jipt-mask');\n            mask.setAttribute('style', maskStyle);\n\n            message_margin = document.documentElement.clientHeight / 2 - 25;\n\n            messageStyle += 'height: 40px;';\n            messageStyle += 'width: 40px;';\n            messageStyle +=\n                'background-image: url(' +\n                Url.jiptCDN +\n                '/images/preloader.gif);';\n            messageStyle += 'background-repeat: no-repeat;';\n            messageStyle += 'background-position: center center;';\n            messageStyle += 'display: inline-block;';\n            messageStyle += 'margin-top: ' + message_margin + 'px;';\n\n            message = document.createElement('div');\n            message.setAttribute('style', messageStyle);\n\n            bodyLoadInterval = window.setInterval(function() {\n                body = document.getElementsByTagName('body')[0];\n\n                if (body !== undefined) {\n                    window.clearInterval(bodyLoadInterval);\n                    body.appendChild(mask);\n                    mask.appendChild(message);\n                    document.documentElement.style.opacity = '';\n                }\n            }, 100);\n        },\n        unmaskDocument = function() {\n            var mask = document.getElementById('crowdin-jipt-mask');\n\n            if (mask) {\n                mask.parentNode.removeChild(mask);\n            }\n        },\n        loadResource = function(resourceIdentifier, resourceType, callback) {\n            var resourceHandler,\n                loaded = false;\n\n            if (resourceType === 'js') {\n                resourceHandler = document.createElement('script');\n\n                resourceHandler.setAttribute('type', 'text/javascript');\n                resourceHandler.setAttribute('src', resourceIdentifier);\n            } else if (resourceType === 'css') {\n                resourceHandler = document.createElement('link');\n\n                resourceHandler.setAttribute('rel', 'stylesheet');\n                resourceHandler.setAttribute('type', 'text/css');\n                resourceHandler.setAttribute('href', resourceIdentifier);\n            }\n\n            if (resourceHandler === undefined) {\n                return;\n            }\n\n            resourceHandler.onload = resourceHandler.onreadystatechange = function() {\n                if (\n                    !loaded &&\n                    (!this.readyState ||\n                        this.readyState === 'loaded' ||\n                        this.readyState === 'complete')\n                ) {\n                    loaded = true;\n\n                    if (callback) {\n                        callback();\n                    }\n\n                    resourceHandler.onload = resourceHandler.onreadystatechange = null;\n                }\n            };\n\n            document\n                .getElementsByTagName('head')[0]\n                .appendChild(resourceHandler);\n        },\n        htmlspecialchars = function(string) {\n            return string\n                ? string\n                      .replace(/&/g, '&amp;')\n                      .replace(/</g, '&lt;')\n                      .replace(/>/g, '&gt;')\n                      .replace(/\"/g, '&quot;')\n                      .replace(/'/g, '&#039;')\n                : '';\n        },\n        jipt = {\n            callbacks: {},\n            phrases: {},\n\n            concurrentRequestsMaxCount: 10,\n            pendingRequests: [],\n\n            _phrases: {\n                need_load: {},\n                was_loaded: {},\n                callbacks: [],\n                load_timeout: null,\n            },\n\n            projectLink: null,\n            projectId: null,\n            projectName: null,\n            projectURL: null,\n\n            editor: {\n                currentTranslation: null,\n            },\n\n            target_languages: [],\n            workflowSteps: [],\n\n            language: {\n                code: null,\n                id: 0,\n                name: '',\n            },\n\n            workflowStep: {\n                id: 0,\n                type: '',\n            },\n\n            source_language: {\n                code: null,\n            },\n\n            user: {\n                isLoggedIn: true,\n                isLeader: true,\n                isManager: false,\n                name: '',\n                login: '',\n                picture: '',\n                redirectHash: '',\n            },\n\n            regexp: {\n                placeholders: {},\n                startPhrase: /{crwdns(\\d+):(\\d)}/i,\n                globalStartPhrase: /{crwdns(\\d+):\\d}/gi,\n                globalPhrase: /{crwdns(\\d+):(\\d)}([\\s\\S]*?){crwdne\\1:\\2}/gi,\n                exactPhrase: /^{crwdns(\\d+):(\\d)}([\\s\\S]*?){crwdne\\1:\\2}$/i,\n                delimiterPart: function(id, plural) {\n                    return '{crwdnd' + id + ':' + plural + '}';\n                },\n                endPart: function(id, plural) {\n                    return '{crwdne' + id + ':' + plural + '}';\n                },\n                wrapText: function(text) {\n                    return '{crwdns0:0}' + text + '{crwdne0:0}';\n                },\n            },\n\n            regexp_new: {\n                startPhrase: /crwdns(\\d+):(\\d)/i,\n                globalStartPhrase: /crwdns(\\d+):\\d/gi,\n                globalPhrase: /crwdns(\\d+):(\\d)([\\s\\S]*?)crwdne\\1:\\2/gi,\n                exactPhrase: /^crwdns(\\d+):(\\d)([\\s\\S]*?)crwdne\\1:\\2$/i,\n                delimiterPart: function(id, plural) {\n                    return 'crwdnd' + id + ':' + plural;\n                },\n                endPart: function(id, plural) {\n                    return 'crwdne' + id + ':' + plural;\n                },\n                wrapText: function(text) {\n                    return 'crwdns0:0' + text + 'crwdne0:0';\n                },\n            },\n\n            status: {\n                untranslated: 'untranslated',\n                partially_translated: 'partially_translated',\n                translated: 'translated',\n                partially_approved: 'partially_approved',\n                approved: 'approved',\n                hidden: 'hidden',\n                not_found: 'not_found',\n                not_visible_on_step: 'not_visible_on_step',\n                file_not_available_for_language:\n                    'file_not_available_for_language',\n            },\n\n            pluralsPreview: false,\n            translatable_placeholders: [],\n            translation_preview: {id: false, value: '', plural_id: -1},\n\n            alertFunction: null,\n            confirmFunction: null,\n            promptFunction: null,\n\n            loginDialog: null,\n            editorDialog: null,\n            translationDialog: null,\n\n            dialog_zindex: 2047483647, // minimum z-index of JIPT dialogs. Should be grater than page elements maximum z-index, but not be close to max css z-index value\n            minimized_translation_panel: true, // jipt translating panel: show or minimize by default\n            translations_preview: null,\n            translations_highlight: null,\n            translations_filter: null,\n            touch_optimized: null,\n\n            panel_search_phrase: null,\n            rebuild_panel_timeout: null,\n            panel_page: 0,\n            panel_pages: 1,\n\n            open_hotkeys_settings: false,\n            open_editor_settings: false,\n\n            editor_loaded: false,\n            editorDialogIframe: null,\n            not_found_warning: '[Unrecognized text]',\n\n            loginDialogContent: function() {\n                var signup = '';\n                if (!config.domain) {\n                    signup =\n                        '<div class=\"jipt-register-block jipt-help-block\">Don\\'t have an account? ' +\n                        '<a target=\"_blank\" href=\"javascript:void(0)\" id=\"crowdin-join\">Sign Up</a>' +\n                        '</div>';\n                }\n\n                return (\n                    '<div class=\"crowdin-login-panel\" style=\"display: none;\">' +\n                    '<div id=\"Jipt_Language\">' +\n                    '<div class=\"language-group\">' +\n                    '<label for=\"crowdin-login-language-field\">Target Language:</label>' +\n                    '<div>' +\n                    '<select class=\"no-margin input-block-level\" id=\"crowdin-login-language-field\"></select>' +\n                    '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div id=\"Jipt_Workflow_Step\">' +\n                    '<div class=\"workflow-step-group hide\">' +\n                    '<label class=\"jipt-s-margin-right\" for=\"crowdin-login-workflow-step-field\">Workflow Step:</label>' +\n                    '<div>' +\n                    '<select class=\"no-margin input-block-level\" id=\"crowdin-login-workflow-step-field\"></select>' +\n                    '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '<hr class=\"jipt-hr\">' +\n                    '<div class=\"jipt-clearfix text-center\">' +\n                    '<h4 class=\"no-margin-top\">Log in with your Crowdin account</h4>' +\n                    '<div id=\"regular_login\">' +\n                    '<button type=\"submit\" class=\"jipt-btn\" id=\"crowdin-jipt-login\">Log In</button>' +\n                    signup +\n                    '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"crowdin-languages-panel\" style=\"display: none;\">' +\n                    '<div>' +\n                    '<label for=\"crowdin-language-field\">Target Language: </label>' +\n                    '<div>' +\n                    '<select class=\"input-block-level\" id=\"crowdin-language-field\"></select>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"workflow-step-group hide\">' +\n                    '<label for=\"crowdin-workflow-step-field\">Workflow Step: </label>' +\n                    '<div>' +\n                    '<select class=\"input-block-level\" id=\"crowdin-workflow-step-field\"></select>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div>' +\n                    '<button type=\"button\" class=\"jipt-btn\" id=\"crowdin-select-language-and-step\" style=\"margin-top: 10px;\">Select</button>' +\n                    '</div>' +\n                    '</div>'\n                );\n            },\n\n            translationDialogButtons: function() {\n                var screenshotBtn = '';\n\n                if (jipt.user.isManager) {\n                    screenshotBtn =\n                        '<li><a  href=\"#jipt-screenshot\" class=\"jipt-btn jipt-btn-icon\"><i class=\"jipt-icon-add-screenshot\"></i></a></li>';\n                }\n\n                return (\n                    '' +\n                    '<div class=\"jipt-clearfix\">' +\n                    '<ul id=\"translation_panel_tabs\" class=\"jipt-tabs pull-left\">' +\n                    '<li><a id=\"show_translations\" class=\"jipt-btn active jipt-btn-icon\" href=\"#jipt-translations\"><i class=\"jipt-icon-home\"></i></a></li>' +\n                    screenshotBtn +\n                    '<li><a id=\"show_options\" href=\"#jipt-options\" class=\"jipt-btn jipt-btn-icon\"><i class=\"jipt-icon-options\"></i></a></li>' +\n                    '</ul>' +\n                    '<div id=\"translation_panel_paging_wrapper\" class=\"pull-right\">' +\n                    '<form id=\"translation_panel_paging\" class=\"jipt-paging no-margin jipt-clearfix\" style=\"display: none;\">' +\n                    '<input type=\"text\" class=\"pull-left\" id=\"translation_panel_current_page\" size=\"5\">' +\n                    '<div class=\"pull-right\">' +\n                    '<a href=\"#\" class=\"jipt-panel-page jipt-btn jipt-btn-icon\" id=\"translation_panel_prev_page\"><i class=\"jipt-icon-prev\"></i></a>' +\n                    '<a href=\"#\" class=\"jipt-panel-page jipt-btn jipt-btn-icon\" id=\"translation_panel_next_page\"><i class=\"jipt-icon-next\"></i></a>' +\n                    '</div>' +\n                    '</form>' +\n                    '</div>' +\n                    '</div>'\n                );\n            },\n\n            translationDialogContent: function() {\n                var checked_preview =\n                    jipt.translations_preview === true ? ' checked' : '';\n                var checked_highlight =\n                    jipt.translations_highlight === true ? ' checked' : '';\n                var checked_filter =\n                    jipt.translations_filter === true ? ' checked' : '';\n                var touch_optimized =\n                    jipt.touch_optimized === true ? ' checked' : '';\n                var login = jipt.user.login;\n                var user_name = jipt.user.name;\n                var user_picture = jipt.user.picture;\n                var user_picture_src = user_picture\n                    ? 'src=\"' + user_picture + '\"'\n                    : '';\n                var profile =\n                    Url.getEntryPoint() +\n                    (config.domain ? '/u/' : '/profile/' + login);\n\n                var option_preview =\n                    '<div class=\"jipt-control-group\">' +\n                    '<label class=\"jipt-checkbox\"><input type=\"checkbox\" id=\"jipt-translations-preview\"' +\n                    checked_preview +\n                    '>Preview translations</label>' +\n                    '</div>';\n\n                var option_highlight =\n                    '<div class=\"jipt-control-group\">' +\n                    '<label class=\"jipt-checkbox\"><input type=\"checkbox\" id=\"jipt-translations-highlight\"' +\n                    checked_highlight +\n                    '>Highlight</label>' +\n                    '</div>';\n\n                var option_filter = config.preload_texts\n                    ? '<div class=\"jipt-control-group\">' +\n                      '<label class=\"jipt-checkbox\"><input type=\"checkbox\" id=\"jipt-translations-filter\"' +\n                      checked_filter +\n                      '>List only texts from the current page</label>' +\n                      '<div class=\"jipt-help-block\">Home screen will show only strings used on this page.</div>' +\n                      '</div>'\n                    : '';\n\n                var touch_optimized = config.touch_optimized\n                    ? '<div class=\"jipt-control-group\">' +\n                      '<label class=\"jipt-checkbox\"><input type=\"checkbox\" id=\"jipt-touch-optimized\"' +\n                      touch_optimized +\n                      '>Touch optimized mode</label>' +\n                      '</div>'\n                    : '';\n\n                var keyboard_shortcuts = isMobile\n                    ? ''\n                    : '<div class=\"jipt-control-group jipt-settings-toggle\">' +\n                      '<a href=\"javascript:void(0);\" id=\"jipt-hotkeys-settings\">Keyboard Shortcuts</a>' +\n                      '</div>';\n\n                var jiptWorkflowStep = '';\n\n                if (jipt.workflowSteps.length) {\n                    jiptWorkflowStep =\n                        '<div class=\"jipt-control-group workflow-step-group\">' +\n                        '<label for=\"jipt-workflow-step\">Workflow Step: </label>' +\n                        '<div>' +\n                        '<select class=\"input-block-level\" id=\"jipt-workflow-step\"></select>' +\n                        '</div>' +\n                        '</div>';\n                }\n\n                return (\n                    '<div class=\"crowdin-translation-panel-container\">' +\n                    '<div id=\"translation_panel_tabs_content\" class=\"jipt-tabs-content\">' +\n                    '<div class=\"jipt-tab-pane\" id=\"jipt-translations\">' +\n                    '<div class=\"jipt-clear-btn-wrapper\">' +\n                    '<input type=\"text\" class=\"jipt-search-phrase input-block-level\" placeholder=\"Type to search string\" />' +\n                    '<a class=\"jipt-clear-btn\" href=\"#\" style=\"display: none;\"></a>' +\n                    '</div>' +\n                    '<div class=\"jipt-phrases-container no-focus\">' +\n                    '<ul class=\"jipt-phrases-to-translate\">' +\n                    '<li class=\"jipt-loading-msg\">Loading...</li>' +\n                    '</ul>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"jipt-tab-pane\" id=\"jipt-options\" style=\"display: none\">' +\n                    '<div class=\"jipt-control-group\">' +\n                    '<label for=\"jipt-target-languages\">Language: </label>' +\n                    '<div>' +\n                    '<select class=\"input-block-level\" id=\"jipt-target-languages\"></select>' +\n                    '</div>' +\n                    '</div>' +\n                    jiptWorkflowStep +\n                    '<div>' +\n                    '<button type=\"button\" class=\"jipt-btn\" id=\"jipt-change-language-and-step\">Change</button>' +\n                    '</div>' +\n                    '<hr class=\"jipt-hr\">' +\n                    option_preview +\n                    option_highlight +\n                    option_filter +\n                    touch_optimized +\n                    '<hr class=\"jipt-hr jipt-settings-toggle\">' +\n                    '<div class=\"jipt-control-group jipt-clearfix jipt-settings-toggle\">' +\n                    '<a class=\"pull-left jipt_user\" target=\"_blank\" href=\"' +\n                    profile +\n                    '\">' +\n                    '<img alt=\"\" ' +\n                    user_picture_src +\n                    ' class=\"jipt_user_picture\"></a>' +\n                    '<div style=\"margin-left: 54px\">' +\n                    '<div class=\"jipt_user_name\"><a target=\"_blank\" href=\"' +\n                    profile +\n                    '\">' +\n                    user_name +\n                    '</a></div>' +\n                    '<button type=\"button\" id=\"jipt-logout\" class=\"jipt-btn\">Log Out</button>' +\n                    '</div>' +\n                    '</div>' +\n                    '<hr class=\"jipt-hr jipt-settings-toggle\">' +\n                    '<div class=\"jipt-control-group jipt-settings-toggle\">' +\n                    '<a target=\"_blank\" href=\"' +\n                    jipt.projectURL +\n                    '\">View in Crowdin</a>' +\n                    '</div>' +\n                    '<div class=\"jipt-control-group jipt-settings-toggle\">' +\n                    '<a href=\"javascript:void(0);\" id=\"jipt-editor-settings\">Editor Settings</a>' +\n                    '</div>' +\n                    keyboard_shortcuts +\n                    '</div>' +\n                    '<div class=\"jipt-tab-pane\" id=\"jipt-screenshot\" style=\"display: none\">' +\n                    '<div>Take a screenshot of the current screen and upload it to Crowdin. All strings will be tagged automatically.</div>' +\n                    '<div class=\"screenshot-button-section\" style=\"margin-top: 20px\">' +\n                    '<div><button type=\"button\" id=\"make_screenshot\" class=\"jipt-btn\">Take screenshot</button></div>' +\n                    '</div>' +\n                    '<div class=\"screenshot-status\" id=\"screenshot-status\"></div>' +\n                    '</div>' +\n                    '</div>' +\n                    '</div>'\n                );\n            },\n\n            init: function() {\n                maskDocument();\n                applyUserConfig();\n\n                loadResource(Url.jiptCDN + '/jipt.css?v3', 'css');\n                loadResource(Url.jiptCDN + '/lib/h2c.min.js', 'js');\n                loadResource(Url.jiptCDN + '/lib/ResizeSensor.js', 'js');\n                loadResource(\n                    Url.jiptCDN + '/lib/jquery.min.js',\n                    'js',\n                    function() {\n                        $ = jQuery.noConflict(true); // $ is not a global variable\n\n                        jipt.init_plugins();\n                        jipt.init_editor_listener();\n\n                        $(document).ready(function() {\n                            jipt.checkCookie(function() {\n                                jipt.init_login_panel();\n                                jipt.init_highlight();\n                                jipt.init_preview();\n                                jipt.init_filter();\n                                jipt.init_touch_optimized();\n                                jipt.init_project();\n                            });\n                        });\n                    },\n                );\n            },\n\n            init_plugins: function() {\n                jipt.init_jipt_dialog();\n                jipt.init_mouse_touch_events();\n                jipt.init_drags();\n                jipt.init_center_position();\n            },\n\n            init_icu: function() {\n                loadResource(Url.jiptCDN + '/../js/lib/moment.min.js', 'js');\n                loadResource(\n                    Url.jiptCDN + '/../js/lib/icu/Intl.complete.min.js',\n                    'js',\n                );\n                loadResource(\n                    Url.jiptCDN + '/../js/lib/icu/messageformatLight.js',\n                    'js',\n                );\n            },\n\n            init_jipt_dialog: function() {\n                $.fn.jiptDialog = function(options) {\n                    options = $.extend(\n                        {\n                            modal: false,\n                            position: '',\n                            save_position: false,\n                            drags: true,\n                            resize: false,\n                            fixed: true,\n                            title_pane: '',\n                            minimize_btn: true,\n                            close_btn: true,\n                            minimized: false,\n                            icon: '',\n                            buttons_pane: '',\n                            width: 'auto',\n                            height: 'auto',\n                            save_height: false,\n                            custom_class: '',\n                            close_callback: '',\n                            iframe: false,\n                            action: 'init',\n                        },\n                        options,\n                    );\n\n                    var dialog_inner = $(this);\n                    var dialog = {};\n                    var content = {};\n\n                    if (options.action !== 'init') {\n                        dialog = dialog_inner.parent();\n\n                        if (!dialog.hasClass('jipt-dialog')) {\n                            console.warn(\n                                'Crowdin In-Context dialog: seems that dialog is not initialized.',\n                            );\n                            return;\n                        }\n                    }\n\n                    switch (options.action) {\n                        case 'init':\n                            init();\n                            return content;\n                        case 'open':\n                            open();\n                            break;\n                        case 'close':\n                            close();\n                            break;\n                        case 'destroy':\n                            destroy();\n                            break;\n                        case 'toggle_minimized':\n                            toggle_minimized();\n                            break;\n                        case 'toggle_minimized_show':\n                            toggle_minimized(true);\n                            break;\n                        case 'center':\n                            dialog.center();\n                            break;\n                        case 'is_visible':\n                            return dialog.is(':visible');\n                        case 'move_to_front':\n                            move_to_front();\n                            break;\n                        default:\n                            console.warn(\n                                'Crowdin JIPT dialog: unknown action :(',\n                            );\n                            return;\n                    }\n\n                    function createOverlay() {\n                        if (!$('#jipt-modal-mask').length) {\n                            $(\n                                $('<div>')\n                                    .attr('id', 'jipt-modal-mask')\n                                    .css('display', 'none'),\n                            ).appendTo('body');\n                        }\n                    }\n\n                    function init() {\n                        if (dialog_inner.hasClass('jipt-dialog-content')) {\n                            console.warn(\n                                'Crowdin In-Context dialog: seems that dialog is already initialized.',\n                            );\n                            return;\n                        }\n\n                        dialog = $(\n                            '<div data-html2canvas-ignore=\"true\" class=\"jipt-dialog crowdin-jipt ' +\n                                options.custom_class +\n                                '\" style=\"display:none\">',\n                        );\n                        dialog_inner.addClass('jipt-dialog-content');\n                        dialog.appendTo('body');\n\n                        if (options.iframe) {\n                            var iframe_contents = dialog_inner.html();\n                            var iframe = $(\n                                '<iframe class=\"crowdin-jipt\" frameBorder=\"0\"/>',\n                            );\n                            iframe.css({\n                                width: '100%',\n                                display: 'block',\n                                overflow: 'hidden',\n                                height: options.height,\n                            });\n                            dialog_inner\n                                .empty()\n                                .append(iframe)\n                                .css('padding', 0);\n                            dialog.html(dialog_inner);\n                            var iframe_doc = iframe.contents()[0];\n                            iframe_doc.open();\n                            iframe_doc.write(\n                                '<!doctype html>' +\n                                    '<html>' +\n                                    '<head>' +\n                                    '<link href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900\" rel=\"stylesheet\">' +\n                                    '<link rel=\"stylesheet\" type=\"text/css\" href=\"' +\n                                    Url.jiptCDN +\n                                    '/jipt.css' +\n                                    '\"/>' +\n                                    '</head>' +\n                                    '<body style=\"margin: 0\" id =\"' +\n                                    dialog_inner.get(0).id +\n                                    '\" class=\"jipt-dialog-content crowdin-jipt ' +\n                                    options.custom_class +\n                                    '\">' +\n                                    iframe_contents +\n                                    '</body>' +\n                                    '</html>',\n                            );\n                            iframe_doc.close();\n\n                            content = iframe.contents();\n                            content.mousedown(function(e) {\n                                if (\n                                    $(e.target).closest('.no-focus').length ===\n                                    0\n                                ) {\n                                    move_to_front();\n                                }\n                            });\n                        } else {\n                            dialog.html(dialog_inner);\n                            content = dialog_inner;\n                        }\n\n                        var dialog_id = dialog_inner.attr('id');\n                        var icon_class = options.icon\n                            ? ' jipt-dialog-icon-' + options.icon\n                            : '';\n                        var close_btn = options.close_btn\n                            ? '<a href=\"#\" data-id=\"#' +\n                              dialog_id +\n                              '\" class=\"jipt-close-btn jipt-dialog-close\">&times;</a>'\n                            : '';\n                        var minimize_btn = options.minimize_btn\n                            ? '<a href=\"#\" data-id=\"#' +\n                              dialog_id +\n                              '\" class=\"jipt-minimize-btn jipt-dialog-minimize\"><span></span></a>'\n                            : '';\n                        var title_pane = '';\n                        var title_buttons = '';\n                        var buttons_pane = '';\n\n                        if (options.title_pane) {\n                            title_pane =\n                                '<div class=\"jipt-dialog-title jipt-dialog-drags jipt-clearfix' +\n                                icon_class +\n                                '\">' +\n                                options.title_pane +\n                                '</div>';\n                        }\n\n                        if (close_btn || minimize_btn) {\n                            title_buttons =\n                                '<div class=\"jipt-dialog-title-buttons jipt-clearfix\">' +\n                                close_btn +\n                                minimize_btn +\n                                '</div>';\n                        }\n\n                        dialog_inner.before(title_buttons + title_pane);\n\n                        if (options.buttons_pane) {\n                            buttons_pane =\n                                '<div class=\"jipt-dialog-buttons jipt-dialog-drags jipt-clearfix\">' +\n                                options.buttons_pane +\n                                '</div>';\n                            dialog_inner.after(buttons_pane);\n                        }\n\n                        dialog.css(\n                            'position',\n                            options.fixed === true ? 'fixed' : 'absolute',\n                        );\n                        dialog.width(\n                            options.width === 'auto'\n                                ? dialog.width()\n                                : options.width,\n                        );\n                        dialog_inner.height(options.height);\n                        dialog_inner.append(\n                            '<div class=\"jipt-dialog-content-mask\" style=\"display: none; height:' +\n                                dialog_inner.height() +\n                                'px;\"><div>',\n                        );\n\n                        if (options.save_height && !options.iframe) {\n                            dialog.data('save_height', true);\n                        }\n\n                        if (options.modal) {\n                            dialog.data('modal', true);\n                            createOverlay();\n                        }\n\n                        if (options.drags && options.title_pane) {\n                            var position =\n                                options.fixed === true ? 'fixed' : 'absolute';\n\n                            dialog.udraggable({\n                                position: position,\n                                handle: '.jipt-dialog-drags',\n                            });\n                        }\n\n                        if (options.resize) {\n                            dialog.addClass('jipt-dialog-resize');\n                            dialog_inner.before(\n                                '<div class=\"jipt-dialog-mask mask-hidden\"></div>',\n                            );\n                        }\n\n                        if (options.minimized) {\n                            if (\n                                Storage.get(\n                                    dialog_inner.attr('id') + '_min',\n                                ) !== 'no'\n                            ) {\n                                dialog.addClass('jipt-dialog-minimized');\n                            }\n                        }\n\n                        dialog.find('.jipt-dialog-close').click(function() {\n                            dialog_inner.jiptDialog({action: 'close'});\n                            return false;\n                        });\n\n                        dialog.find('.jipt-dialog-minimize').click(function() {\n                            dialog_inner.jiptDialog({\n                                action: 'toggle_minimized',\n                            });\n                            return false;\n                        });\n\n                        dialog\n                            .find('.jipt-dialog-title')\n                            .on('utap', function() {\n                                if (dialog.hasClass('jipt-dialog-minimized')) {\n                                    dialog_inner.jiptDialog({\n                                        action: 'toggle_minimized_show',\n                                    });\n                                }\n                            });\n\n                        dialog.on('jipt_dialog_close', function() {\n                            if (options.close_callback) {\n                                options.close_callback();\n                            }\n                        });\n\n                        options.save_position\n                            ? restorePosition()\n                            : setPosition();\n                    }\n\n                    function toggle_minimized(show_only) {\n                        var offset;\n\n                        if (dialog.hasClass('jipt-dialog-minimized')) {\n                            dialog.removeClass('jipt-dialog-minimized');\n                            if (\n                                Storage.get(dialog_inner.attr('id') + '_normal')\n                            ) {\n                                offset = JSON.parse(\n                                    Storage.get(\n                                        dialog_inner.attr('id') + '_normal',\n                                    ),\n                                );\n\n                                dialog.css(offset);\n                            } else {\n                                dialog.css(\n                                    'top',\n                                    $(window).height() -\n                                        dialog.outerHeight() -\n                                        10 +\n                                        'px',\n                                );\n                            }\n                        } else if (!show_only) {\n                            var offset_top =\n                                dialog.offset().top - $(window).scrollTop();\n                            var offset_left =\n                                dialog.offset().left - $(window).scrollLeft();\n\n                            offset = {top: offset_top, left: offset_left}; // relative to window\n\n                            Storage.save(\n                                dialog_inner.attr('id') + '_normal',\n                                JSON.stringify(offset),\n                            );\n                            dialog.addClass('jipt-dialog-minimized');\n                        }\n                    }\n\n                    function setPosition() {\n                        var top, left;\n\n                        switch (options.position) {\n                            case 'center':\n                                if (options.fixed === false) {\n                                    dialog.center(window, true);\n                                } else {\n                                    dialog.center();\n                                }\n                                break;\n                            case 'bottom-left':\n                                top =\n                                    $(window).height() -\n                                    dialog.outerHeight() -\n                                    10 +\n                                    $(window).scrollTop();\n\n                                dialog.css({\n                                    top: (top < 0 ? 0 : top) + 'px',\n                                    left: 10 + 'px',\n                                });\n                                break;\n                            case 'bottom-right':\n                                top =\n                                    $(window).height() -\n                                    dialog.outerHeight() -\n                                    10 +\n                                    $(window).scrollTop();\n                                left =\n                                    $(window).width() -\n                                    dialog.outerWidth() -\n                                    10 +\n                                    $(window).scrollLeft();\n\n                                dialog.css({\n                                    top: (top < 0 ? 0 : top) + 'px',\n                                    left: (left > 0 ? 0 : left) + 'px',\n                                });\n                                break;\n                            default:\n                                if (options.fixed === false) {\n                                    dialog.center(window, true);\n                                } else {\n                                    dialog.center();\n                                }\n                        }\n                    }\n\n                    function savePosition() {\n                        $(window).unload(function() {\n                            if (dialog.is(':visible')) {\n                                var offset_top =\n                                    dialog.offset().top - $(window).scrollTop();\n                                var offset_left =\n                                    dialog.offset().left -\n                                    $(window).scrollLeft();\n                                var offset = {\n                                    top: offset_top,\n                                    left: offset_left,\n                                }; // relative to window\n\n                                Storage.save(\n                                    dialog_inner.attr('id'),\n                                    JSON.stringify(offset),\n                                );\n                                if (dialog.hasClass('jipt-dialog-minimized')) {\n                                    Storage.save(\n                                        dialog_inner.attr('id') + '_min',\n                                        'yes',\n                                    );\n                                } else {\n                                    Storage.save(\n                                        dialog_inner.attr('id') + '_min',\n                                        'no',\n                                    );\n                                }\n                            }\n                        });\n                    }\n\n                    function restorePosition() {\n                        if (\n                            Storage.get(dialog_inner.attr('id') + '_min') ===\n                            'yes'\n                        ) {\n                            dialog.addClass('jipt-dialog-minimized');\n                        }\n                        if (Storage.get(dialog_inner.attr('id'))) {\n                            var offset = JSON.parse(\n                                Storage.get(dialog_inner.attr('id')),\n                            );\n                            var min_offset_left = 0;\n                            var min_offset_top = 0;\n                            var max_offset_left =\n                                $(window).width() - dialog.outerWidth();\n                            var max_offset_top =\n                                $(window).height() - dialog.outerHeight();\n\n                            if (offset.left < min_offset_left) {\n                                offset.left = min_offset_left;\n                            } else if (offset.left > max_offset_left) {\n                                offset.left = max_offset_left;\n                            }\n\n                            if (offset.top < min_offset_top) {\n                                offset.top = min_offset_top;\n                            } else if (offset.top > max_offset_top) {\n                                offset.top = max_offset_top;\n                            }\n\n                            dialog.css(offset);\n                            savePosition();\n                        } else {\n                            setPosition();\n                            savePosition();\n                        }\n                    }\n\n                    function open() {\n                        if (dialog.data('modal')) {\n                            $('#jipt-modal-mask')\n                                .css('z-index', (jipt.dialog_zindex += 1))\n                                .show();\n                            $('html').addClass('jipt-no-scroll');\n                        }\n\n                        if (options.position !== '' && !dialog.is(':visible')) {\n                            setPosition();\n                        }\n\n                        move_to_front();\n                        dialog.css('visibility', 'visible');\n                        dialog.css('display', 'block');\n\n                        if (dialog.data('save_height')) {\n                            dialog_inner\n                                .height(dialog_inner.height())\n                                .css('overflow', 'auto');\n                        }\n                    }\n\n                    function close() {\n                        if (dialog.data('modal')) {\n                            $('html').removeClass('jipt-no-scroll');\n                            $('#jipt-modal-mask').hide();\n                        }\n\n                        dialog.css('display', 'none');\n                        dialog.trigger('jipt_dialog_close');\n                    }\n\n                    function destroy() {\n                        if (dialog.data('modal')) {\n                            $('#jipt-modal-mask').hide();\n                        }\n\n                        dialog.remove();\n                    }\n\n                    function move_to_front() {\n                        var time, type;\n                        var sensor =\n                            typeof __ResizeSensor !== 'undefined' &&\n                            new __ResizeSensor(dialog, function(e) {\n                                if (type === 'move_to_front') {\n                                    dialog\n                                        .find('.jipt-dialog-mask')\n                                        .removeClass('mask-hidden');\n                                    clearTimeout(time);\n                                    time = setTimeout(function() {\n                                        $(document).on('mouseup', function() {\n                                            dialog\n                                                .find('.jipt-dialog-mask')\n                                                .addClass('mask-hidden');\n                                            sensor.detach(dialog);\n                                        });\n                                    }, 100);\n                                }\n                                type = options.action;\n                            });\n\n                        dialog\n                            .css('z-index', (jipt.dialog_zindex += 1))\n                            .siblings('.jipt-dialog')\n                            .removeClass('active-dialog')\n                            .end()\n                            .addClass('active-dialog');\n                    }\n                };\n\n                $(document).on('mousedown utapstart', function(e) {\n                    var dialog = $(e.target).closest('.jipt-dialog');\n\n                    if (dialog.length) {\n                        dialog\n                            .find('.jipt-dialog-content')\n                            .jiptDialog({action: 'move_to_front'});\n                    } else {\n                        $('.jipt-dialog').removeClass('active-dialog');\n                    }\n                });\n            },\n\n            init_mouse_touch_events: function() {\n                /* Jquery plugin for unified mouse and touch events\n                 * Version 0.3.2\n                 * Modified by Anton\n                 * https://github.com/mmikowski/jquery.event.ue/blob/master/jquery.event.ue.js\n                 */\n                var $Special = $.event.special, // shortcut for special event\n                    motionMapMap = {}, // map of pointer motions by cursor\n                    isMoveBound = false, // flag if move handlers bound\n                    pxPinchZoom = -1, // distance between pinch-zoom points\n                    optionKey = 'ue_bound', // data key for storing options\n                    doDisableMouse = false, // flag to discard mouse input\n                    defaultOptMap = {\n                        // Default option hash\n                        bound_ns_map: {}, // namspace hash e.g. bound_ns_map.utap.fred\n                        wheel_ratio: 15, // multiplier for mousewheel delta\n                        px_radius: 1, // 'distance' dragged before dragstart\n                        ignore_class: ':input', // 'not' suppress matching elements\n                        tap_time: 200, // millisecond max time to consider tap\n                        held_tap_time: 300, // millisecond min time to consider taphold\n                    },\n                    callbackList = [], // global callback stack\n                    zoomMouseNum = 1, // multiplier for mouse zoom\n                    zoomTouchNum = 4, // multiplier for touch zoom\n                    boundList,\n                    Ue,\n                    motionDragId,\n                    motionHeldId,\n                    motionDzoomId,\n                    motion1ZoomId,\n                    motion2ZoomId,\n                    checkMatchVal,\n                    removeListVal,\n                    pushUniqVal,\n                    makeListPlus,\n                    fnHeld,\n                    fnMotionStart,\n                    fnMotionMove,\n                    fnMotionEnd,\n                    onMouse,\n                    onTouch,\n                    onMousewheel;\n                //----------------- END MODULE SCOPE VARIABLES ---------------\n\n                //------------------- BEGIN UTILITY METHODS ------------------\n                // Begin utiltity /makeListPlus/\n                // Returns an array with much desired methods:\n                //   * remove_val(value) : remove element that matches\n                //     the provided value. Returns number of elements\n                //     removed.\n                //   * match_val(value)  : shows if a value exists\n                //   * push_uniq(value)  : pushes a value onto the stack\n                //     iff it does not already exist there\n                // Note: the reason I need this is to compare objects to\n                //   objects (perhaps jQuery has something similar?)\n                checkMatchVal = function(data) {\n                    var match_count = 0,\n                        idx;\n                    for (idx = this.length; idx; 0) {\n                        if (this[--idx] === data) {\n                            match_count++;\n                        }\n                    }\n                    return match_count;\n                };\n                removeListVal = function(data) {\n                    var removed_count = 0,\n                        idx;\n                    for (idx = this.length; idx; 0) {\n                        if (this[--idx] === data) {\n                            this.splice(idx, 1);\n                            removed_count++;\n                            idx++;\n                        }\n                    }\n                    return removed_count;\n                };\n                pushUniqVal = function(data) {\n                    if (checkMatchVal.call(this, data)) {\n                        return false;\n                    }\n                    this.push(data);\n                    return true;\n                };\n                // primary utility\n                makeListPlus = function(input_list) {\n                    if (input_list && $.isArray(input_list)) {\n                        if (input_list.remove_val) {\n                            console.warn(\n                                'The array appears to already have listPlus capabilities',\n                            );\n                            return input_list;\n                        }\n                    } else {\n                        input_list = [];\n                    }\n                    input_list.remove_val = removeListVal;\n                    input_list.match_val = checkMatchVal;\n                    input_list.push_uniq = pushUniqVal;\n\n                    return input_list;\n                };\n                // End utility /makeListPlus/\n                //-------------------- END UTILITY METHODS -------------------\n\n                //--------------- BEGIN JQUERY SPECIAL EVENTS ----------------\n                // Unique array for bound objects\n                boundList = makeListPlus();\n\n                // Begin define special event handlers\n                Ue = {\n                    setup: function(data, a_names, fn_bind) {\n                        var elem_this = this,\n                            $to_bind = $(elem_this),\n                            seen_map = {},\n                            option_map,\n                            idx,\n                            namespace_key,\n                            ue_namespace_code,\n                            namespace_list;\n\n                        // if previous related event bound do not rebind, but do add to\n                        // type of event bound to this element, if not already noted\n                        if ($.data(this, optionKey)) {\n                            return;\n                        }\n\n                        option_map = {};\n                        $.extend(true, option_map, defaultOptMap);\n                        $.data(elem_this, optionKey, option_map);\n\n                        namespace_list = makeListPlus(a_names.slice(0));\n                        if (\n                            !namespace_list.length ||\n                            namespace_list[0] === ''\n                        ) {\n                            namespace_list = ['000'];\n                        }\n\n                        NSPACE_00: for (\n                            idx = 0;\n                            idx < namespace_list.length;\n                            idx++\n                        ) {\n                            namespace_key = namespace_list[idx];\n\n                            if (!namespace_key) {\n                                continue NSPACE_00;\n                            }\n                            if (seen_map.hasOwnProperty(namespace_key)) {\n                                continue NSPACE_00;\n                            }\n\n                            seen_map[namespace_key] = true;\n\n                            ue_namespace_code = '.__ue' + namespace_key;\n\n                            $to_bind.bind(\n                                'mousedown' + ue_namespace_code,\n                                onMouse,\n                            );\n                            $to_bind.bind(\n                                'touchstart' + ue_namespace_code,\n                                onTouch,\n                            );\n                            $to_bind.bind(\n                                'mousewheel' + ue_namespace_code,\n                                onMousewheel,\n                            );\n                        }\n\n                        boundList.push_uniq(elem_this); // record as bound element\n\n                        if (!isMoveBound) {\n                            // console.log('first element bound - adding global binds');\n                            $(document).bind('mousemove.__ue', onMouse);\n                            $(document).bind('touchmove.__ue', onTouch);\n                            $(document).bind('mouseup.__ue', onMouse);\n                            $(document).bind('touchend.__ue', onTouch);\n                            $(document).bind('touchcancel.__ue', onTouch);\n                            isMoveBound = true;\n                        }\n                    },\n\n                    // arg_map.type = string - name of event to bind\n                    // arg_map.data = poly - whatever (optional) data was passed when binding\n                    // arg_map.namespace = string - A sorted, dot-delimited list of namespaces\n                    //   specified when binding the event\n                    // arg_map.handler  = fn - the event handler the developer wishes to be bound\n                    //   to the event.  This function should be called whenever the event\n                    //   is triggered\n                    // arg_map.guid = number - unique ID for event handler, provided by jQuery\n                    // arg_map.selector = string - selector used by 'delegate' or 'live' jQuery\n                    //   methods.  Only available when these methods are used.\n                    //\n                    // this - the element to which the event handler is being bound\n                    // this always executes immediate after setup (if first binding)\n                    add: function(arg_map) {\n                        var elem_this = this,\n                            option_map = $.data(elem_this, optionKey),\n                            namespace_str = arg_map.namespace,\n                            event_type = arg_map.type,\n                            bound_ns_map,\n                            namespace_list,\n                            idx,\n                            namespace_key;\n                        if (!option_map) {\n                            return;\n                        }\n\n                        bound_ns_map = option_map.bound_ns_map;\n\n                        if (!bound_ns_map[event_type]) {\n                            // this indicates a non-namespaced entry\n                            bound_ns_map[event_type] = {};\n                        }\n\n                        if (!namespace_str) {\n                            return;\n                        }\n\n                        namespace_list = namespace_str.split('.');\n\n                        for (idx = 0; idx < namespace_list.length; idx++) {\n                            namespace_key = namespace_list[idx];\n                            bound_ns_map[event_type][namespace_key] = true;\n                        }\n                    },\n\n                    remove: function(arg_map) {\n                        var elem_bound = this,\n                            option_map = $.data(elem_bound, optionKey),\n                            bound_ns_map = option_map.bound_ns_map,\n                            event_type = arg_map.type,\n                            namespace_str = arg_map.namespace,\n                            namespace_list,\n                            idx,\n                            namespace_key;\n\n                        if (!bound_ns_map[event_type]) {\n                            return;\n                        }\n\n                        // No namespace(s) provided:\n                        // Remove complete record for custom event type (e.g. utap)\n                        if (!namespace_str) {\n                            delete bound_ns_map[event_type];\n                            return;\n                        }\n\n                        // Namespace(s) provided:\n                        // Remove namespace flags from each custom event typei (e.g. utap)\n                        // record.  If all claimed namespaces are removed, remove\n                        // complete record.\n                        namespace_list = namespace_str.split('.');\n\n                        for (idx = 0; idx < namespace_list.length; idx++) {\n                            namespace_key = namespace_list[idx];\n                            if (bound_ns_map[event_type][namespace_key]) {\n                                delete bound_ns_map[event_type][namespace_key];\n                            }\n                        }\n\n                        if ($.isEmptyObject(bound_ns_map[event_type])) {\n                            delete bound_ns_map[event_type];\n                        }\n                    },\n\n                    teardown: function(a_names) {\n                        var elem_bound = this,\n                            $bound = $(elem_bound),\n                            option_map = $.data(elem_bound, optionKey),\n                            bound_ns_map = option_map.bound_ns_map,\n                            idx,\n                            namespace_key,\n                            ue_namespace_code,\n                            namespace_list;\n\n                        // do not tear down if related handlers are still bound\n                        if (!$.isEmptyObject(bound_ns_map)) {\n                            return;\n                        }\n\n                        namespace_list = makeListPlus(a_names);\n                        namespace_list.push_uniq('000');\n\n                        NSPACE_01: for (\n                            idx = 0;\n                            idx < namespace_list.length;\n                            idx++\n                        ) {\n                            namespace_key = namespace_list[idx];\n\n                            if (!namespace_key) {\n                                continue NSPACE_01;\n                            }\n\n                            ue_namespace_code = '.__ue' + namespace_key;\n                            $bound.unbind('mousedown' + ue_namespace_code);\n                            $bound.unbind('touchstart' + ue_namespace_code);\n                            $bound.unbind('mousewheel' + ue_namespace_code);\n                        }\n\n                        $.removeData(elem_bound, optionKey);\n\n                        // Unbind document events only after last element element is removed\n                        boundList.remove_val(this);\n                        if (boundList.length === 0) {\n                            // console.log('last bound element removed - removing global binds');\n                            $(document).unbind('mousemove.__ue');\n                            $(document).unbind('touchmove.__ue');\n                            $(document).unbind('mouseup.__ue');\n                            $(document).unbind('touchend.__ue');\n                            $(document).unbind('touchcancel.__ue');\n                            isMoveBound = false;\n                        }\n                    },\n                };\n                // End define special event handlers\n                //--------------- BEGIN JQUERY SPECIAL EVENTS ----------------\n\n                //------------------ BEGIN MOTION CONTROLS -------------------\n                // Begin motion control /fnHeld/\n                fnHeld = function(arg_map) {\n                    var timestamp = +new Date(),\n                        motion_id = arg_map.motion_id,\n                        motion_map = arg_map.motion_map,\n                        bound_ns_map = arg_map.bound_ns_map,\n                        event_ue;\n\n                    delete motion_map.idto_tapheld;\n\n                    if (!motion_map.do_allow_tap) {\n                        return;\n                    }\n\n                    motion_map.px_end_x = motion_map.px_start_x;\n                    motion_map.px_end_y = motion_map.px_start_y;\n                    motion_map.ms_timestop = timestamp;\n                    motion_map.ms_elapsed = timestamp - motion_map.ms_timestart;\n\n                    if (bound_ns_map.uheld) {\n                        event_ue = $.Event('uheld');\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n                    }\n\n                    // remove tracking, as we want no futher action on this motion\n                    if (bound_ns_map.uheldstart) {\n                        event_ue = $.Event('uheldstart');\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n                        motionHeldId = motion_id;\n                    } else {\n                        delete motionMapMap[motion_id];\n                    }\n                };\n                // End motion control /fnHeld/\n\n                // Begin motion control /fnMotionStart/\n                fnMotionStart = function(arg_map) {\n                    var motion_id = arg_map.motion_id,\n                        event_src = arg_map.event_src,\n                        request_dzoom = arg_map.request_dzoom,\n                        option_map = $.data(arg_map.elem, optionKey),\n                        bound_ns_map = option_map.bound_ns_map,\n                        $target = $(event_src.target),\n                        do_zoomstart = false,\n                        motion_map,\n                        cb_map,\n                        do_allow_tap,\n                        event_ue;\n\n                    // this should never happen, but it does\n                    if (motionMapMap[motion_id]) {\n                        return;\n                    }\n\n                    if (request_dzoom && !bound_ns_map.uzoomstart) {\n                        return;\n                    }\n\n                    // :input selector includes text areas\n                    if (\n                        $target.is(option_map.ignore_class) ||\n                        $target.is('a') ||\n                        $target.parent().is('a')\n                    ) {\n                        return;\n                    }\n\n                    event_src.preventDefault();\n\n                    do_allow_tap =\n                        bound_ns_map.utap ||\n                        bound_ns_map.uheld ||\n                        bound_ns_map.uheldstart\n                            ? true\n                            : false;\n\n                    cb_map = callbackList.pop();\n\n                    while (cb_map) {\n                        if (\n                            $target.is(cb_map.selector_str) ||\n                            $(arg_map.elem).is(cb_map.selector_str)\n                        ) {\n                            if (cb_map.callback_match) {\n                                cb_map.callback_match(arg_map);\n                            }\n                        } else {\n                            if (cb_map.callback_nomatch) {\n                                cb_map.callback_nomatch(arg_map);\n                            }\n                        }\n                        cb_map = callbackList.pop();\n                    }\n\n                    motion_map = {\n                        do_allow_tap: do_allow_tap,\n                        elem_bound: arg_map.elem,\n                        elem_target: event_src.target,\n                        ms_elapsed: 0,\n                        ms_timestart: event_src.timeStamp,\n                        ms_timestop: undefined,\n                        option_map: option_map,\n                        orig_target: event_src.target,\n                        px_current_x: event_src.clientX,\n                        px_current_y: event_src.clientY,\n                        px_end_x: undefined,\n                        px_end_y: undefined,\n                        px_start_x: event_src.clientX,\n                        px_start_y: event_src.clientY,\n                        timeStamp: event_src.timeStamp,\n                    };\n\n                    motionMapMap[motion_id] = motion_map;\n\n                    event_ue = $.Event('utapstart');\n                    $.extend(event_ue, motion_map);\n                    $(motion_map.elem_bound).trigger(event_ue);\n\n                    if (bound_ns_map.uzoomstart) {\n                        if (request_dzoom) {\n                            motionDzoomId = motion_id;\n                        } else if (!motion1ZoomId) {\n                            motion1ZoomId = motion_id;\n                        } else if (!motion2ZoomId) {\n                            motion2ZoomId = motion_id;\n                            event_ue = $.Event('uzoomstart');\n                            do_zoomstart = true;\n                        }\n\n                        if (do_zoomstart) {\n                            event_ue = $.Event('uzoomstart');\n                            motion_map.px_delta_zoom = 0;\n                            $.extend(event_ue, motion_map);\n                            $(motion_map.elem_bound).trigger(event_ue);\n                            return;\n                        }\n                    }\n\n                    if (bound_ns_map.uheld || bound_ns_map.uheldstart) {\n                        motion_map.idto_tapheld = setTimeout(function() {\n                            fnHeld({\n                                motion_id: motion_id,\n                                motion_map: motion_map,\n                                bound_ns_map: bound_ns_map,\n                            });\n                        }, option_map.held_tap_time);\n                    }\n                };\n                // End motion control /fnMotionStart/\n\n                // Begin motion control /fnMotionMove/\n                fnMotionMove = function(arg_map) {\n                    var motion_id = arg_map.motion_id,\n                        event_src = arg_map.event_src,\n                        do_zoommove = false,\n                        motion_map,\n                        option_map,\n                        bound_ns_map,\n                        event_ue,\n                        px_pinch_zoom,\n                        px_delta_zoom,\n                        mzoom1_map,\n                        mzoom2_map;\n\n                    if (!motionMapMap[motion_id]) {\n                        return;\n                    }\n\n                    event_src.preventDefault();\n\n                    motion_map = motionMapMap[motion_id];\n                    option_map = motion_map.option_map;\n                    bound_ns_map = option_map.bound_ns_map;\n\n                    motion_map.timeStamp = event_src.timeStamp;\n                    motion_map.elem_target = event_src.target;\n                    motion_map.ms_elapsed =\n                        event_src.timeStamp - motion_map.ms_timestart;\n\n                    motion_map.px_delta_x =\n                        event_src.clientX - motion_map.px_current_x;\n                    motion_map.px_delta_y =\n                        event_src.clientY - motion_map.px_current_y;\n\n                    motion_map.px_current_x = event_src.clientX;\n                    motion_map.px_current_y = event_src.clientY;\n\n                    // native event object override\n                    motion_map.timeStamp = event_src.timeStamp;\n\n                    // disallow tap if outside of zone or time elapsed\n                    // we use this for other events, so we do it every time\n                    if (motion_map.do_allow_tap) {\n                        if (\n                            Math.abs(motion_map.px_delta_x) >\n                                option_map.px_radius ||\n                            Math.abs(motion_map.pd_delta_y) >\n                                option_map.px_radius ||\n                            motion_map.ms_elapsed > option_map.tap_time\n                        ) {\n                            motion_map.do_allow_tap = false;\n                        }\n                    }\n\n                    if (\n                        motion1ZoomId &&\n                        motion2ZoomId &&\n                        (motion_id === motion1ZoomId ||\n                            motion_id === motion2ZoomId)\n                    ) {\n                        motionMapMap[motion_id] = motion_map;\n                        mzoom1_map = motionMapMap[motion1ZoomId];\n                        mzoom2_map = motionMapMap[motion2ZoomId];\n\n                        px_pinch_zoom = Math.floor(\n                            Math.sqrt(\n                                Math.pow(\n                                    mzoom1_map.px_current_x -\n                                        mzoom2_map.px_current_x,\n                                    2,\n                                ) +\n                                    Math.pow(\n                                        mzoom1_map.px_current_y -\n                                            mzoom2_map.px_current_y,\n                                        2,\n                                    ),\n                            ) + 0.5,\n                        );\n\n                        if (pxPinchZoom === -1) {\n                            px_delta_zoom = 0;\n                        } else {\n                            px_delta_zoom =\n                                (px_pinch_zoom - pxPinchZoom) * zoomTouchNum;\n                        }\n\n                        // save value for next iteration delta comparison\n                        pxPinchZoom = px_pinch_zoom;\n                        do_zoommove = true;\n                    } else if (motionDzoomId === motion_id) {\n                        if (bound_ns_map.uzoommove) {\n                            px_delta_zoom =\n                                motion_map.px_delta_y * zoomMouseNum;\n                            do_zoommove = true;\n                        }\n                    }\n\n                    if (do_zoommove) {\n                        event_ue = $.Event('uzoommove');\n                        motion_map.px_delta_zoom = px_delta_zoom;\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n                        return;\n                    }\n\n                    if (motionHeldId === motion_id) {\n                        if (bound_ns_map.uheldmove) {\n                            event_ue = $.Event('uheldmove');\n                            $.extend(event_ue, motion_map);\n                            $(motion_map.elem_bound).trigger(event_ue);\n                        }\n                    } else if (motionDragId === motion_id) {\n                        if (bound_ns_map.udragmove) {\n                            event_ue = $.Event('udragmove');\n                            $.extend(event_ue, motion_map);\n                            $(motion_map.elem_bound).trigger(event_ue);\n                        }\n                    }\n\n                    if (\n                        !motionDragId &&\n                        !motionHeldId &&\n                        bound_ns_map.udragstart &&\n                        motion_map.do_allow_tap === false\n                    ) {\n                        motionDragId = motion_id;\n                        event_ue = $.Event('udragstart');\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n\n                        if (motion_map.idto_tapheld) {\n                            clearTimeout(motion_map.idto_tapheld);\n                            delete motion_map.idto_tapheld;\n                        }\n                    }\n                };\n                // End motion control /fnMotionMove/\n\n                // Begin motion control /fnMotionEnd/\n                fnMotionEnd = function(arg_map) {\n                    var motion_id = arg_map.motion_id,\n                        event_src = arg_map.event_src,\n                        do_zoomend = false,\n                        motion_map,\n                        option_map,\n                        bound_ns_map,\n                        event_ue;\n\n                    doDisableMouse = false;\n\n                    if (!motionMapMap[motion_id]) {\n                        return;\n                    }\n\n                    motion_map = motionMapMap[motion_id];\n                    option_map = motion_map.option_map;\n                    bound_ns_map = option_map.bound_ns_map;\n\n                    motion_map.elem_target = event_src.target;\n                    motion_map.ms_elapsed =\n                        event_src.timeStamp - motion_map.ms_timestart;\n                    motion_map.ms_timestop = event_src.timeStamp;\n\n                    if (motion_map.px_current_x) {\n                        motion_map.px_delta_x =\n                            event_src.clientX - motion_map.px_current_x;\n                        motion_map.px_delta_y =\n                            event_src.clientY - motion_map.px_current_y;\n                    }\n\n                    motion_map.px_current_x = event_src.clientX;\n                    motion_map.px_current_y = event_src.clientY;\n\n                    motion_map.px_end_x = event_src.clientX;\n                    motion_map.px_end_y = event_src.clientY;\n\n                    // native event object override\n                    motion_map.timeStamp = event_src.timeStamp;\n\n                    event_ue = $.Event('utapend');\n                    $.extend(event_ue, motion_map);\n                    $(motion_map.elem_bound).trigger(event_ue);\n\n                    // clear-out any long-hold tap timer\n                    if (motion_map.idto_tapheld) {\n                        clearTimeout(motion_map.idto_tapheld);\n                        delete motion_map.idto_tapheld;\n                    }\n\n                    // trigger utap\n                    if (\n                        bound_ns_map.utap &&\n                        motion_map.ms_elapsed <= option_map.tap_time &&\n                        motion_map.do_allow_tap\n                    ) {\n                        event_ue = $.Event('utap');\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n                    }\n\n                    // trigger udragend\n                    if (motion_id === motionDragId) {\n                        if (bound_ns_map.udragend) {\n                            event_ue = $.Event('udragend');\n                            $.extend(event_ue, motion_map);\n                            $(motion_map.elem_bound).trigger(event_ue);\n                        }\n                        motionDragId = undefined;\n                    }\n\n                    // trigger heldend\n                    if (motion_id === motionHeldId) {\n                        if (bound_ns_map.uheldend) {\n                            event_ue = $.Event('uheldend');\n                            $.extend(event_ue, motion_map);\n                            $(motion_map.elem_bound).trigger(event_ue);\n                        }\n                        motionHeldId = undefined;\n                    }\n\n                    // trigger uzoomend\n                    if (motion_id === motionDzoomId) {\n                        do_zoomend = true;\n                        motionDzoomId = undefined;\n                    }\n\n                    // cleanup zoom info\n                    else if (motion_id === motion1ZoomId) {\n                        if (motion2ZoomId) {\n                            motion1ZoomId = motion2ZoomId;\n                            motion2ZoomId = undefined;\n                            do_zoomend = true;\n                        } else {\n                            motion1ZoomId = undefined;\n                        }\n                        pxPinchZoom = -1;\n                    }\n                    if (motion_id === motion2ZoomId) {\n                        motion2ZoomId = undefined;\n                        pxPinchZoom = -1;\n                        do_zoomend = true;\n                    }\n\n                    if (do_zoomend && bound_ns_map.uzoomend) {\n                        event_ue = $.Event('uzoomend');\n                        motion_map.px_delta_zoom = 0;\n                        $.extend(event_ue, motion_map);\n                        $(motion_map.elem_bound).trigger(event_ue);\n                    }\n                    // remove pointer from consideration\n                    delete motionMapMap[motion_id];\n                };\n                // End motion control /fnMotionEnd/\n                //------------------ END MOTION CONTROLS -------------------\n\n                //------------------- BEGIN EVENT HANDLERS -------------------\n                // Begin event handler /onTouch/ for all touch events.\n                // We use the 'type' attribute to dispatch to motion control\n                onTouch = function(event) {\n                    var elem_this = this,\n                        timestamp = +new Date(),\n                        o_event = event.originalEvent,\n                        a_touches = o_event.changedTouches || [],\n                        idx,\n                        touch_event,\n                        motion_id,\n                        handler_fn;\n\n                    doDisableMouse = true;\n\n                    event.timeStamp = timestamp;\n\n                    switch (event.type) {\n                        case 'touchstart':\n                            handler_fn = fnMotionStart;\n                            //             event.preventDefault();\n                            break;\n                        case 'touchmove':\n                            handler_fn = fnMotionMove;\n                            //             event.preventDefault();\n                            break;\n                        case 'touchend':\n                        case 'touchcancel':\n                            handler_fn = fnMotionEnd;\n                            break;\n                        default:\n                            handler_fn = null;\n                    }\n\n                    if (!handler_fn) {\n                        return;\n                    }\n\n                    for (idx = 0; idx < a_touches.length; idx++) {\n                        touch_event = a_touches[idx];\n\n                        motion_id = 'touch' + String(touch_event.identifier);\n\n                        event.clientX = touch_event.clientX;\n                        event.clientY = touch_event.clientY;\n                        handler_fn({\n                            elem: elem_this,\n                            motion_id: motion_id,\n                            event_src: event,\n                        });\n                    }\n                };\n                // End event handler /onTouch/\n\n                // Begin event handler /onMouse/ for all mouse events\n                // We use the 'type' attribute to dispatch to motion control\n                onMouse = function(event) {\n                    var elem_this = this,\n                        motion_id = 'mouse' + String(event.button),\n                        request_dzoom = false,\n                        handler_fn;\n\n                    if (doDisableMouse) {\n                        event.stopImmediatePropagation();\n                        return;\n                    }\n\n                    if (event.shiftKey) {\n                        request_dzoom = true;\n                    }\n\n                    // skip left or middle clicks\n                    if (event.type !== 'mousemove') {\n                        if (event.button !== 0) {\n                            return true;\n                        }\n                    }\n\n                    switch (event.type) {\n                        case 'mousedown':\n                            handler_fn = fnMotionStart;\n                            break;\n                        case 'mouseup':\n                            handler_fn = fnMotionEnd;\n                            break;\n                        case 'mousemove':\n                            handler_fn = fnMotionMove;\n                            //             event.preventDefault();\n                            break;\n                        default:\n                            handler_fn = null;\n                    }\n\n                    if (!handler_fn) {\n                        return;\n                    }\n\n                    handler_fn({\n                        elem: elem_this,\n                        event_src: event,\n                        request_dzoom: request_dzoom,\n                        motion_id: motion_id,\n                    });\n                };\n                // End event handler /onMouse/\n                //-------------------- END EVENT HANDLERS --------------------\n\n                // Export special events through jQuery API\n                $Special.ue = $Special.utap = $Special.uheld = $Special.uzoomstart = $Special.uzoommove = $Special.uzoomend = $Special.udragstart = $Special.udragmove = $Special.udragend = $Special.uheldstart = $Special.uheldmove = $Special.uheldend = Ue;\n                $.ueSetGlobalCb = function(\n                    selector_str,\n                    callback_match,\n                    callback_nomatch,\n                ) {\n                    callbackList.push({\n                        selector_str: selector_str || '',\n                        callback_match: callback_match || null,\n                        callback_nomatch: callback_nomatch || null,\n                    });\n                };\n            },\n\n            init_drags: function() {\n                /* Jquery Udraggable\n                 * Modified by Anton\n                 * http://grantm.github.io/jquery-udraggable/\n                 */\n\n                'use strict';\n\n                var floor = Math.floor;\n                var min = Math.min;\n                var max = Math.max;\n\n                window.requestAnimationFrame =\n                    window.requestAnimationFrame ||\n                    function(work) {\n                        return setTimeout(work, 10);\n                    };\n\n                window.cancelAnimationFrame =\n                    window.cancelAnimationFrame ||\n                    function(id) {\n                        return clearTimeout(id);\n                    };\n\n                // Constructor function\n\n                var UDraggable = function(el, options) {\n                    var that = this;\n                    this.el = el;\n                    this.$el = $(el);\n                    this.options = $.extend(\n                        {},\n                        $.fn.udraggable.defaults,\n                        options,\n                    );\n                    this.positionElement =\n                        this.options.positionElement || this.positionElement;\n                    this.getStartPosition =\n                        this.options.getStartPosition || this.getStartPosition;\n                    this.updatePositionFrameHandler = function() {\n                        delete that.queuedUpdate;\n                        if (that.ui) {\n                            // anton\n                            var pos = that.ui.position;\n                            that.positionElement(\n                                that.$el,\n                                that.started,\n                                pos.left,\n                                pos.top,\n                            );\n                            if (that.options.dragUpdate) {\n                                that.options.dragUpdate.apply(that.el, [\n                                    that.ui,\n                                ]);\n                            }\n                        }\n                    };\n                    this.queuePositionUpdate = function() {\n                        if (!that.queuedUpdate) {\n                            that.queuedUpdate = window.requestAnimationFrame(\n                                that.updatePositionFrameHandler,\n                            );\n                        }\n                    };\n                    this.init();\n                };\n\n                UDraggable.prototype = {\n                    constructor: UDraggable,\n                    init: function() {\n                        var that = this;\n                        this.disabled = false;\n                        this.started = false;\n                        this.normalisePosition();\n                        var $target = this.options.handle\n                            ? this.$el.find(this.options.handle)\n                            : this.$el;\n\n                        $target\n                            .on('utapstart.udraggable', function(e) {\n                                $(document.body).addClass('draggable');\n                            })\n                            .on('utapend.udraggable', function(e) {\n                                $(document.body).removeClass('draggable');\n                            });\n\n                        if (this.options.longPress) {\n                            $target\n                                .on('uheldstart.udraggable', function(e) {\n                                    that.start(e);\n                                })\n                                .on('uheldmove.udraggable', function(e) {\n                                    that.move(e);\n                                })\n                                .on('uheldend.udraggable', function(e) {\n                                    that.end(e);\n                                });\n                        } else {\n                            $target\n                                .on('udragstart.udraggable', function(e) {\n                                    that.start(e);\n                                })\n                                .on('udragmove.udraggable', function(e) {\n                                    that.move(e);\n                                })\n                                .on('udragend.udraggable', function(e) {\n                                    that.end(e);\n                                });\n                        }\n                    },\n                    destroy: function() {\n                        var $target = this.options.handle\n                            ? this.$el.find(this.options.handle)\n                            : this.$el;\n                        $target.off('.udraggable');\n                        this.$el.removeData('udraggable');\n                    },\n                    disable: function() {\n                        this.disabled = true;\n                    },\n                    enable: function() {\n                        this.disabled = false;\n                    },\n                    option: function() {\n                        var name;\n                        if (arguments.length === 0) {\n                            return this.options;\n                        }\n                        if (arguments.length === 2) {\n                            this.options[arguments[0]] = arguments[1];\n                            return;\n                        }\n                        if (arguments.length === 1) {\n                            if (typeof arguments[0] === 'string') {\n                                return this.options[arguments[0]];\n                            }\n                            if (typeof arguments[0] === 'object') {\n                                for (name in arguments[0]) {\n                                    if (arguments[0].hasOwnProperty(name)) {\n                                        this.options[name] = arguments[0][name];\n                                    }\n                                }\n                            }\n                        }\n                        if (this.options.containment) {\n                            this._initContainment();\n                        }\n                    },\n                    normalisePosition: function() {\n                        var pos = this.$el.position();\n                        this.$el.css({\n                            position: this.options.position,\n                            top: pos.top,\n                            left: pos.left,\n                            right: 'auto',\n                            bottom: 'auto',\n                        });\n                    },\n                    start: function(e) {\n                        if (this.disabled) {\n                            return;\n                        }\n                        var start = this.getStartPosition(this.$el);\n                        this._initContainment();\n                        this.ui = {\n                            helper: this.$el,\n                            offset: {top: start.y, left: start.x},\n                            originalPosition: {top: start.y, left: start.x},\n                            position: {top: start.y, left: start.x},\n                        };\n                        if (this.options.longPress) {\n                            this._start(e);\n                        }\n                        return this._stopPropagation(e);\n                    },\n                    move: function(e) {\n                        if (\n                            this.disabled ||\n                            (!this.started && !this._start(e))\n                        ) {\n                            return;\n                        }\n                        var delta_x = e.px_current_x - e.px_start_x;\n                        var delta_y = e.px_current_y - e.px_start_y;\n                        var axis = this.options.axis;\n                        if (axis && axis === 'x') {\n                            delta_y = 0;\n                        }\n                        if (axis && axis === 'y') {\n                            delta_x = 0;\n                        }\n                        var cur = {\n                            left: this.ui.originalPosition.left,\n                            top: this.ui.originalPosition.top,\n                        };\n                        if (!axis || axis === 'x') {\n                            cur.left += delta_x;\n                        }\n                        if (!axis || axis === 'y') {\n                            cur.top += delta_y;\n                        }\n                        this._applyGrid(cur);\n                        this._applyContainment(cur);\n                        var pos = this.ui.position;\n                        if (cur.top !== pos.top || cur.left !== pos.left) {\n                            this.ui.position.left = cur.left;\n                            this.ui.position.top = cur.top;\n                            this.ui.offset.left = cur.left;\n                            this.ui.offset.top = cur.top;\n                            if (this.options.drag) {\n                                this.options.drag.apply(this.el, [e, this.ui]);\n                            }\n                            this.queuePositionUpdate();\n                        }\n                        return this._stopPropagation(e);\n                    },\n                    end: function(e) {\n                        if (this.started || this._start(e)) {\n                            this.$el.removeClass('udraggable-dragging');\n                            this.started = false;\n                            if (this.queuedUpdate) {\n                                window.cancelAnimationFrame(this.queuedUpdate);\n                            }\n                            this.updatePositionFrameHandler();\n                            if (this.options.stop) {\n                                this.options.stop.apply(this.el, [e, this.ui]);\n                            }\n                        }\n                        return this._stopPropagation(e);\n                    },\n                    // helper methods\n\n                    _stopPropagation: function(e) {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        return false;\n                    },\n                    _start: function(e) {\n                        if (\n                            !this._mouseDistanceMet(e) ||\n                            !this._mouseDelayMet(e)\n                        ) {\n                            return;\n                        }\n                        this.started = true;\n                        this.queuePositionUpdate();\n                        if (this.options.start) {\n                            this.options.start.apply(this.el, [e, this.ui]);\n                        }\n                        this.$el.addClass('udraggable-dragging');\n                        return true;\n                    },\n                    _mouseDistanceMet: function(e) {\n                        return (\n                            max(\n                                Math.abs(e.px_start_x - e.px_current_x),\n                                Math.abs(e.px_start_y - e.px_current_y),\n                            ) >= this.options.distance\n                        );\n                    },\n                    _mouseDelayMet: function(e) {\n                        return e.ms_elapsed > this.options.delay;\n                    },\n                    _initContainment: function() {\n                        var o = this.options;\n                        var $c, ce;\n\n                        if (!o.containment) {\n                            this.containment = null;\n                            return;\n                        }\n\n                        if (o.containment.constructor === Array) {\n                            this.containment = o.containment;\n                            return;\n                        }\n\n                        if (o.containment === 'parent') {\n                            o.containment = this.$el.offsetParent();\n                        }\n\n                        $c = $(o.containment);\n                        ce = $c[0];\n                        if (!ce) {\n                            return;\n                        }\n\n                        this.containment = [\n                            0,\n                            0,\n                            $c.innerWidth() - this.$el.outerWidth(),\n                            $c.innerHeight() - this.$el.outerHeight(),\n                        ];\n                    },\n                    _applyGrid: function(cur) {\n                        if (this.options.grid) {\n                            var gx = this.options.grid[0];\n                            var gy = this.options.grid[1];\n                            cur.left = floor((cur.left + gx / 2) / gx) * gx;\n                            cur.top = floor((cur.top + gy / 2) / gy) * gy;\n                        }\n                    },\n                    _applyContainment: function(cur) {\n                        var cont = this.containment;\n                        if (cont) {\n                            cur.left = min(max(cur.left, cont[0]), cont[2]);\n                            cur.top = min(max(cur.top, cont[1]), cont[3]);\n                        }\n                    },\n                    getStartPosition: function($el) {\n                        return {\n                            x: parseInt($el.css('left'), 10) || 0,\n                            y: parseInt($el.css('top'), 10) || 0,\n                        };\n                    },\n                    positionElement: function($el, dragging, left, top) {\n                        $el.css({left: left, top: top});\n                    },\n                };\n\n                // jQuery plugin function\n\n                $.fn.udraggable = function(option) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var results = [];\n\n                    this.each(function() {\n                        var $this = $(this);\n                        var data = $this.data('udraggable');\n                        if (!data) {\n                            data = new UDraggable(this, option);\n                            $this.data('udraggable', data);\n                        }\n                        if (typeof option === 'string') {\n                            // option is a method - call it\n                            if (typeof data[option] !== 'function') {\n                                throw \"jquery.udraggable has no '\" +\n                                    option +\n                                    \"' method\";\n                            }\n                            var result = data[option].apply(data, args);\n                            if (result !== undefined) {\n                                results.push(result);\n                            }\n                        }\n                    });\n                    return results.length > 0 ? results[0] : this;\n                };\n\n                $.fn.udraggable.defaults = {\n                    axis: null,\n                    delay: 0,\n                    distance: 0,\n                    longPress: false,\n                    position: 'fixed',\n                    // callbacks\n                    drag: null,\n                    start: null,\n                    stop: function() {\n                        $(document.body).removeClass('draggable');\n                    },\n                };\n            },\n\n            init_center_position: function() {\n                $.fn.center = function(parent, scroll) {\n                    if (parent) {\n                        parent = this.parent();\n                    } else {\n                        parent = window;\n                    }\n\n                    var scroll_top = 0;\n                    var scroll_left = 0;\n\n                    if (scroll) {\n                        scroll_top = $(parent).scrollTop();\n                        scroll_left = $(parent).scrollLeft();\n                    }\n\n                    var top =\n                        ($(parent).height() - this.outerHeight()) / 2 +\n                        scroll_top;\n                    var left =\n                        ($(parent).width() - this.outerWidth()) / 2 +\n                        scroll_left;\n\n                    top = top < 0 ? 0 : top;\n                    left = left < 0 ? 0 : left;\n\n                    this.css({\n                        top: top + 'px',\n                        left: left + 'px',\n                    });\n\n                    return this;\n                };\n            },\n\n            place_close_btn: function() {\n                if (typeof config.escape === 'function') {\n                    $('<a id=\"jipt-close-btn\">')\n                        .html('&times;')\n                        .attr('href', '#')\n                        .appendTo('#jipt-modal-mask')\n                        .click(function(e) {\n                            e.preventDefault();\n                            config.escape();\n                        });\n                }\n            },\n\n            init_login_panel: function() {\n                jipt.loginDialog = $('<div>')\n                    .attr('id', 'jipt-login-panel')\n                    .html(jipt.loginDialogContent());\n\n                jipt.loginDialog.content = jipt.loginDialog.jiptDialog({\n                    modal: true,\n                    width: '400px',\n                    height: '400px',\n                    drags: true,\n                    minimize_btn: false,\n                    close_btn: false,\n                    iframe: true,\n                    custom_class: 'jipt-login-dialog',\n                    title_pane: getLoginDialogTitle(),\n                });\n\n                function getLoginDialogTitle() {\n                    return (\n                        '<div style=\"text-align: center\">' +\n                        '<div style=\"min-height: 32px\">' +\n                        '<svg class=\"crowdin-jipt-logo\" width=\"173\" height=\"32\">' +\n                        '<image xlink:href=\"' +\n                        Url.jiptCDN +\n                        '/images/crowdin-logo-small.svg\" src=\"' +\n                        Url.jiptCDN +\n                        '/images/crowdin-logo-small.png\" width=\"173\" height=\"32\" alt=\"Crowdin &mdash Localization Management Platform\" />' +\n                        '</svg>' +\n                        '</div>' +\n                        '<h3 class=\"crowdin-jipt-login-header\">Crowdin In-Context Translations</h3>' +\n                        '</div>'\n                    );\n                }\n\n                jipt.loginDialog.content\n                    .find('#crowdin-login-language-field')\n                    .change(function() {\n                        jipt.loginDialog.content\n                            .find('#crowdin-login-workflow-step-field')\n                            .html(jipt.getWorkflowStepsOptions($(this).val()));\n                    });\n\n                jipt.loginDialog.content\n                    .find('#crowdin-language-field')\n                    .change(function() {\n                        jipt.loginDialog.content\n                            .find('#crowdin-workflow-step-field')\n                            .html(jipt.getWorkflowStepsOptions($(this).val()));\n                    });\n\n                jipt.loginDialog.content\n                    .find('#crowdin-jipt-login')\n                    .click(function() {\n                        jipt._login_action();\n                        return false;\n                    });\n\n                jipt.loginDialog.content\n                    .find('#crowdin-join')\n                    .click(function() {\n                        jipt._join_action();\n                        return false;\n                    });\n\n                jipt.loginDialog.content\n                    .find('#crowdin-select-language-and-step')\n                    .click(function() {\n                        var language = jipt.loginDialog.content.find(\n                            '#crowdin-language-field option:selected',\n                        );\n                        jipt.set_current_language(\n                            language.val(),\n                            language.data('id'),\n                            language.html(),\n                        );\n\n                        var workflow_step = jipt.loginDialog.content.find(\n                            '#crowdin-workflow-step-field option:selected',\n                        );\n                        jipt.setCurrentWorkflowStep(\n                            workflow_step.val(),\n                            workflow_step.html(),\n                        );\n\n                        jipt.loginDialog.jiptDialog({action: 'close'});\n\n                        jipt.init_project();\n                        return false;\n                    });\n\n                jipt.loginDialog.content\n                    .find('.crowdin-jipt-to-login')\n                    .click(function() {\n                        jipt.show_login_panel();\n                    });\n            },\n\n            init_highlight: function() {\n                if (Storage.get('highlight') !== 'no') {\n                    jipt.translations_highlight = true;\n                    $('body').addClass('jipt-highlight');\n                } else {\n                    jipt.translations_highlight = false;\n                    $('body').removeClass('jipt-highlight');\n                }\n            },\n\n            init_preview: function() {\n                if (Storage.get('preview') !== 'no') {\n                    jipt.translations_preview = true;\n                } else {\n                    jipt.translations_preview = false;\n                }\n            },\n\n            init_filter: function() {\n                if (config.preload_texts && Storage.get('filter') !== 'yes') {\n                    jipt.translations_filter = false;\n                } else {\n                    jipt.translations_filter = true;\n                }\n            },\n\n            init_touch_optimized: function() {\n                if (\n                    config.touch_optimized &&\n                    Storage.get('touch_optimized') !== 'no'\n                ) {\n                    $('#crowdin-translation-badge').remove();\n                    jipt.touch_optimized = true;\n                } else {\n                    jipt.touch_optimized = false;\n                }\n            },\n\n            init_translation_panel: function() {\n                var timeout = null;\n\n                jipt.translationDialog = $('<div>')\n                    .attr('id', 'crowdin-translation-panel')\n                    .html(jipt.translationDialogContent());\n\n                jipt.translationDialog.content = jipt.translationDialog.jiptDialog(\n                    {\n                        width: '400px',\n                        height: '400px',\n                        drags: true,\n                        save_position: true,\n                        save_height: true,\n                        close_btn: false,\n                        iframe: true,\n                        position: 'bottom-left',\n                        custom_class: 'jipt-translations-dialog',\n                        icon: 'crowdin',\n                        minimized: jipt.minimized_translation_panel,\n                        title_pane: getTranslationDialogTitle(),\n                        buttons_pane: getTranslationDialogButtons(),\n                    },\n                );\n\n                function getTranslationDialogTitle() {\n                    return '<h4>Crowdin In-Context</h4>';\n                }\n\n                function getTranslationDialogButtons() {\n                    return jipt.translationDialogButtons();\n                }\n\n                jipt.translationDialog.jiptDialog({action: 'open'});\n\n                var targetLanguages = jipt.translationDialog.content.find(\n                    '#jipt-target-languages',\n                );\n                targetLanguages.html(jipt._get_target_languages_options());\n\n                jipt.translationDialog.content\n                    .find('#jipt-workflow-step')\n                    .html(\n                        jipt.getWorkflowStepsOptions($(targetLanguages).val()),\n                    );\n\n                jipt.load_phrases();\n\n                jipt.translationDialog.content\n                    .find('#jipt-target-languages')\n                    .change(function() {\n                        jipt.translationDialog.content\n                            .find('#jipt-workflow-step')\n                            .html(jipt.getWorkflowStepsOptions($(this).val()));\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-change-language-and-step')\n                    .click(function() {\n                        var selected = jipt.translationDialog.content\n                            .find('#jipt-target-languages')\n                            .find('option:selected');\n                        jipt.set_current_language(\n                            selected.val(),\n                            selected.data('id'),\n                            selected.html(),\n                        );\n\n                        var workflow_step = jipt.translationDialog.content\n                            .find('#jipt-workflow-step')\n                            .find('option:selected');\n                        jipt.setCurrentWorkflowStep(\n                            workflow_step.val(),\n                            workflow_step.html(),\n                        );\n\n                        window.location.reload();\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-logout')\n                    .click(function() {\n                        jipt._logout_action();\n                        return false;\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-translations-preview')\n                    .change(function() {\n                        if ($(this).prop('checked')) {\n                            Storage.save('preview', 'yes');\n                        } else {\n                            Storage.save('preview', 'no');\n                        }\n                        jipt.init_preview();\n                        jipt.set_translations_preview();\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-translations-highlight')\n                    .change(function() {\n                        if ($(this).prop('checked')) {\n                            Storage.save('highlight', 'yes');\n                        } else {\n                            Storage.save('highlight', 'no');\n                        }\n                        jipt.init_highlight();\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-translations-filter')\n                    .change(function() {\n                        if ($(this).prop('checked')) {\n                            Storage.save('filter', 'yes');\n                        } else {\n                            Storage.save('filter', 'no');\n                        }\n                        jipt.init_filter();\n                        jipt.rebuild_panel_phrases(jipt.panel_search_phrase);\n                    });\n\n                jipt.translationDialog.content\n                    .find('#jipt-touch-optimized')\n                    .change(function() {\n                        if ($(this).prop('checked')) {\n                            Storage.save('touch_optimized', 'yes');\n                        } else {\n                            Storage.save('touch_optimized', 'no');\n                        }\n                        jipt.init_touch_optimized();\n                        jipt.set_translations_preview();\n                    });\n\n                jipt.translationDialog.content.on(\n                    'click',\n                    '.jipt-phrases-to-translate li:not(.disabled) a',\n                    function() {\n                        jipt.show_editor(jipt.phrases[this.rel].data);\n                        return false;\n                    },\n                );\n\n                jipt.translationDialog.content.on(\n                    'click',\n                    '#jipt-hotkeys-settings',\n                    function() {\n                        jipt.show_settings('hotkeys');\n                        return false;\n                    },\n                );\n\n                jipt.translationDialog.content.on(\n                    'click',\n                    '#jipt-editor-settings',\n                    function() {\n                        jipt.show_settings('editor');\n                        return false;\n                    },\n                );\n\n                $('#translation_panel_tabs a').click(function() {\n                    if (!$(this).hasClass('active')) {\n                        $(this)\n                            .closest('ul')\n                            .find('a')\n                            .removeClass('active');\n                        $(this).addClass('active');\n                        jipt.translationDialog.content\n                            .find(\n                                '#translation_panel_tabs_content .jipt-tab-pane',\n                            )\n                            .hide();\n\n                        var hrefHash = $(this)\n                            .attr('href')\n                            .substring(\n                                $(this)\n                                    .attr('href')\n                                    .indexOf('#'),\n                            );\n                        jipt.translationDialog.content.find(hrefHash).show();\n                    }\n                    return false;\n                });\n\n                $('#show_translations').click(function() {\n                    if (jipt.panel_pages) {\n                        $('#translation_panel_paging_wrapper').show();\n                    }\n                    jipt.translationDialog.parent().removeClass('jipt_options');\n                });\n\n                $('#show_options').click(function() {\n                    $('#translation_panel_paging_wrapper').hide();\n                    jipt.translationDialog.parent().addClass('jipt_options');\n                });\n\n                jipt.translationDialog.content\n                    .find('#make_screenshot')\n                    .click(function() {\n                        var takeScreenshotBtn = this;\n\n                        //disable btn and hide highlights and preview before generating screenshot\n                        $(takeScreenshotBtn).attr('disabled', true);\n\n                        var translationsPreviewEnabled = false;\n                        var translationsHighlightEnabled = false;\n\n                        if (Storage.get('preview') === 'yes') {\n                            translationsPreviewEnabled = true;\n                            Storage.save('preview', 'no');\n                            jipt.init_preview();\n                            jipt.set_translations_preview();\n                        }\n\n                        if (Storage.get('highlight') === 'yes') {\n                            translationsHighlightEnabled = true;\n                            Storage.save('highlight', 'no');\n                            jipt.init_highlight();\n                        }\n\n                        jipt.translationDialog.content\n                            .find('#screenshot-status')\n                            .addClass('alert-gray')\n                            .text('Uploading...')\n                            .show();\n\n                        var devicePixelRatio = window.devicePixelRatio;\n                        var getScale = function(devicePixelRatio) {\n                            if (devicePixelRatio === 2) {\n                                return '@2x';\n                            }\n\n                            if (devicePixelRatio >= 3) {\n                                return '@3x';\n                            }\n\n                            return '';\n                        };\n\n                        __html2canvas(document.body, {\n                            allowTaint: true,\n                            scrollY: 0,\n                            scrollX: 0,\n                            proxy: Url.getFullUrl(\n                                '/api/v2/jipt/project/' +\n                                    jipt.projectId +\n                                    '/screenshots',\n                            ),\n                            height: document.body.scrollHeight,\n                            windowHeight: document.body.scrollHeight,\n                            logging: true,\n                        })\n                            .then(function(canvas) {\n                                var accumulatedDataForTags = [];\n\n                                for (var key in jipt.phrases) {\n                                    var phrase = jipt.phrases[key].data;\n\n                                    if (\n                                        !phrase.elements ||\n                                        phrase.status === 'not_found'\n                                    ) {\n                                        // Phrase is not on page or not found, skip it.\n                                        continue;\n                                    }\n\n                                    for (elementKey in phrase.elements) {\n                                        var element =\n                                            phrase.elements[elementKey];\n\n                                        var win =\n                                            element.element.ownerDocument\n                                                .defaultView;\n                                        var bbox = element.element.getBoundingClientRect();\n\n                                        var x,\n                                            y,\n                                            width,\n                                            height = 0;\n\n                                        x =\n                                            (Math.round(+bbox.x) +\n                                                win.pageXOffset) *\n                                            devicePixelRatio;\n                                        y =\n                                            (Math.round(+bbox.y) +\n                                                win.pageYOffset) *\n                                            devicePixelRatio;\n                                        width =\n                                            Math.round(+bbox.width) *\n                                            devicePixelRatio;\n                                        height =\n                                            Math.round(+bbox.height) *\n                                            devicePixelRatio;\n\n                                        // TODO: Temporary solution. ApiV2 does not allow to set coordinates greater that screenshot height or width.\n                                        // TODO: investigate sticky elements when scrolled to bottom. Now it is displayed exactly in the scrolled place. Element should be on top\n                                        if (\n                                            y + height > canvas.height ||\n                                            x + width > canvas.width\n                                        ) {\n                                            continue;\n                                        }\n\n                                        if (!x || !y || !width || !height) {\n                                            continue;\n                                        }\n                                        accumulatedDataForTags.push({\n                                            position: {\n                                                x: x,\n                                                y: y,\n                                                width: width,\n                                                height: height,\n                                            },\n                                            stringId: +element.id,\n                                        });\n                                    }\n                                }\n\n                                if (translationsHighlightEnabled) {\n                                    Storage.save('highlight', 'yes');\n                                    jipt.init_highlight();\n                                }\n\n                                if (translationsPreviewEnabled) {\n                                    Storage.save('preview', 'yes');\n                                    jipt.init_preview();\n                                    jipt.set_translations_preview();\n                                }\n\n                                var dataURL = canvas.toDataURL(\n                                    'image/jpeg',\n                                    0.5,\n                                );\n\n                                var blob = dataURItoBlob(dataURL);\n\n                                var formData = new FormData();\n                                formData.append('file', blob);\n\n                                var screenshotExtension = '.jpeg';\n                                var storageScreenshotName = document.title;\n                                if (!document.title) {\n                                    storageScreenshotName =\n                                        window.location.hostname +\n                                        window.location.pathname;\n                                }\n\n                                var notAllowedChars = /\\\\|\\/|:|\\*|\\?|\"|<|>|\\|/gi;\n                                storageScreenshotName = storageScreenshotName.replace(\n                                    notAllowedChars,\n                                    '.',\n                                );\n\n                                jipt.request(\n                                    'post',\n                                    Url.getFullUrl('/api/v2/jipt/storages'),\n                                    blob,\n                                    function(data) {\n                                        var storageId = data.data.id;\n                                        var screenshotName =\n                                            storageScreenshotName +\n                                            getScale(devicePixelRatio) +\n                                            screenshotExtension;\n\n                                        var bodyData = {\n                                            storageId: storageId,\n                                            name: screenshotName,\n                                            autoTag: false,\n                                        };\n\n                                        jipt.translationDialog.content\n                                            .find('#screenshot-status')\n                                            .html('Tagging strings...');\n\n                                        jipt.request(\n                                            'POST',\n                                            Url.getFullUrl(\n                                                '/api/v2/jipt/project/' +\n                                                    jipt.projectId +\n                                                    '/screenshots',\n                                            ),\n                                            bodyData,\n                                            function(data) {\n                                                var screenshotId = data.data.id;\n\n                                                jipt.request(\n                                                    'PUT',\n                                                    Url.getFullUrl(\n                                                        '/api/v2/jipt/project/' +\n                                                            jipt.projectId +\n                                                            '/screenshots/' +\n                                                            screenshotId +\n                                                            '/tags',\n                                                    ),\n                                                    accumulatedDataForTags.length\n                                                        ? accumulatedDataForTags\n                                                        : {autoTag: true},\n                                                    function(data) {\n                                                        jipt.translationDialog.content\n                                                            .find(\n                                                                '#screenshot-status',\n                                                            )\n                                                            .removeClass(\n                                                                'alert-gray',\n                                                            )\n                                                            .addClass(\n                                                                'alert-success',\n                                                            )\n                                                            .html(\n                                                                'Screenshot was successfully uploaded.<br> Name: <i>\"' +\n                                                                    htmlspecialchars(\n                                                                        screenshotName,\n                                                                    ) +\n                                                                    '\"</i>',\n                                                            );\n\n                                                        setTimeout(function() {\n                                                            if (\n                                                                jipt.translationDialog.content\n                                                                    .find(\n                                                                        '#screenshot-status',\n                                                                    )\n                                                                    .hasClass(\n                                                                        'alert-gray',\n                                                                    )\n                                                            ) {\n                                                                return;\n                                                            }\n\n                                                            jipt.translationDialog.content\n                                                                .find(\n                                                                    '#screenshot-status',\n                                                                )\n                                                                .fadeOut(\n                                                                    'slow',\n                                                                    function() {\n                                                                        jipt.translationDialog.content\n                                                                            .find(\n                                                                                '#screenshot-status',\n                                                                            )\n                                                                            .attr(\n                                                                                'class',\n                                                                                'screenshot-status',\n                                                                            );\n                                                                    },\n                                                                );\n                                                        }, 5000);\n                                                        $(\n                                                            takeScreenshotBtn,\n                                                        ).attr(\n                                                            'disabled',\n                                                            false,\n                                                        );\n                                                    },\n                                                    function(error) {\n                                                        errorTemplate();\n                                                    },\n                                                );\n                                            },\n                                            function(error) {\n                                                errorTemplate();\n                                            },\n                                        );\n                                    },\n                                    function(error) {\n                                        errorTemplate();\n                                    },\n                                    {\n                                        'Crowdin-API-FileName': encodeURIComponent(\n                                            storageScreenshotName +\n                                                screenshotExtension,\n                                        ),\n                                    },\n                                );\n                            })\n                            .catch(function(error) {\n                                errorTemplate();\n                            });\n\n                        function dataURItoBlob(dataURI) {\n                            // convert base64/URLEncoded data component to raw binary data held in a string\n                            var byteString;\n                            if (dataURI.split(',')[0].indexOf('base64') >= 0) {\n                                byteString = atob(dataURI.split(',')[1]);\n                            } else {\n                                byteString = unescape(dataURI.split(',')[1]);\n                            }\n\n                            // separate out the mime component\n                            var mimeString = dataURI\n                                .split(',')[0]\n                                .split(':')[1]\n                                .split(';')[0];\n\n                            // write the bytes of the string to a typed array\n                            var ia = new Uint8Array(byteString.length);\n                            for (var i = 0; i < byteString.length; i++) {\n                                ia[i] = byteString.charCodeAt(i);\n                            }\n\n                            return new Blob([ia], {type: mimeString});\n                        }\n\n                        function errorTemplate() {\n                            jipt.translationDialog.content\n                                .find('#screenshot-status')\n                                .removeClass('alert-gray')\n                                .addClass('alert-error')\n                                .text(\n                                    'Something went wrong. Please, try again or contact support',\n                                );\n\n                            $(takeScreenshotBtn).attr('disabled', false);\n                        }\n                    });\n\n                jipt.translationDialog.content\n                    .find('.jipt-search-phrase')\n                    .on('input propertychange', function() {\n                        clearTimeout(timeout);\n                        jipt.panel_search_phrase = this.value;\n\n                        var clear_btn = $(this)\n                            .parent()\n                            .find('.jipt-clear-btn');\n\n                        if (jipt.panel_search_phrase) {\n                            clear_btn.show();\n                        } else {\n                            clear_btn.hide();\n                        }\n\n                        timeout = setTimeout(function() {\n                            jipt.rebuild_panel_phrases(\n                                jipt.panel_search_phrase,\n                            );\n                        }, 300);\n                    });\n\n                $('#translation_panel_prev_page').click(function() {\n                    if (jipt.panel_page > 0) {\n                        jipt.rebuild_panel_phrases(\n                            jipt.panel_search_phrase,\n                            jipt.panel_page - 1,\n                        );\n                    }\n                    return false;\n                });\n\n                $('#translation_panel_next_page').click(function() {\n                    if (jipt.panel_page + 1 < jipt.panel_pages) {\n                        jipt.rebuild_panel_phrases(\n                            jipt.panel_search_phrase,\n                            jipt.panel_page + 1,\n                        );\n                    }\n                    return false;\n                });\n\n                jipt.translationDialog.content\n                    .find('.jipt-clear-btn')\n                    .click(function() {\n                        var input = $(this)\n                            .siblings('input[type=\"text\"]')\n                            .val('');\n                        jipt.panel_search_phrase = '';\n                        jipt.rebuild_panel_phrases();\n                        $(this).hide();\n                        input.focus();\n                        return false;\n                    });\n\n                $('#translation_panel_current_page').click(function() {\n                    $(this).val(jipt.panel_page + 1);\n                    $(this).select();\n                    return false;\n                });\n\n                $('#translation_panel_paging').submit(function() {\n                    var page = $('#translation_panel_current_page').val();\n                    jipt.rebuild_panel_phrases(\n                        jipt.panel_search_phrase,\n                        page - 1,\n                    );\n                    $('#translation_panel_current_page').blur();\n                    return false;\n                });\n            },\n\n            init_project: function() {\n                var project = get_project_identifier();\n                var language_code = Storage.get('language_code');\n                var workflowStepId =\n                    Storage.get('workflow_step_id') || undefined;\n                var language_id = Storage.get('language_id');\n                var language_name = Storage.get('language_name');\n\n                jipt.request(\n                    'GET',\n                    Url.getFullUrl('/api/v2/jipt/project/' + project),\n                    {\n                        origin:\n                            document.location.protocol +\n                            '//' +\n                            document.location.host,\n                        pathName:\n                            document.location.pathname +\n                            document.location.search,\n                        languageCode: language_code ? language_code : '',\n                        workflowStepId: workflowStepId,\n                        preloadTexts: config.preload_texts,\n                    },\n                    function(response) {\n                        config.preload_texts = JSON.parse(\n                            response.data.preloadTexts,\n                        ); // convert to boolean (\"false\" -> false)\n\n                        jipt.user.isLoggedIn = response.data.isLoggedIn;\n                        jipt.user.isLeader = response.data.isLeader;\n                        jipt.user.isManager = response.data.isManager;\n                        jipt.user.login = response.data.login;\n                        jipt.user.name = response.data.userName;\n                        jipt.user.picture = response.data.userPicture;\n                        jipt.user.workflowStepId = response.data.workflowStepId;\n                        jipt.user.redirectHash = response.data.redirectHash;\n                        jipt.workflowStepIds = response.data.workflowStepIds;\n                        jipt.source_language.code =\n                            response.data.sourceLanguageCode;\n                        jipt.target_languages = response.data.targetLanguages;\n                        jipt.workflowSteps = response.data.workflowSteps || [];\n                        jipt.projectLink = response.data.editorLink;\n                        jipt.projectId = response.data.projectId;\n                        jipt.projectModelId = response.data.projectModelId;\n                        jipt.projectName = response.data.projectName;\n                        jipt.projectURL = response.data.projectUrl;\n                        jipt.pluralsPreview = response.data.pluralsPreview;\n                        jipt.hasIcu = response.data.hasIcu;\n\n                        for (var fileFormat of Object.keys(\n                            response.data.placeholdersRegexps,\n                        )) {\n                            jipt.regexp.placeholders[fileFormat] = new RegExp(\n                                response.data.placeholdersRegexps[fileFormat],\n                                'gi',\n                            );\n                        }\n\n                        if (!response.data.isLoggedIn) {\n                            jipt.show_login_panel();\n                            return;\n                        }\n                        if (\n                            !language_code ||\n                            !language_name ||\n                            !language_id ||\n                            response.data.missedLanguage\n                        ) {\n                            jipt.show_languages_panel();\n                            return;\n                        }\n\n                        jipt.language.code = language_code;\n                        jipt.language.id = language_id;\n                        jipt.language.name = language_name;\n\n                        jipt.workflowStep.id = workflowStepId;\n\n                        jipt.init_translations();\n                    },\n                );\n            },\n\n            init_translations: function() {\n                jipt.alertFunction = window.alert;\n                window.alert = function() {\n                    return jipt.handle_browser_popups(\n                        jipt.alertFunction,\n                        this,\n                        arguments,\n                    );\n                };\n\n                jipt.confirmFunction = window.confirm;\n                window.confirm = function() {\n                    return jipt.handle_browser_popups(\n                        jipt.confirmFunction,\n                        this,\n                        arguments,\n                    );\n                };\n\n                jipt.promptFunction = window.prompt;\n                window.prompt = function() {\n                    return jipt.handle_browser_popups(\n                        jipt.promptFunction,\n                        this,\n                        arguments,\n                    );\n                };\n\n                if (jipt.hasIcu) {\n                    jipt.init_icu();\n                }\n\n                jipt.init_editor();\n                jipt.init_translation_panel();\n            },\n\n            handle_browser_popups: function(method, context, arguments) {\n                var translations = [];\n\n                for (var i = 0; i < arguments.length; i++) {\n                    arguments[i] = arguments[i].replace(\n                        jipt.regexp.globalPhrase,\n                        function(match, phrase_id, plural_id) {\n                            var phrase = jipt.phrases[phrase_id].data;\n\n                            if (phrase) {\n                                translations.push(phrase);\n                                var source_segment = jipt.get_source_segment(\n                                    phrase,\n                                    plural_id,\n                                );\n                                var new_value = jipt.phrase2preview(\n                                    phrase,\n                                    phrase.isIcu\n                                        ? jipt.get_icu_placeholders(\n                                              source_segment,\n                                              match,\n                                          )\n                                        : jipt.get_placeholders(\n                                              source_segment,\n                                              match,\n                                              phrase.fileFormat,\n                                          ),\n                                    plural_id,\n                                );\n\n                                if (config.edit_strings_context) {\n                                    jipt.update_strings_context(\n                                        phrase.id,\n                                        phrase.context,\n                                    );\n                                }\n\n                                new_value = config.before_dom_insert(new_value);\n                                if (new_value === false) {\n                                    return match;\n                                }\n\n                                return new_value;\n                            } else {\n                                jipt._load_phrases_delayed(\n                                    match,\n                                    function() {},\n                                );\n                                return match;\n                            }\n                        },\n                    );\n                }\n\n                var result = method.apply(context, arguments);\n\n                if (translations.length > 0) {\n                    jipt.show_editor(translations[0]);\n                }\n\n                return result;\n            },\n\n            init_dom_mutation_handler: function() {\n                var MutationObserver =\n                    window.MutationObserver ||\n                    window.WebKitMutationObserver ||\n                    window.MozMutationObserver;\n\n                if (MutationObserver) {\n                    var observer = new MutationObserver(function(mutations) {\n                        mutations.forEach(function(mutation) {\n                            jipt.handle_dom_mutation(mutation);\n                        });\n                    });\n\n                    observer.observe(document.body, {\n                        attributes: true,\n                        childList: true,\n                        characterData: true,\n                        subtree: true,\n                        characterDataOldValue: true,\n                        attributeOldValue: true,\n                    });\n                }\n            },\n\n            handle_dom_mutation: function(mutation) {\n                if (mutation.type === 'childList') {\n                    for (var i = 0; i < mutation.addedNodes.length; i++) {\n                        jipt.crowdin_each_element(mutation.addedNodes[i]);\n                    }\n\n                    if (\n                        mutation.removedNodes.length &&\n                        jipt.translations_filter\n                    ) {\n                        jipt.remove_phrases_not_on_page();\n                    }\n                }\n\n                if (mutation.type === 'characterData') {\n                    if (mutation.target.nodeType === 3) {\n                        jipt.match_element_text(\n                            mutation.target,\n                            mutation.target.parentNode,\n                        );\n                    }\n                }\n\n                if (jipt.check_if_jipt_class_was_removed(mutation)) {\n                    var matches = mutation.oldValue.match(\n                        /crowdin_jipt_[^\\s-]+/,\n                    );\n                    if (matches[0]) {\n                        $(mutation.target).addClass(matches[0]);\n                    }\n                }\n\n                if (mutation.type === 'attributes') {\n                    jipt.match_element_attributes(mutation.target);\n                }\n            },\n\n            check_if_jipt_class_was_removed: function(mutation) {\n                return (\n                    mutation.type === 'attributes' &&\n                    mutation.attributeName === 'class' &&\n                    typeof mutation.target.className.indexOf === 'function' &&\n                    mutation.target.className.indexOf('crowdin_jipt_') === -1 &&\n                    mutation.oldValue &&\n                    mutation.oldValue.indexOf('crowdin_jipt_') !== -1\n                );\n            },\n\n            remove_phrases_not_on_page: function() {\n                for (var i in jipt.phrases) {\n                    var p = jipt.phrases[i].data;\n\n                    if (p.elements) {\n                        for (var el = 0; el < p.elements.length; el++) {\n                            if (\n                                !$(document.body).find(p.elements[el].element)\n                                    .length\n                            ) {\n                                p.elements.splice(el, 1);\n\n                                if (!p.elements.length) {\n                                    delete p.elements;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n\n                jipt.delayed_rebuild_panel_phrases();\n            },\n\n            findTextsDOM: function() {\n                for (var name in self.status) {\n                    $('.crowdin_jipt_' + this.status[name]).removeClass(\n                        'crowdin_jipt_' + this.status[name],\n                    );\n                }\n\n                var phrases_ids = jipt.get_phrases_from_text(\n                    document.documentElement.innerHTML,\n                );\n\n                // if no old placeholders found - search for new placeholders\n                if ($.isEmptyObject(phrases_ids)) {\n                    $.extend(jipt.regexp, jipt.regexp_new);\n                    phrases_ids = jipt.get_phrases_from_text(\n                        document.documentElement.innerHTML,\n                    );\n                }\n\n                return phrases_ids;\n            },\n\n            load_phrases: function() {\n                var phrases_ids = this.findTextsDOM();\n                var self = this;\n\n                if ($.isEmptyObject(phrases_ids)) {\n                    setTimeout(function() {\n                        var _phrases_ids = self.findTextsDOM();\n\n                        if (\n                            jipt.user.isManager &&\n                            $.isEmptyObject(_phrases_ids) &&\n                            Storage.get('no_phrases_warning_disabled') !== 'yes'\n                        ) {\n                            self._show_no_texts_warning();\n                        }\n                    }, 5000);\n                }\n\n                jipt._load_phrases(phrases_ids, [\n                    function() {\n                        if (document.getElementsByTagName('title').length) {\n                            jipt.handle_document_title(\n                                document.getElementsByTagName('title')[0],\n                            );\n                        }\n\n                        jipt.crowdin_each_element(document.body);\n                        jipt.init_dom_mutation_handler();\n\n                        unmaskDocument();\n                    },\n                ]);\n            },\n\n            init_editor: function() {\n                var editor_height = 650;\n                var client_height = document.documentElement.clientHeight;\n\n                editor_height =\n                    editor_height + 110 > client_height\n                        ? client_height - 110\n                        : editor_height;\n\n                jipt.editorDialog = $('<div id=\"crowdin-editor\">');\n\n                jipt.editorDialog.jiptDialog({\n                    width: '550px',\n                    height: editor_height + 'px',\n                    save_position: true,\n                    modal: false,\n                    drags: true,\n                    resize: true,\n                    icon: 'crowdin',\n                    custom_class: 'jipt-editor-dialog',\n                    close_callback: function() {\n                        EditorDialogClose();\n                    },\n                    title_pane: getEditorDialogTitle(),\n                    buttons_pane: getEditorDialogButtons(),\n                });\n\n                function getEditorDialogTitle() {\n                    return '<h4>Translating to ' + jipt.language.name + '</h4>';\n                }\n\n                function getEditorDialogButtons() {\n                    return (\n                        '<div class=\"jipt-dialog-buttons-wrapper\">' +\n                        '<abbr id=\"jipt-preview-available-msg\" title=\"Preview is not available since plural forms of source and target languages do not match\">No preview available</abbr>' +\n                        '</div>'\n                    );\n                }\n\n                jipt.editorDialog.append(\n                    '<iframe frameBorder=\"0\" id=\"crowdin-editor-iframe\"></iframe>',\n                );\n\n                jipt.editorDialogIframe = $('iframe#crowdin-editor-iframe');\n                jipt.editorDialogIframe.css({\n                    width: '100%',\n                    display: 'block',\n                    overflow: 'hidden',\n                    height: editor_height + 'px',\n                });\n\n                jipt.editorDialogIframe.attr('src', jipt.projectLink);\n\n                function EditorDialogClose() {\n                    jipt.place_translation_preview();\n                    $('.jipt-selected').removeClass('jipt-selected');\n                }\n            },\n\n            send_post_message: function(message) {\n                message = JSON.stringify(message);\n\n                if (jipt.editorDialogIframe.length) {\n                    jipt.editorDialogIframe\n                        .get(0)\n                        .contentWindow.postMessage(message, jipt.projectLink);\n                }\n            },\n\n            init_editor_listener: function() {\n                window.onmessage = function(event) {\n                    event = event || window.event;\n\n                    if (event.origin !== Url.getEntryPoint()) {\n                        return;\n                    }\n\n                    var message =\n                        typeof event.data === 'object'\n                            ? event.data\n                            : JSON.parse(event.data);\n\n                    switch (message.msg_type) {\n                        case 'edit_translation':\n                            if (jipt.editor.currentTranslation) {\n                                if (\n                                    jipt.translations_preview !== false &&\n                                    jipt.editorDialog.jiptDialog({\n                                        action: 'is_visible',\n                                    })\n                                ) {\n                                    if (message.value.length > 0) {\n                                        jipt.place_translation_preview(\n                                            +message.translation_id,\n                                            message.value,\n                                            message.plural_id,\n                                        );\n                                    } else {\n                                        jipt.place_translation_preview();\n                                    }\n                                }\n                            }\n                            break;\n\n                        case 'update_phrase':\n                        case 'update_translation':\n                            var currentTranslation =\n                                jipt.editor.currentTranslation;\n                            jipt.editor.currentTranslation =\n                                jipt.phrases[message.translation_id].data;\n\n                            if ('top_suggestion' in message) {\n                                var plural_id =\n                                    message.plural_id >= 0\n                                        ? message.plural_id\n                                        : 0;\n\n                                jipt.editor.currentTranslation.translation[\n                                    plural_id\n                                ] = message.top_suggestion;\n                                jipt.editor.currentTranslation.status =\n                                    message.translation_status;\n\n                                jipt.place_translation_preview();\n                            } else {\n                                // update translation\n                                jipt.editor.currentTranslation.hidden =\n                                    message.translation.hidden;\n                            }\n\n                            jipt.update_phrase_dom_highlight();\n                            jipt.update_phrase_highlight();\n\n                            jipt.editor.currentTranslation = currentTranslation;\n                            break;\n\n                        case 'next_translation':\n                            if (jipt.editor.currentTranslation) {\n                                jipt.place_translation_preview();\n                                jipt.show_next_element(\n                                    jipt.editor.currentTranslation\n                                        .active_element,\n                                );\n                            }\n                            break;\n\n                        case 'prev_translation':\n                            if (jipt.editor.currentTranslation) {\n                                jipt.place_translation_preview();\n                                jipt.show_prev_element(\n                                    jipt.editor.currentTranslation\n                                        .active_element,\n                                );\n                            }\n                            break;\n\n                        case 'success':\n                            jipt.editor_loaded = true;\n                            jipt.setup_jipt_validation();\n\n                            if (jipt.editor.currentTranslation) {\n                                jipt.show_editor(\n                                    jipt.editor.currentTranslation,\n                                    jipt.editor.currentTranslation\n                                        .active_element,\n                                );\n                            }\n\n                            break;\n\n                        case 'close_editor':\n                            jipt.editorDialog.jiptDialog({action: 'close'});\n                            break;\n\n                        case 'focus':\n                            jipt.editorDialog.jiptDialog({\n                                action: 'move_to_front',\n                            });\n                            break;\n\n                        case 'before_commit':\n                            jipt.handle_before_commit_request(\n                                message.request_id,\n                                message.data,\n                            );\n                            break;\n\n                        case 'save_suggestions':\n                            jipt.handle_save_suggestions(message.data);\n                            break;\n\n                        case 'editor_settings':\n                            jipt.editor_settings();\n                            break;\n\n                        case 'close_editor_settings':\n                            jipt.open_editor_settings = false;\n                            jipt.close_editor_dialog();\n                            break;\n\n                        case 'hotkeys_settings':\n                            jipt.hotkeys_settings();\n                            break;\n\n                        case 'close_hotkeys_settings':\n                            jipt.open_hotkeys_settings = false;\n                            jipt.close_editor_dialog();\n                            break;\n\n                        case 'logged_out':\n                            window.location.reload();\n                            break;\n\n                        default:\n                            return;\n                    }\n                };\n            },\n\n            close_editor_dialog: function() {\n                $('.jipt-dialog-title h4', '.jipt-editor-dialog').text(\n                    'Translating to ' + jipt.language.name,\n                );\n\n                if (\n                    !jipt.editor.currentTranslation &&\n                    !jipt.open_editor_settings &&\n                    !jipt.open_hotkeys_settings\n                ) {\n                    jipt.editorDialog.jiptDialog({action: 'close'});\n                }\n            },\n\n            setup_jipt_validation: function() {\n                var message = {\n                    msg_type: 'setup_jipt_validation',\n                    validation_enabled: config.before_commit !== null,\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            handle_before_commit_request: function(request_id, data) {\n                var result = config.before_commit(\n                    data.source,\n                    data.translation,\n                    data.context,\n                    data.language,\n                );\n\n                var message = {\n                    msg_type: 'before_commit_result',\n                    request_id: request_id,\n                    result: result,\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            handle_save_suggestions: function(data) {\n                if (!this.callbacks.save_suggestions) {\n                    return false;\n                }\n\n                if (typeof this.callbacks.save_suggestions == 'function') {\n                    this.callbacks.save_suggestions(data);\n                }\n            },\n\n            set_draft_suggestion: function(translation_id, text) {\n                var message = {\n                    msg_type: 'set_draft_suggestion',\n                    translation_id: translation_id,\n                    text: text,\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            save_suggestions: function(suggestions, force_saving, callback) {\n                this.callbacks.save_suggestions = callback;\n\n                var message = {\n                    msg_type: 'save_suggestions',\n                    suggestions: suggestions,\n                    force_saving: force_saving,\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            editor_settings: function() {\n                jipt.open_editor_settings = true;\n\n                var message = {\n                    msg_type: 'editor_settings',\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            hotkeys_settings: function() {\n                jipt.open_hotkeys_settings = true;\n\n                var message = {\n                    msg_type: 'hotkeys_settings',\n                };\n\n                jipt.send_post_message(message);\n            },\n            // do not specify parameters to reset preview\n            place_translation_preview: function(id, value, plural_id) {\n                jipt.translation_preview.id = id;\n                jipt.translation_preview.value = value;\n                jipt.translation_preview.plural_id =\n                    plural_id >= 0 ? plural_id : 0;\n\n                if (!jipt.editor.currentTranslation) return;\n\n                var elements = jipt.editor.currentTranslation.elements;\n                var newValue;\n\n                if (!elements) {\n                    return;\n                }\n\n                for (var i = 0; i < elements.length; i++) {\n                    newValue = jipt.phrase2preview(\n                        jipt.phrases[elements[i].id].data,\n                        elements[i].placeholders,\n                        elements[i].plural_id,\n                    );\n\n                    if (elements[i].attr !== false) {\n                        newValue = config.before_dom_insert(\n                            newValue,\n                            elements[i].element,\n                            elements[i].attr,\n                        );\n                    } else {\n                        newValue = config.before_dom_insert(\n                            newValue,\n                            elements[i].element,\n                        );\n                    }\n\n                    if (newValue === false) {\n                        continue;\n                    }\n\n                    if (elements[i].attr !== false) {\n                        elements[i].element.setAttribute(\n                            elements[i].attr,\n                            newValue,\n                        );\n                        if (config.touch_optimized && !jipt.touch_optimized) {\n                            jipt.hide_translation_badge(elements[i].element);\n                        }\n                    } else {\n                        // innerHTML is undefined in svg node\n                        if (elements[i].element.innerHTML !== undefined) {\n                            elements[i].element.innerHTML = newValue;\n                        } else {\n                            elements[i].element.textContent = newValue;\n                        }\n                    }\n\n                    if (jipt.touch_optimized) {\n                        jipt.show_translation_badge(elements[i].element);\n                    }\n                }\n            },\n\n            set_translations_preview: function() {\n                var currentTranslation = jipt.editor.currentTranslation;\n\n                for (var i in jipt.phrases) {\n                    jipt.editor.currentTranslation = jipt.phrases[i].data;\n                    jipt.place_translation_preview();\n                }\n\n                jipt.editor.currentTranslation = currentTranslation;\n            },\n\n            crowdin_each_element: function(element) {\n                if (\n                    element.id === 'crowdin-translation-panel' ||\n                    element.id === 'crowdin-editor'\n                ) {\n                    return;\n                }\n\n                jipt.match_element_attributes(element);\n\n                if (element.hasChildNodes()) {\n                    for (var i = 0; i < element.childNodes.length; i++) {\n                        jipt.crowdin_each_element(element.childNodes[i]);\n                        jipt.match_element_attributes(element.childNodes[i]);\n                    }\n                }\n\n                if (\n                    element &&\n                    element.nodeType === 3 &&\n                    element.nodeValue.length\n                ) {\n                    var startMatch = element.nodeValue.match(\n                        jipt.regexp.startPhrase,\n                    );\n\n                    if (startMatch) {\n                        if (\n                            element.nodeValue\n                                .toLowerCase()\n                                .indexOf(\n                                    jipt.regexp.endPart(\n                                        startMatch[1],\n                                        startMatch[2],\n                                    ),\n                                ) > -1\n                        ) {\n                            jipt.match_element_text(\n                                element,\n                                element.parentNode,\n                            );\n                        } else {\n                            jipt.match_element_html(\n                                element,\n                                startMatch[1],\n                                startMatch[2],\n                            );\n                        }\n                    }\n                }\n            },\n\n            match_element_text: function(textNode, parentNode) {\n                if (\n                    !parentNode ||\n                    parentNode.nodeName === 'SCRIPT' ||\n                    !textNode.parentNode\n                )\n                    return; // is this need?\n\n                var exactMatch = textNode.nodeValue.match(\n                    jipt.regexp.exactPhrase,\n                );\n                var siblingsCount = textNode.parentNode.childNodes.length;\n\n                if (exactMatch && siblingsCount === 1) {\n                    if (jipt.phrases[exactMatch[1]]) {\n                        jipt.handle_element(\n                            textNode.parentNode,\n                            jipt.phrases[exactMatch[1]].data,\n                            exactMatch[2],\n                        );\n                    } else {\n                        jipt._load_phrases_delayed(\n                            textNode.nodeValue,\n                            function() {\n                                jipt.match_element_text(textNode, parentNode);\n                            },\n                        );\n                    }\n                } else {\n                    var replace = textNode.nodeValue.replace(\n                        jipt.regexp.globalPhrase,\n                        '<span class=\"crowdin_phrase\">$&</span>',\n                    );\n\n                    if (replace !== textNode.nodeValue) {\n                        $(textNode).replaceWith(replace);\n\n                        for (var i = 0; i < parentNode.childNodes.length; i++) {\n                            var crowdinPhrase = parentNode.childNodes[i];\n\n                            if (\n                                crowdinPhrase.className === 'crowdin_phrase' &&\n                                crowdinPhrase.firstChild.nodeType === 3\n                            ) {\n                                jipt.match_element_text(\n                                    crowdinPhrase.firstChild,\n                                    crowdinPhrase,\n                                );\n                            }\n                        }\n                    }\n                }\n            },\n\n            match_element_html: function(textNode, id, plural_id) {\n                if (!textNode.parentNode) return;\n\n                var exactMatch = textNode.parentNode.innerHTML.match(\n                    jipt.regexp.exactPhrase,\n                );\n\n                if (exactMatch) {\n                    if (jipt.phrases[exactMatch[1]]) {\n                        jipt.handle_element(\n                            textNode.parentNode,\n                            jipt.phrases[exactMatch[1]].data,\n                            exactMatch[2],\n                        );\n                    } else {\n                        jipt._load_phrases_delayed(\n                            textNode.parentNode.innerHTML,\n                            function() {\n                                jipt.match_element_html(\n                                    textNode,\n                                    id,\n                                    plural_id,\n                                );\n                            },\n                        );\n                    }\n                } else {\n                    var currentNode = textNode;\n                    var nodes = [];\n                    var html = '';\n                    var is_tags_broken = true;\n\n                    do {\n                        nodes.push(currentNode);\n                        html += currentNode.nodeValue\n                            ? htmlspecialchars(currentNode.nodeValue)\n                            : currentNode.outerHTML;\n\n                        if (\n                            currentNode.nodeType === 3 &&\n                            currentNode.nodeValue\n                                .toLowerCase()\n                                .indexOf(jipt.regexp.endPart(id, plural_id)) >\n                                -1\n                        ) {\n                            is_tags_broken = false;\n                            break;\n                        } else {\n                            currentNode = currentNode.nextSibling;\n                        }\n                    } while (currentNode);\n\n                    if (is_tags_broken) {\n                        return;\n                    }\n\n                    html = html.replace(\n                        jipt.regexp.globalPhrase,\n                        '<span class=\"crowdin_phrase\">$&</span>',\n                    );\n                    var parentNode = textNode.parentNode;\n\n                    $(nodes[0]).before(html);\n\n                    for (var i = 0; i < nodes.length; i++) {\n                        parentNode.removeChild(nodes[i]);\n                    }\n\n                    for (var i = 0; i < parentNode.childNodes.length; i++) {\n                        var crowdinPhrase = parentNode.childNodes[i];\n\n                        if (\n                            crowdinPhrase.className === 'crowdin_phrase' &&\n                            crowdinPhrase.firstChild.nodeType === 3\n                        ) {\n                            jipt.crowdin_each_element(crowdinPhrase);\n                        }\n                    }\n                }\n            },\n\n            match_element_attributes: function(element) {\n                var attribute, new_value, i;\n                var jq_element = $(element);\n\n                if (element && element.attributes) {\n                    if (element.value && !element.getAttribute('value')) {\n                        element.setAttribute('value', element.value);\n                    }\n\n                    for (i = 0; i < element.attributes.length; i++) {\n                        attribute = element.attributes.item(i);\n\n                        new_value = attribute.nodeValue.replace(\n                            jipt.regexp.globalPhrase,\n                            function(match, phraseId, pluralId) {\n                                var phrase = jipt.phrases[phraseId];\n\n                                if (phrase) {\n                                    jipt.translatable_placeholders = [];\n\n                                    var source_segment = jipt.get_source_segment(\n                                        phrase.data,\n                                        pluralId,\n                                    );\n                                    var placeholders = phrase.data.isIcu\n                                        ? jipt.get_icu_placeholders(\n                                              source_segment,\n                                              match,\n                                          )\n                                        : jipt.get_placeholders(\n                                              source_segment,\n                                              match,\n                                              phrase.fileFormat,\n                                          );\n                                    var result = jipt.phrase2preview(\n                                        phrase.data,\n                                        placeholders,\n                                        pluralId,\n                                    );\n\n                                    // store element only if exact match\n                                    if (\n                                        attribute.nodeValue.length ===\n                                        match.length\n                                    ) {\n                                        if (!phrase.data.elements) {\n                                            phrase.data.elements = [];\n                                            jipt.delayed_rebuild_panel_phrases();\n                                        }\n\n                                        var element_data = {\n                                            id: phrase.data.id,\n                                            element: element,\n                                            placeholders: placeholders,\n                                            attr: attribute.nodeName,\n                                            plural_id: pluralId,\n                                        };\n\n                                        jipt.addPhraseToElement(\n                                            jq_element,\n                                            element_data,\n                                        );\n                                        phrase.data.elements.push(element_data);\n\n                                        for (\n                                            var i = 0;\n                                            i <\n                                            jipt.translatable_placeholders\n                                                .length;\n                                            i++\n                                        ) {\n                                            var translatable_item =\n                                                jipt.translatable_placeholders[\n                                                    i\n                                                ];\n\n                                            if (config.edit_strings_context) {\n                                                jipt.update_strings_context(\n                                                    translatable_item.phrase.id,\n                                                    translatable_item.phrase\n                                                        .context,\n                                                );\n                                            }\n\n                                            if (\n                                                !translatable_item.phrase\n                                                    .elements\n                                            ) {\n                                                translatable_item.phrase.elements = [];\n                                                jipt.delayed_rebuild_panel_phrases();\n                                            }\n\n                                            jipt.addPhraseToElement(\n                                                jq_element,\n                                                {\n                                                    id:\n                                                        translatable_item.phrase\n                                                            .id,\n                                                    placeholders:\n                                                        translatable_item.placeholders,\n                                                    attr: element_data.attr,\n                                                    plural_id:\n                                                        translatable_item.plural_id,\n                                                },\n                                            );\n\n                                            translatable_item.phrase.elements.push(\n                                                element_data,\n                                            );\n                                        }\n\n                                        jq_element.addClass(\n                                            jipt.element_classname(jq_element),\n                                        );\n\n                                        jq_element.mouseenter(function() {\n                                            jipt.hover_show_translation_badge(\n                                                element,\n                                            );\n                                        });\n\n                                        if (jipt.touch_optimized) {\n                                            jipt.show_translation_badge(\n                                                element,\n                                            );\n                                        }\n                                    }\n\n                                    if (config.edit_strings_context) {\n                                        jipt.update_strings_context(\n                                            phrase.data.id,\n                                            phrase.data.context,\n                                        );\n                                    }\n\n                                    return result;\n                                } else {\n                                    jipt._load_phrases_delayed(\n                                        match,\n                                        function() {\n                                            jipt.match_element_attributes(\n                                                element,\n                                            );\n                                        },\n                                    );\n                                    return match;\n                                }\n                            },\n                        );\n\n                        if (attribute.nodeValue !== new_value) {\n                            new_value = config.before_dom_insert(\n                                new_value,\n                                element,\n                                attribute.nodeName,\n                            );\n\n                            if (new_value !== false) {\n                                attribute.nodeValue = new_value;\n\n                                if (attribute.name === 'value') {\n                                    element.value = new_value;\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n\n            // source and target plurals is equal\n            get_translation_segment: function(phrase, plural_id) {\n                plural_id = parseInt(plural_id);\n                plural_id = plural_id ? plural_id : 0;\n\n                if (phrase.translation[plural_id] !== undefined) {\n                    return phrase.translation[plural_id];\n                } else {\n                    return phrase.translation[0];\n                }\n            },\n\n            get_source_segment: function(phrase, plural_id) {\n                plural_id = parseInt(plural_id);\n                plural_id = plural_id ? plural_id : 0;\n\n                if (phrase.text[plural_id] !== undefined) {\n                    return phrase.text[plural_id];\n                } else {\n                    return phrase.text[0];\n                }\n            },\n\n            get_placeholders: function(\n                source_segment,\n                jipt_segment,\n                file_format,\n            ) {\n                var keys = [];\n                var values = [];\n                var regexpPlaceholders =\n                    jipt.regexp.placeholders[file_format] ||\n                    jipt.regexp.placeholders['default'];\n                var matchedKeys = source_segment.match(regexpPlaceholders);\n                var matchedValues = jipt_segment.match(jipt.regexp.exactPhrase);\n\n                if (matchedValues && matchedValues[3]) {\n                    var delimiter = jipt.regexp.delimiterPart(\n                        matchedValues[1],\n                        matchedValues[2],\n                    );\n\n                    if (\n                        matchedValues[3].toLowerCase().indexOf(delimiter) >= 0\n                    ) {\n                        values = jipt.split(matchedValues[3], delimiter);\n                    } else {\n                        values = [matchedValues[3]];\n                    }\n                }\n\n                if (matchedKeys !== null) {\n                    keys = matchedKeys;\n                }\n\n                return [keys, values];\n            },\n\n            get_icu_placeholders: function(source_segment, jipt_segment) {\n                var keys = [];\n                var values = [];\n                var matched;\n\n                var matchedValues = jipt_segment.match(jipt.regexp.exactPhrase);\n                if (matchedValues && matchedValues[3]) {\n                    var delimiter = jipt.regexp.delimiterPart(\n                        matchedValues[1],\n                        matchedValues[2],\n                    );\n\n                    if (\n                        matchedValues[3].toLowerCase().indexOf(delimiter) >= 0\n                    ) {\n                        matched = jipt.split(matchedValues[3], delimiter);\n                    } else {\n                        matched = [matchedValues[3]];\n                    }\n                }\n\n                for (var i = 0; i < matched.length; i++) {\n                    var result_split = matched[i].split('=');\n                    keys.push(result_split.shift());\n                    values.push(result_split.join('='));\n                }\n\n                return [keys, values];\n            },\n\n            // this is ugly hack for HTML title preview. Sorry about that\n            handle_document_title: function(title) {\n                if (!title.firstChild) {\n                    // disable this in ie8 and earlier\n                    return;\n                }\n\n                title.innerHTML = jipt.regexp.wrapText(title.innerHTML);\n\n                jipt.phrases['0'] = {\n                    data: {\n                        id: '0',\n                        text: ['%s'],\n                        translation: [''],\n                        hidden: '0',\n                        status: 'translated',\n                    },\n                };\n\n                jipt.match_element_text(title.firstChild, title);\n            },\n\n            is_editor_element: function(jq_element) {\n                return '#crowdin-editor' === jq_element.data('id');\n            },\n\n            handle_element: function(element, phrase, plural_id) {\n                var newValue;\n                var currentValue;\n                var placeholderValues;\n                var jq_element = $(element);\n                var source_segment = jipt.get_source_segment(phrase, plural_id);\n\n                this.translatable_placeholders = [];\n\n                // innerHTML is undefined for svg nodes\n                currentValue =\n                    element.innerHTML !== undefined\n                        ? element.innerHTML\n                        : element.textContent;\n                placeholderValues = phrase.isIcu\n                    ? jipt.get_icu_placeholders(source_segment, currentValue)\n                    : jipt.get_placeholders(\n                          source_segment,\n                          currentValue,\n                          phrase.fileFormat,\n                      );\n\n                newValue = jipt.phrase2preview(\n                    phrase,\n                    placeholderValues,\n                    plural_id,\n                );\n\n                if (config.edit_strings_context) {\n                    jipt.update_strings_context(phrase.id, phrase.context);\n                }\n\n                newValue = config.before_dom_insert(newValue, element);\n\n                if (newValue !== false) {\n                    if (element.innerHTML !== undefined) {\n                        element.innerHTML = newValue;\n                    } else {\n                        element.textContent = newValue;\n                    }\n                }\n\n                var element_data = {\n                    id: phrase.id, // refference to phrase (used for translatable placeholders)\n                    element: element,\n                    placeholders: placeholderValues,\n                    attr: false,\n                    plural_id: plural_id,\n                };\n\n                if (!phrase.elements) {\n                    phrase.elements = [];\n                    jipt.delayed_rebuild_panel_phrases();\n                }\n\n                jipt.addPhraseToElement(jq_element, element_data);\n                phrase.elements.push(element_data);\n\n                for (\n                    var i = 0;\n                    i < this.translatable_placeholders.length;\n                    i++\n                ) {\n                    if (!this.translatable_placeholders[i].phrase.elements) {\n                        this.translatable_placeholders[i].phrase.elements = [];\n                        jipt.delayed_rebuild_panel_phrases();\n                    }\n\n                    if (config.edit_strings_context) {\n                        jipt.update_strings_context(\n                            this.translatable_placeholders[i].phrase.id,\n                            this.translatable_placeholders[i].phrase.context,\n                        );\n                    }\n\n                    jipt.addPhraseToElement(jq_element, {\n                        id: this.translatable_placeholders[i].phrase.id,\n                        placeholders: this.translatable_placeholders[i]\n                            .placeholders,\n                        attr: element_data.attr,\n                        plural_id: this.translatable_placeholders[i].plural_id,\n                    });\n\n                    this.translatable_placeholders[i].phrase.elements.push(\n                        element_data,\n                    );\n                }\n\n                if (!jipt.is_editor_element(jq_element)) {\n                    jq_element.addClass(jipt.element_classname(jq_element));\n                }\n\n                if (\n                    jq_element.is('option') ||\n                    jq_element.parent().is('option')\n                ) {\n                    var select_element = jq_element.closest('select');\n\n                    if (select_element) {\n                        select_element.addClass(\n                            jipt.element_classname(select_element),\n                        );\n                        element = select_element.get(0);\n                    }\n                }\n\n                if (\n                    jipt.editor.currentTranslation &&\n                    jipt.editor.currentTranslation.id === +phrase.id\n                ) {\n                    jipt.editor.currentTranslation = phrase;\n                    jipt.update_active_phrase_highlight(); // add selected class if loaded phrase already in editor\n                }\n\n                $(element)\n                    .off('mouseenter')\n                    .mouseenter(function() {\n                        jipt.hover_show_translation_badge(element);\n                    });\n\n                if (jipt.touch_optimized && !$(element).is('select')) {\n                    jipt.show_translation_badge(element);\n                }\n            },\n\n            phrase2preview: function(phrase, placeholders, plural_id) {\n                var translation = jipt.get_translation_segment(\n                    phrase,\n                    plural_id,\n                );\n                var preview_enabled =\n                    jipt.pluralsPreview || phrase.text.length === 1;\n\n                var translation_preview = '';\n                if (\n                    this.translation_preview.id === phrase.id &&\n                    +this.translation_preview.plural_id === +plural_id\n                ) {\n                    translation_preview = this.translation_preview.value;\n                }\n\n                if (\n                    preview_enabled &&\n                    jipt.translations_preview === true &&\n                    translation_preview.length\n                ) {\n                    return phrase.isIcu\n                        ? jipt.replace_placeholders_icu(\n                              translation_preview,\n                              placeholders,\n                          )\n                        : jipt.replace_placeholders(\n                              translation_preview,\n                              placeholders,\n                              phrase.fileFormat,\n                          );\n                }\n\n                if (\n                    preview_enabled &&\n                    jipt.translations_preview === true &&\n                    translation.length\n                ) {\n                    return phrase.isIcu\n                        ? jipt.replace_placeholders_icu(\n                              translation,\n                              placeholders,\n                          )\n                        : jipt.replace_placeholders(\n                              translation,\n                              placeholders,\n                              phrase.fileFormat,\n                          );\n                }\n\n                var content = jipt.get_source_segment(phrase, plural_id);\n\n                return phrase.isIcu\n                    ? jipt.replace_placeholders_icu(content, placeholders)\n                    : jipt.replace_placeholders(\n                          content,\n                          placeholders,\n                          phrase.fileFormat,\n                      );\n            },\n\n            replace_placeholders_icu: function(text, stored_placeholders) {\n                // no need to change stored placeholders\n                var keys = stored_placeholders[0].slice(0);\n                var values = stored_placeholders[1].slice(0);\n                for (var i = 0; i < values.length; i++) {\n                    values[i] = values[i].replace(\n                        jipt.regexp.globalPhrase,\n                        function(match, phrase_id, plural_id) {\n                            var phrase = jipt.phrases[phrase_id];\n\n                            if (phrase) {\n                                var source_segment = jipt.get_source_segment(\n                                    phrase.data,\n                                    plural_id,\n                                );\n                                var placeholders = phrase.data.isIcu\n                                    ? jipt.get_icu_placeholders(\n                                          source_segment,\n                                          match,\n                                      )\n                                    : jipt.get_placeholders(\n                                          source_segment,\n                                          match,\n                                          phrase.fileFormat,\n                                      );\n\n                                jipt.translatable_placeholders.push({\n                                    phrase: phrase.data,\n                                    placeholders: placeholders,\n                                    plural_id: plural_id,\n                                });\n\n                                return jipt.phrase2preview(\n                                    phrase.data,\n                                    placeholders,\n                                    plural_id,\n                                );\n                            } else {\n                                return match;\n                            }\n                        },\n                    );\n                }\n\n                var obj = {};\n                var icu_parser = new MessageFormatLight(jipt.language.code);\n                for (var i = 0; i < keys.length; i++) {\n                    obj[keys[i]] = values[i];\n                }\n\n                text = icu_parser.compiler(text, obj);\n                if (!text) {\n                    return jipt.insert_source_text_in_dom();\n                }\n\n                return jipt.sanitizing_text(text);\n            },\n\n            insert_source_text_in_dom: function() {\n                var text;\n                var current_translation = jipt.editor.currentTranslation;\n\n                if (current_translation.isIcu) {\n                    var placeholders =\n                        current_translation.elements[0].placeholders;\n                    var obj = {};\n                    var icu_parser = new MessageFormatLight(jipt.language.code);\n                    for (var i = 0; i < placeholders[0].length; i++) {\n                        obj[placeholders[0][i]] = placeholders[1][i];\n                    }\n\n                    text = icu_parser.compiler(\n                        current_translation.text[0],\n                        obj,\n                    );\n                } else {\n                    text = jipt.get_source_segment(\n                        current_translation,\n                        current_translation.elements[0].plural_id,\n                    );\n                }\n\n                return jipt.sanitizing_text(text);\n            },\n\n            sanitizing_text: function(text) {\n                text = sanitizer.tags(text, [\n                    'meta',\n                    'base',\n                    'iframe',\n                    'object',\n                    'embed',\n                    'script',\n                    'style',\n                    'isindex',\n                    'applet',\n                    'form',\n                ]);\n                text = sanitizer.attributes(text);\n                text = text.replace(/\\b(on\\w+=([\"'])?.*?\\2)/gi, '');\n\n                text = text.replace(/\\\\n/g, '\\n'); // need to be configurable?\n                return text;\n            },\n\n            replace_placeholders: function(\n                text,\n                stored_placeholders,\n                file_format,\n            ) {\n                // no need to change stored placeholders\n                var keys = stored_placeholders[0].slice(0);\n                var values = stored_placeholders[1].slice(0);\n\n                for (var i = 0; i < values.length; i++) {\n                    values[i] = values[i].replace(\n                        jipt.regexp.globalPhrase,\n                        function(match, phrase_id, plural_id) {\n                            var phrase = jipt.phrases[phrase_id];\n\n                            if (phrase.data) {\n                                var source_segment = jipt.get_source_segment(\n                                    phrase.data,\n                                    plural_id,\n                                );\n                                var placeholders = phrase.data.isIcu\n                                    ? jipt.get_icu_placeholders(\n                                          source_segment,\n                                          match,\n                                      )\n                                    : jipt.get_placeholders(\n                                          source_segment,\n                                          match,\n                                          file_format,\n                                      );\n\n                                jipt.translatable_placeholders.push({\n                                    phrase: phrase.data,\n                                    placeholders: placeholders,\n                                    plural_id: plural_id,\n                                });\n\n                                return jipt.phrase2preview(\n                                    phrase.data,\n                                    placeholders,\n                                    plural_id,\n                                );\n                            } else {\n                                return match;\n                            }\n                        },\n                    );\n                }\n\n                if (values.length > 0) {\n                    var regexpPlaceholders =\n                        jipt.regexp.placeholders[file_format] ||\n                        jipt.regexp.placeholders['default'];\n                    text = text.replace(regexpPlaceholders, function(match) {\n                        for (var i = 0; i < keys.length; i++) {\n                            if (keys[i] === match && values[i] !== undefined) {\n                                var result = values[i];\n\n                                keys.splice(i, 1);\n                                values.splice(i, 1);\n\n                                return result;\n                            }\n                        }\n\n                        return match;\n                    });\n                }\n\n                return jipt.sanitizing_text(text);\n            },\n\n            get_element_position: function(node) {\n                var offsetLeft = 0;\n                var offsetTop = 0;\n                var translateX = 0;\n                var translateY = 0;\n                var fixed = false;\n                var style, transform, mat, pos;\n                var node_el = node;\n\n                if (node.tagName === 'OPTION') {\n                    node = $(node)\n                        .closest('select')\n                        .get(0);\n                }\n\n                while (node) {\n                    style = window.getComputedStyle(node);\n                    pos = style.getPropertyValue('position');\n\n                    if (pos === 'fixed') {\n                        fixed = true;\n                    }\n\n                    offsetLeft +=\n                        node.offsetLeft - node.scrollLeft + node.clientLeft;\n                    offsetTop +=\n                        node.offsetTop - node.scrollTop + node.clientTop;\n\n                    node =\n                        node.offsetParent === document.body\n                            ? null\n                            : node.offsetParent;\n                }\n\n                node = node_el;\n\n                while (node) {\n                    style = window.getComputedStyle(node);\n\n                    //handling translate css options\n                    transform =\n                        style.transform ||\n                        style.webkitTransform ||\n                        style.mozTransform;\n\n                    mat = transform.match(/^matrix3d\\((.+)\\)$/);\n                    if (mat) {\n                        translateX = parseFloat(mat[1].split(', ')[12]);\n                        translateY = parseFloat(mat[1].split(', ')[13]);\n                    } else {\n                        mat = transform.match(/^matrix\\((.+)\\)$/);\n                        translateX = mat\n                            ? parseFloat(mat[1].split(', ')[4])\n                            : 0;\n                        translateY = mat\n                            ? parseFloat(mat[1].split(', ')[5])\n                            : 0;\n                    }\n\n                    offsetLeft += translateX;\n                    offsetTop += translateY;\n\n                    node =\n                        node.parentElement === document.body\n                            ? null\n                            : node.parentElement;\n                }\n\n                return {\n                    left: offsetLeft,\n                    top: offsetTop,\n                    position: fixed ? 'fixed' : 'absolute',\n                };\n            },\n\n            create_translation_badge: function(element) {\n                var badge_id = 'crowdin-translation-badge';\n                var badge = $('#' + badge_id);\n                var touch = false;\n\n                if (\n                    jipt.touch_optimized &&\n                    !$(element).is(\n                        'area, base, br, col, command, embed, hr, img, input, textarea, wbr',\n                    )\n                ) {\n                    touch = true;\n                }\n\n                if (!badge.length || touch) {\n                    // touch optimized or first time badge creation\n                    var zIndex = jipt.dialog_zindex;\n\n                    badge = $(\n                        '<span data-html2canvas-ignore=\"true\" class=\"crowdin-jipt\"><span class=\"jipt-badge-inner\"></span></span>',\n                    );\n\n                    if (!touch) {\n                        badge\n                            .attr('id', badge_id)\n                            .css('position', 'absolute')\n                            .css('z-index', --zIndex)\n                            .appendTo('body')\n                            .mouseleave(function() {\n                                jipt.hide_translation_badge();\n                            });\n                    } else if (\n                        $(element).children('.' + badge_id).length === 0\n                    ) {\n                        badge.addClass(badge_id).prependTo($(element));\n                    }\n                }\n\n                if (!touch) {\n                    var elementPosition = jipt.get_element_position(element);\n\n                    badge\n                        .css('top', elementPosition.top - 7 + 'px')\n                        .css('left', elementPosition.left - 7 + 'px')\n                        .css('position', elementPosition.position);\n                }\n\n                return badge;\n            },\n\n            get_element_data: function(element) {\n                var phrases = [];\n                var is_parent_element = false;\n\n                if (!$(element).data('phrases')) {\n                    var child_elements = $(element).find(\n                        '[class*=crowdin_jipt]',\n                    );\n                    if (child_elements.length) {\n                        phrases = child_elements.first().data('phrases');\n                        is_parent_element = true;\n                    } else {\n                        return; // This element has no translatable phrases.\n                    }\n                } else {\n                    phrases = $(element).data('phrases');\n                }\n\n                return {\n                    is_parent_element: is_parent_element,\n                    phrases: phrases,\n                    phrase: jipt.phrases[phrases[0].id].data,\n                };\n            },\n\n            show_translation_badge: function(element) {\n                var element_data = jipt.get_element_data(element);\n                if (!element_data) {\n                    return;\n                }\n\n                var phrase = element_data.phrase;\n                var badge = jipt.create_translation_badge(element);\n\n                if (element_data.is_parent_element) {\n                    element = $(element)\n                        .find('[class*=crowdin_jipt]')\n                        .get(0);\n                }\n\n                badge\n                    .show()\n                    .off('click')\n                    .on('click', function(e) {\n                        if (\n                            element_data.phrases.length > 1 ||\n                            phrase.hidden ||\n                            jipt.get_phrase_status(phrase.status) ===\n                                jipt.status.not_found ||\n                            jipt.get_phrase_status(phrase.status) ===\n                                jipt.status.not_visible_on_step ||\n                            jipt.get_phrase_status(phrase.status) ===\n                                jipt.status.file_not_available_for_language\n                        ) {\n                            jipt.show_badge_popup(\n                                element,\n                                element_data.phrases,\n                            );\n                        } else {\n                            jipt.show_editor(phrase, element);\n                        }\n                        e.stopPropagation();\n                        e.preventDefault();\n                        return false;\n                    });\n            },\n\n            hover_show_translation_badge: function(element) {\n                if (!jipt.touch_optimized || $(element).is('select')) {\n                    setTimeout(function() {\n                        jipt.show_translation_badge(element);\n                    }, 1);\n                } else if (\n                    $(element).children('.crowdin-translation-badge').length ===\n                    0\n                ) {\n                    setTimeout(function() {\n                        jipt.show_translation_badge(element);\n                    }, 1);\n                }\n            },\n\n            show_badge_popup: function(element, phrases) {\n                jipt.hide_translation_badge();\n                var elementPosition = jipt.get_element_position(element);\n                var list = '<ul>';\n\n                if (!$('#crowdin-translation-badge-popup').length) {\n                    $('body').append(\n                        $('<div>')\n                            .attr('id', 'crowdin-translation-badge-popup')\n                            .addClass('crowdin-jipt')\n                            .css({\n                                position: 'absolute',\n                                'z-index': jipt.dialog_zindex - 1,\n                                display: 'none',\n                            }),\n                    );\n                } else {\n                    $('#crowdin-translation-badge-popup').html('');\n                }\n\n                $('#crowdin-translation-badge-popup')\n                    .css('top', elementPosition.top + 'px')\n                    .css('left', elementPosition.left + 'px')\n                    .css('position', elementPosition.position);\n\n                for (var i = 0; i < phrases.length; i++) {\n                    var id = phrases[i].id;\n                    var not_found_string =\n                        jipt.get_phrase_status(jipt.phrases[id].data.status) ===\n                        jipt.status.not_found;\n                    var not_visible_on_step =\n                        jipt.get_phrase_status(jipt.phrases[id].data.status) ===\n                        jipt.status.not_visible_on_step;\n                    var file_not_available_for_language =\n                        jipt.get_phrase_status(jipt.phrases[id].data.status) ===\n                        jipt.status.file_not_available_for_language;\n                    var disabled_class =\n                        (!jipt.user.isLeader && jipt.phrases[id].data.hidden) ||\n                        not_found_string ||\n                        not_visible_on_step ||\n                        file_not_available_for_language\n                            ? 'disabled'\n                            : '';\n                    var status_class =\n                        jipt.phrase_classname(jipt.phrases[id].data) + '_popup';\n\n                    list +=\n                        '<li class=\"' +\n                        disabled_class +\n                        '\"><a href=\"javascript:void(0)\" data-id=\"' +\n                        id +\n                        '\" class=\"popup-phrase ' +\n                        status_class +\n                        '\">';\n\n                    if (phrases[i].attr) {\n                        list +=\n                            '<span class=\"popup-phrase-attr\">' +\n                            phrases[i].attr +\n                            ':</span>';\n                    }\n\n                    if (jipt.phrases[id].data.hidden) {\n                        list +=\n                            '<span class=\"popup-phrase-attr\">This string is hidden and should not be translated.</span>';\n                    }\n\n                    if (not_found_string) {\n                        list +=\n                            '<span class=\"popup-phrase-attr\">String is not loaded. Probably it has been deleted.</span>';\n                    }\n\n                    if (not_visible_on_step) {\n                        list +=\n                            '<span class=\"popup-phrase-attr\">This string is not included in the workflow step</span>';\n                    }\n\n                    if (file_not_available_for_language) {\n                        list +=\n                            '<span class=\"popup-phrase-attr\">Seems like ' +\n                            jipt.language.name +\n                            ' is not enabled as a target language <br>for the file this string comes from.</span>';\n                    }\n\n                    var placeholders = [[], []];\n\n                    if (jipt.phrases[id].data.isIcu) {\n                        placeholders = phrases[i].placeholders;\n                    }\n\n                    var preview = jipt.phrase2preview(\n                        jipt.phrases[id].data,\n                        placeholders,\n                        phrases[i].plural_id,\n                    );\n                    list += $('<span>' + preview + '</span>').text();\n\n                    list += '</a></li>';\n                }\n\n                list += '</ul>';\n                $('#crowdin-translation-badge-popup')\n                    .html(list)\n                    .show();\n\n                $(\n                    '#crowdin-translation-badge-popup li:not(.disabled) a.popup-phrase',\n                ).click(function(e) {\n                    var id = $(e.target)\n                        .closest('a.popup-phrase')\n                        .data('id');\n                    $('#crowdin-translation-badge-popup').hide();\n                    jipt.show_editor(jipt.phrases[id].data, element);\n                    return false;\n                });\n\n                jipt.autoHideBadgePopup();\n            },\n\n            autoHideBadgePopup: function() {\n                $(document).one('utapstart mousedown', function(e) {\n                    if (\n                        $(e.target).closest('#crowdin-translation-badge-popup')\n                            .length === 0\n                    ) {\n                        $('#crowdin-translation-badge-popup').hide();\n                    } else {\n                        jipt.autoHideBadgePopup();\n                    }\n                });\n            },\n\n            hide_translation_badge: function(element) {\n                $('#crowdin-translation-badge').hide();\n                if (typeof element !== 'undefined') {\n                    $(element)\n                        .children('.crowdin-translation-badge')\n                        .remove();\n                }\n            },\n\n            // active phrase in the DOM\n            update_active_phrase_highlight: function() {\n                $('.jipt-selected').removeClass('jipt-selected');\n\n                if (jipt.editor.currentTranslation.elements) {\n                    for (\n                        var i = 0;\n                        i < jipt.editor.currentTranslation.elements.length;\n                        i++\n                    ) {\n                        var jq_element = $(\n                            jipt.editor.currentTranslation.elements[i].element,\n                        );\n\n                        jq_element.addClass('jipt-selected');\n\n                        if (\n                            jq_element.is('option') ||\n                            jq_element.parent().is('option')\n                        ) {\n                            var select_element = jq_element.closest('select');\n\n                            if (select_element) {\n                                select_element.addClass('jipt-selected');\n                            }\n                        }\n                    }\n                }\n            },\n\n            highlight_panel_opened_phrase: function() {\n                if (jipt.editor.currentTranslation) {\n                    jipt.translationDialog.content\n                        .find('#jipt-translations')\n                        .find('li.active')\n                        .removeClass('active');\n                    jipt.translationDialog.content\n                        .find('#jipt-translations')\n                        .find(\n                            'a[rel=' + jipt.editor.currentTranslation.id + ']',\n                        )\n                        .parent()\n                        .addClass('active');\n                }\n            },\n\n            // phrases status in the DOM\n            update_phrase_dom_highlight: function() {\n                if (jipt.editor.currentTranslation.elements) {\n                    for (\n                        var i = 0;\n                        i < jipt.editor.currentTranslation.elements.length;\n                        i++\n                    ) {\n                        var element =\n                            jipt.editor.currentTranslation.elements[i].element;\n                        var jq_element = $(element);\n                        var class_name = jipt.element_classname(jq_element);\n\n                        jq_element\n                            .removeClass(function(index, css) {\n                                return (\n                                    css.match(/\\bcrowdin_jipt_\\S+/g) || []\n                                ).join(' ');\n                            })\n                            .addClass(class_name);\n\n                        if (\n                            jq_element.is('option') ||\n                            jq_element.parent().is('option')\n                        ) {\n                            var select_element = jq_element.closest('select');\n\n                            if (select_element) {\n                                select_element.removeClass(function(\n                                    index,\n                                    css,\n                                ) {\n                                    return (\n                                        css.match(/\\bcrowdin_jipt_\\S+/g) || []\n                                    ).join(' ');\n                                });\n\n                                for (var name in jipt.status) {\n                                    if (\n                                        select_element.find(\n                                            '[class*=crowdin_jipt_' +\n                                                jipt.status[name] +\n                                                ']',\n                                        ).length\n                                    ) {\n                                        select_element.addClass(\n                                            'crowdin_jipt_' + jipt.status[name],\n                                        );\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n\n            // phrase status in the translation panel\n            update_phrase_highlight: function() {\n                if (jipt.editor.currentTranslation) {\n                    var class_name =\n                        jipt.phrase_classname(jipt.editor.currentTranslation) +\n                        '_item';\n                    var jq_element = jipt.translationDialog.content.find(\n                        '#jipt-translations a[rel=' +\n                            jipt.editor.currentTranslation.id +\n                            ']',\n                    );\n\n                    jq_element\n                        .removeClass(function(index, css) {\n                            return (\n                                css.match(/\\bcrowdin_jipt_\\S+/g) || []\n                            ).join(' ');\n                        })\n                        .addClass(class_name);\n                }\n            },\n\n            get_next_phrase: function(active_element) {\n                var result = {id: null, element: null};\n                var element = $(active_element);\n\n                if (element.length) {\n                    var next_id = jipt.get_first_untranslated(\n                        element,\n                        'next',\n                        true,\n                    );\n\n                    if (!next_id) {\n                        var selector =\n                            '.crowdin_jipt_untranslated, .crowdin_jipt_partially_translated';\n                        element =\n                            jipt.findNext('next', element, selector) ||\n                            jipt.findNext('next', $(document), selector);\n\n                        if (!element) {\n                            return result;\n                        } // end of phrases\n\n                        next_id = jipt.get_first_untranslated(element);\n\n                        if (!parseInt(next_id)) {\n                            return jipt.get_next_phrase(element);\n                        }\n                    }\n\n                    result.id = next_id;\n                    result.element = element;\n                }\n\n                return result;\n            },\n\n            get_prev_phrase: function(active_element) {\n                var result = {id: null, element: null};\n                var element = $(active_element);\n\n                if (element.length) {\n                    var prev_id = jipt.get_first_untranslated(\n                        element,\n                        'prev',\n                        true,\n                    );\n\n                    if (!prev_id) {\n                        element = jipt.findNext(\n                            'prev',\n                            element,\n                            '.crowdin_jipt_untranslated, .crowdin_jipt_partially_translated',\n                        );\n\n                        if (element.length) {\n                            prev_id = jipt.get_first_untranslated(\n                                element,\n                                'prev',\n                            );\n\n                            if (!parseInt(prev_id)) {\n                                return jipt.get_prev_phrase(element);\n                            }\n                        }\n                    }\n\n                    result.id = prev_id;\n                    result.element = element;\n                }\n\n                return result;\n            },\n\n            show_next_element: function(active_element) {\n                var next_phrase = jipt.get_next_phrase(active_element);\n\n                if (!next_phrase.id) {\n                    var selector = '.crowdin_phrase';\n                    var element =\n                        jipt.findNext('next', $(active_element), selector) ||\n                        jipt.findNext('next', $(document), selector);\n\n                    if (element) {\n                        jipt.show_editor(\n                            jipt.get_element_data(element).phrase,\n                            element,\n                        );\n                    }\n\n                    jipt.refresh_suggestions();\n                    return;\n                }\n\n                jipt.show_editor(\n                    jipt.phrases[next_phrase.id].data,\n                    next_phrase.element.get(0),\n                );\n            },\n\n            show_prev_element: function(active_element) {\n                var prev_phrase = jipt.get_prev_phrase(active_element);\n\n                if (!prev_phrase.id) {\n                    var selector = '.crowdin_phrase';\n                    var element =\n                        jipt.findNext('prev', $(active_element), selector) ||\n                        jipt.findNext('prev', $(document), selector);\n\n                    if (element) {\n                        var phrase = jipt.get_element_data(element).phrase;\n                        if (!phrase.visibleOnStep) {\n                            jipt.show_prev_element(element[0]);\n\n                            return;\n                        }\n\n                        jipt.show_editor(phrase, element);\n                    }\n\n                    return;\n                }\n\n                jipt.show_editor(\n                    jipt.phrases[prev_phrase.id].data,\n                    prev_phrase.element.get(0),\n                );\n            },\n\n            get_first_untranslated: function(element, direction, self_only) {\n                var id = null;\n\n                if (element.data('phrases')) {\n                    var phrases = element.data('phrases').slice();\n                    var reached_active_phrase = false;\n\n                    if (direction === 'prev') {\n                        phrases.reverse();\n                    }\n\n                    for (var i = 0; i < phrases.length; i++) {\n                        var phrase = jipt.phrases[phrases[i].id].data;\n\n                        // phrase.id !== '0' - skip phrase at document.title with manually setted id\n                        if (\n                            (this.get_phrase_status(phrase.status) ===\n                                this.status.untranslated ||\n                                this.get_phrase_status(phrase.status) ===\n                                    this.status.partially_translated) &&\n                            !phrase.hidden &&\n                            phrase.id !== 0\n                        ) {\n                            if (self_only) {\n                                if (reached_active_phrase) {\n                                    id = phrase.id;\n                                    break;\n                                }\n                                if (\n                                    phrase.id ===\n                                    jipt.editor.currentTranslation.id\n                                ) {\n                                    reached_active_phrase = true;\n                                }\n                            } else {\n                                id = phrase.id;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                return id;\n            },\n\n            show_settings: function(mode) {\n                mode === 'hotkeys'\n                    ? jipt.hotkeys_settings()\n                    : jipt.editor_settings();\n                $('.jipt-dialog-title h4', '.jipt-editor-dialog').text(\n                    mode === 'hotkeys' ? 'Hotkeys Settings' : 'Editor Settings',\n                );\n                jipt.editorDialog.jiptDialog({action: 'open'});\n            },\n\n            show_editor: function(string, element) {\n                if (!jipt.user.isLoggedIn) {\n                    alert('Login first to be able submit translations');\n                    jipt.show_login_panel();\n                    return;\n                }\n\n                jipt.place_translation_preview();\n                jipt.editor.currentTranslation = string;\n\n                if (element) {\n                    jipt.editor.currentTranslation.active_element = element;\n                } else if (jipt.editor.currentTranslation.elements) {\n                    jipt.editor.currentTranslation.active_element =\n                        jipt.editor.currentTranslation.elements[0].element;\n                }\n\n                jipt.update_active_phrase_highlight();\n                jipt.editorDialog.jiptDialog({action: 'open'});\n                jipt.editorDialog.jiptDialog({action: 'toggle_minimized_show'});\n                jipt.highlight_panel_opened_phrase();\n\n                var preload_ids = [];\n\n                if (jipt.editor.currentTranslation.active_element) {\n                    var prev_phrase_id = jipt.get_prev_phrase(\n                        jipt.editor.currentTranslation.active_element,\n                    ).id;\n                    var next_phrase_id = jipt.get_next_phrase(\n                        jipt.editor.currentTranslation.active_element,\n                    ).id;\n\n                    next_phrase_id && preload_ids.push(+next_phrase_id);\n                    prev_phrase_id && preload_ids.push(+prev_phrase_id);\n                }\n\n                jipt.show_string(string.id, preload_ids);\n\n                if (!jipt.pluralsPreview) {\n                    if (string.text.length === 1) {\n                        // phrase doesn't has plurals\n                        $('#jipt-preview-available-msg').hide();\n                    } else {\n                        $('#jipt-preview-available-msg').show();\n                    }\n                }\n            },\n\n            show_string: function(string_id, preload_ids) {\n                var message = {\n                    msg_type: 'show_string',\n                    id: string_id,\n                    preload_ids: preload_ids,\n                };\n\n                jipt.send_post_message(message);\n            },\n\n            refresh_suggestions: function() {\n                var message = {msg_type: 'refresh_suggestions'};\n\n                jipt.send_post_message(message);\n            },\n\n            _get_target_languages_options: function() {\n                var language_code = Storage.get('language_code');\n                var options = '';\n                var selected = '';\n\n                for (var i = 0; i < jipt.target_languages.length; i++) {\n                    selected = '';\n                    if (jipt.target_languages[i].code === language_code) {\n                        selected = 'selected';\n                    }\n\n                    options +=\n                        '<option value=\"' +\n                        jipt.target_languages[i].code +\n                        '\" data-id=\"' +\n                        jipt.target_languages[i].id +\n                        '\" ' +\n                        selected +\n                        ' >';\n                    options += jipt.target_languages[i].name;\n                    options += '</option>';\n                }\n\n                return options;\n            },\n\n            getWorkflowStepsOptions: function(languageCode) {\n                var workflowStepId = Storage.get('workflow_step_id');\n                var options = '';\n                var workflowSteps = [];\n\n                if (jipt.workflowSteps.length) {\n                    jipt.workflowSteps.forEach(function(element) {\n                        var test = element.languages.map(function(value) {\n                            return value['code'];\n                        });\n                        if (test.indexOf(languageCode) >= 0) {\n                            workflowSteps.push(element);\n                        }\n                    });\n\n                    for (var i = 0; i < workflowSteps.length; i++) {\n                        var opt = document.createElement('option');\n                        opt.value = workflowSteps[i].id;\n                        opt.innerHTML =\n                            workflowSteps[i].title +\n                            ' (' +\n                            workflowSteps[i].type +\n                            ')';\n\n                        if (workflowSteps[i].id === workflowStepId) {\n                            opt.defaultSelected = true;\n                        }\n\n                        options += opt.outerHTML;\n                    }\n                }\n\n                return options;\n            },\n\n            show_login_panel: function() {\n                var loginLanguageField = jipt.loginDialog.content.find(\n                    '#crowdin-login-language-field',\n                );\n                loginLanguageField.html(jipt._get_target_languages_options());\n\n                if (jipt.getWorkflowStepsOptions($(loginLanguageField).val())) {\n                    jipt.loginDialog.content\n                        .find('#crowdin-login-workflow-step-field')\n                        .html(\n                            jipt.getWorkflowStepsOptions(\n                                $(loginLanguageField).val(),\n                            ),\n                        )\n                        .parents('.workflow-step-group')\n                        .removeClass('hide');\n                }\n\n                jipt.loginDialog.content\n                    .find('.crowdin-languages-panel')\n                    .hide();\n                jipt.loginDialog.content.find('.crowdin-login-panel').show();\n                jipt.loginDialog.jiptDialog({\n                    action: 'open',\n                    position: 'center',\n                });\n                jipt.loginDialog.content.find('#crowdin-login-field').focus();\n\n                jipt.place_close_btn();\n            },\n\n            checkCookie: function(callback) {\n                var data = {origin: window.location.origin};\n                jipt.request(\n                    'POST',\n                    Url.getFullUrl('/api/v2/jipt/cookie'),\n                    data,\n                    function() {\n                        jipt.request(\n                            'DELETE',\n                            Url.getFullUrl('/api/v2/jipt/cookie'),\n                            data,\n                            function(response) {\n                                var errorMessage =\n                                    'Your browser preferences are set to block third-party cookies.' +\n                                    '<p>To allow Crowdin In-Context to operate correctly, please make sure to clear the checkboxes <i>Block third-party cookies</i> or <i>Prevent cross-site tracking</i>.</p>';\n\n                                if (response.success) {\n                                    callback();\n                                } else {\n                                    jipt._show_error_dialog(errorMessage, true);\n                                }\n                            },\n                        );\n                    },\n                );\n            },\n\n            show_languages_panel: function() {\n                var languageField = jipt.loginDialog.content.find(\n                    '#crowdin-language-field',\n                );\n                languageField.html(jipt._get_target_languages_options());\n\n                if (jipt.getWorkflowStepsOptions($(languageField).val())) {\n                    jipt.loginDialog.content\n                        .find('#crowdin-workflow-step-field')\n                        .html(\n                            jipt.getWorkflowStepsOptions(\n                                $(languageField).val(),\n                            ),\n                        )\n                        .parents('.workflow-step-group')\n                        .removeClass('hide');\n                }\n\n                jipt.loginDialog.content.find('.crowdin-login-panel').hide();\n                jipt.loginDialog.content\n                    .find('.crowdin-languages-panel')\n                    .show();\n                jipt.loginDialog.jiptDialog({\n                    action: 'open',\n                    position: 'center',\n                });\n            },\n\n            set_current_language: function(code, id, name) {\n                jipt.language.code = code;\n                jipt.language.id = id;\n                jipt.language.name = name;\n                Storage.save('language_code', code);\n                Storage.save('language_id', id);\n                Storage.save('language_name', name);\n            },\n\n            setCurrentWorkflowStep: function(id, type) {\n                jipt.workflowStep.id = id;\n                jipt.workflowStep.type = type;\n                Storage.save('workflow_step_id', id);\n                Storage.save('workflow_step_type', type);\n            },\n\n            _login_action: function() {\n                var language = jipt.loginDialog.content.find(\n                    '#crowdin-login-language-field option:selected',\n                );\n                jipt.set_current_language(\n                    language.val(),\n                    language.data('id'),\n                    language.html(),\n                );\n\n                var workflow_step = jipt.loginDialog.content.find(\n                    '#crowdin-login-workflow-step-field option:selected',\n                );\n                jipt.setCurrentWorkflowStep(\n                    workflow_step.val(),\n                    workflow_step.html(),\n                );\n\n                window.top.location.href = Url.getJiptPath('login');\n            },\n\n            _join_action: function() {\n                window.top.location.href = Url.getJiptPath('join');\n            },\n\n            _logout_action: function() {\n                var eventMethod = window.addEventListener\n                    ? 'addEventListener'\n                    : 'attachEvent';\n                var eventer = window[eventMethod];\n                var messageEvent =\n                    eventMethod == 'attachEvent' ? 'onmessage' : 'message';\n\n                eventer(\n                    messageEvent,\n                    function(e) {\n                        if (e.data === 'logout') {\n                            window.location.reload();\n                        }\n                    },\n                    false,\n                );\n\n                var iframe = document.createElement('iframe');\n\n                iframe.style = 'display: none;';\n                iframe.src = Url.getAuthEntryPoint('/logout');\n\n                document.body.append(iframe);\n            },\n\n            search: function(query, strings) {\n                if (\n                    Object.prototype.toString.call(strings) ===\n                    '[object Object]'\n                ) {\n                    strings = $.map(strings, function(el) {\n                        return el;\n                    });\n                }\n\n                for (var index = 0; index < strings.length; index++) {\n                    if (\n                        strings[index]\n                            .toLowerCase()\n                            .indexOf(query.toLowerCase()) !== -1\n                    ) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            rebuild_panel_phrases: function(query, page) {\n                jipt.translationDialog.content\n                    .find('.jipt-phrases-to-translate')\n                    .html('');\n\n                var list = '';\n                var itemClass;\n                var item_counter = 0;\n                var items_on_page = 50;\n                var pages = jipt.panel_pages;\n                var current_page = 0;\n\n                if (page && /^\\+?(0|[1-9]\\d*)$/.test(page)) {\n                    current_page = page;\n\n                    if (page >= pages) {\n                        current_page = pages - 1;\n                    }\n                }\n\n                var start_item = current_page * items_on_page;\n\n                jipt.panel_page = current_page;\n\n                for (var i in jipt.phrases) {\n                    var phrase = jipt.phrases[i].data;\n\n                    if (\n                        i === '0' ||\n                        this.get_phrase_status(phrase.status) ===\n                            jipt.status.not_found ||\n                        !phrase.visibleOnStep ||\n                        phrase.fileNotAvailableForLanguage\n                    ) {\n                        continue; // pseudo phrase for html title and not found\n                    }\n\n                    var disabled_class =\n                        !jipt.user.isLeader && phrase.hidden ? 'disabled' : '';\n                    var disabled_title = phrase.hidden\n                        ? 'title=\"This string is hidden and should not be translated.\"'\n                        : '';\n\n                    if (\n                        query &&\n                        !this.search(query, phrase.text) &&\n                        !this.search(query, phrase.translation)\n                    ) {\n                        continue;\n                    }\n\n                    if (jipt.translations_filter === true) {\n                        if (!phrase.elements) {\n                            continue;\n                        }\n                    }\n\n                    if (\n                        item_counter < start_item ||\n                        item_counter >= start_item + items_on_page\n                    ) {\n                        item_counter++;\n                        continue;\n                    }\n\n                    itemClass = jipt.phrase_classname(phrase) + '_item';\n\n                    list +=\n                        '<li ' +\n                        disabled_title +\n                        ' class=\"' +\n                        disabled_class +\n                        '\"><a href=\"javascript:void(0)\" class=\"' +\n                        itemClass +\n                        '\" rel=\"' +\n                        i +\n                        '\">';\n                    list += htmlspecialchars(phrase.text[0]);\n                    list += '</a></li>';\n\n                    item_counter++;\n                }\n\n                var no_items_help = jipt.translations_filter\n                    ? ' The search was made among the texts of current page.'\n                    : '';\n\n                if (item_counter === 0) {\n                    list +=\n                        '<li><div style=\"padding: 30px; text-align: center; color: #999\">No items.' +\n                        no_items_help +\n                        '</div></li>';\n                }\n\n                jipt.translationDialog.content\n                    .find('.jipt-phrases-to-translate')\n                    .html(list);\n\n                pages = Math.ceil(item_counter / items_on_page);\n                jipt.panel_pages = pages;\n\n                if (pages < 2) {\n                    $('#translation_panel_paging').hide();\n                } else {\n                    var input_size = pages.toString(10).length * 2 + 3;\n                    var prev_btn = $('#translation_panel_prev_page');\n                    var next_btn = $('#translation_panel_next_page');\n\n                    $('#translation_panel_current_page')\n                        .attr({size: input_size})\n                        .val(current_page + 1 + ' / ' + pages);\n\n                    current_page === 0\n                        ? prev_btn.addClass('jipt-page-disabled')\n                        : prev_btn.removeClass('jipt-page-disabled');\n                    current_page + 1 === pages\n                        ? next_btn.addClass('jipt-page-disabled')\n                        : next_btn.removeClass('jipt-page-disabled');\n\n                    $('#translation_panel_paging').show();\n                }\n                jipt.highlight_panel_opened_phrase();\n            },\n\n            delayed_rebuild_panel_phrases: function() {\n                clearTimeout(jipt.rebuild_panel_timeout);\n\n                jipt.rebuild_panel_timeout = setTimeout(function() {\n                    jipt.rebuild_panel_phrases(\n                        jipt.panel_search_phrase,\n                        jipt.panel_page,\n                    );\n                }, 500);\n            },\n\n            getJoinProjectDialogTpl: function(data) {\n                var entryPoint = Url.getEntryPoint(),\n                    joinRequestSent = data.joinRequestSent;\n\n                var buttonUrl =\n                    entryPoint +\n                    (config.domain\n                        ? data.projectManagersUrl\n                        : data.languageUrl);\n                var buttonText = config.domain\n                    ? 'contact project manager'\n                    : 'send request';\n\n                var sendRequestBtn =\n                    Boolean(joinRequestSent) === false\n                        ? '<div style=\"padding: 0; margin: 25px 0 25px\">' +\n                          '<a href=\"' +\n                          buttonUrl +\n                          '\" target=\"_blank\" class=\"jipt-btn\">' +\n                          buttonText +\n                          '</a>' +\n                          '</div>'\n                        : '';\n                var style = joinRequestSent\n                    ? 'style=\"padding: 0 10px 20px 10px\"'\n                    : '';\n\n                return (\n                    '' +\n                    '<div class=\"text-center\"' +\n                    style +\n                    '>\\n' +\n                    data.message +\n                    sendRequestBtn +\n                    '<p class=\"text-center\">' +\n                    '<a href=\"#\" id=\"jipt-select-language\" style=\"margin-right: 10px;\">Change Language</a>' +\n                    this.logoutLinkTpl() +\n                    '</p>' +\n                    '</div>'\n                );\n            },\n\n            mfaSettingsAndLogoutTpl: function(profileUrl) {\n                return (\n                    '' +\n                    '<p class=\"text-center\">' +\n                    '<a target=\"_blank\" href=\"' +\n                    Url.getEntryPoint() +\n                    profileUrl +\n                    '\" style=\"margin-right: 10px;\">Profile Settings</a>' +\n                    this.logoutLinkTpl() +\n                    '</p>'\n                );\n            },\n\n            logoutLinkTpl: function() {\n                return '<a id=\"jipt-join-logout-error\" href=\"#\">Logout</a>';\n            },\n\n            _show_no_texts_warning: function() {\n                var configURL = this.get_in_context_config_url(jipt);\n                var helpURL = Url.getEntryPoint() + '/contacts';\n\n                var warningDialogContent =\n                    '<div>' +\n                    '<strong>Crowdin In-Context was unable to identify translatable texts.</strong>' +\n                    '<p>Possible reasons:</p>' +\n                    '<ul style=\"margin-left: 15px; list-style-type: square\">' +\n                    '<li>the pseudo-language is not integrated;</li>' +\n                    '<li>current application locale is not set to the language that contains Crowdin In-Context pseudo-language;</li>' +\n                    '<li>there are no translatable texts on this page.</li>' +\n                    '</ul>' +\n                    '<p>Check the <a target=\"_blank\" href=\"' +\n                    configURL +\n                    '\">integration guide</a> for more information ' +\n                    'or <a href=\"' +\n                    helpURL +\n                    '\" target=\"_blank\">contact Crowdin Support</a></p>' +\n                    '<div class=\"jipt-control-group\">' +\n                    '<label class=\"jipt-checkbox\"><input type=\"checkbox\" id=\"skip_no_phrases_msg\">Do not show this message again.</label>' +\n                    '</div>' +\n                    '</div>';\n\n                var warningDialog = $('<div id=\"no_texts_warning\">').html(\n                    warningDialogContent,\n                );\n\n                warningDialog.content = warningDialog.jiptDialog({\n                    modal: false,\n                    width: '550px',\n                    height: '320px',\n                    iframe: true,\n                    drags: true,\n                    minimize_btn: false,\n                    icon: 'crowdin',\n                    custom_class: 'jipt-no-translations',\n                    title_pane: '<h4>Nothing to translate</h4>',\n                    buttons_pane:\n                        '<div style=\"text-align:right; margin: 8px 20px;\">' +\n                        '<button type=\"button\" class=\"jipt-btn jipt-dialog-close\">Close</button>' +\n                        '</div>',\n                });\n\n                warningDialog.content\n                    .find('#skip_no_phrases_msg')\n                    .click(function() {\n                        if ($(this).prop('checked') == true) {\n                            Storage.save('no_phrases_warning_disabled', 'yes');\n                        } else {\n                            Storage.save('no_phrases_warning_disabled', 'no');\n                        }\n                    });\n\n                warningDialog.jiptDialog({action: 'open'});\n            },\n\n            _show_error_dialog: function(msg, hideLogoutLink) {\n                var view = msg;\n                var hideLink = hideLogoutLink || false;\n\n                if (hideLink === false) {\n                    view =\n                        msg +\n                        '<p class=\"text-center\">' +\n                        this.logoutLinkTpl() +\n                        '</p>';\n                }\n\n                var errorDialog = $('<div>').html(view);\n\n                var dialogConfig = {\n                    modal: true,\n                    width: '450px',\n                    drags: false,\n                    minimize_btn: false,\n                    close_btn: false,\n                    icon: 'crowdin',\n                    title_pane: '<h4>Crowdin In-Context</h4>',\n                };\n\n                errorDialog.jiptDialog(dialogConfig);\n                errorDialog.jiptDialog({action: 'open'});\n                jipt.place_close_btn();\n\n                $('#jipt-join-logout-error').on('click', function() {\n                    jipt._logout_action();\n                });\n\n                $('#jipt-select-language').on('click', function() {\n                    errorDialog.jiptDialog({action: 'destroy'});\n\n                    // reset language\n                    jipt.set_current_language(undefined, null, undefined);\n                    jipt.init_project();\n\n                    jipt.show_languages_panel();\n                });\n            },\n\n            _handle_jipt_error: function(data) {\n                var msg = '';\n                var configURL = data.projectId\n                    ? this.get_in_context_config_url(data)\n                    : '';\n                var helpURL = Url.getEntryPoint() + '/contacts';\n\n                switch (data.errorCode) {\n                    case 'auth_error':\n                        alert('Your session has expired. Please log in again');\n                        window.location.reload();\n                        break;\n                    case 'moderate_language':\n                        this._show_error_dialog(\n                            this.getJoinProjectDialogTpl(data.data),\n                            true,\n                        );\n                        break;\n                    case 'project_not_found':\n                        this._show_error_dialog(\n                            '<p class=\"text-center\" style=\"margin: 0 0 10px; padding: 0;\"><strong>Translation mode is unavailable.</strong>' +\n                                '<p class=\"text-center\">Crowdin In-Context can not find appropriate project at Crowdin. ' +\n                                'Please contact project manager for further assistance.</p>',\n                        );\n                        break;\n                    case 'jipt_disabled':\n                        if (data.data.isManager) {\n                            msg =\n                                '<p class=\"text-center\" style=\"margin: 0 0 10px; padding: 0;\"><strong>Crowdin In-Context is disabled for this project.</strong></p>' +\n                                '<p class=\"text-center\">Check the <a target=\"_blank\" href=\"' +\n                                configURL +\n                                '\">integration guide</a> for more information ' +\n                                'or <a href=\"' +\n                                helpURL +\n                                '\" target=\"_blank\">contact Crowdin Support</a></p>';\n                        } else {\n                            msg =\n                                '<p class=\"text-center\" style=\"margin: 0 0 10px; padding: 0;\"><strong>Translation mode is currently disabled.</strong></p>' +\n                                '<p class=\"text-center\">Please contact <a href=\"' +\n                                data.ownerUrl +\n                                '\">project manager</a> for further assistance.</p>';\n                        }\n                        this._show_error_dialog(msg);\n                        break;\n                    case 'denied':\n                        this._show_error_dialog(\n                            '<p class=\"text-center\">Sorry, you do not have access to this project</p>',\n                        );\n                        break;\n                    case 'mfa_denied':\n                        this._show_error_dialog(\n                            '' +\n                                '<p class=\"text-center\">' +\n                                'Project participants are required to have two-factor authentication enabled to be able to access the project' +\n                                '</p>' +\n                                this.mfaSettingsAndLogoutTpl(\n                                    data.data.mfa_settings_url,\n                                ),\n                            true,\n                        );\n                        break;\n                    case 'timeout':\n                        this._show_error_dialog(\n                            '<p class=\"text-center\">Oops. Could not load data from remote server</p>',\n                        );\n                        break;\n                    case 'language_not_found':\n                        Storage.delete('language_id');\n                        Storage.delete('language_code');\n                        Storage.delete('language_name');\n\n                        this._show_error_dialog(\n                            '<p class=\"text-center\">' +\n                                'The specified language was not found in your project' +\n                                '</p>',\n                            true,\n                        );\n                        break;\n                    default:\n                        this._show_error_dialog(\n                            '<p class=\"text-center\">' +\n                                'Something went wrong while performing request' +\n                                '</p>',\n                            true,\n                        );\n                }\n            },\n\n            element_classname: function($element) {\n                if ($element.is('select')) {\n                    var classes = [];\n\n                    for (var name in jipt.status) {\n                        if (\n                            $element.find(\n                                '[class*=crowdin_jipt_' +\n                                    jipt.status[name] +\n                                    ']',\n                            ).length\n                        ) {\n                            classes.push('crowdin_jipt_' + jipt.status[name]);\n                        }\n                    }\n                    if (\n                        $element.find('[class*=crowdin_jipt_no_preview]').length\n                    ) {\n                        classes.push('crowdin_jipt_no_preview');\n                    }\n\n                    return classes.join(' ');\n                }\n\n                var phrases = $element.data('phrases') || [];\n                var statuses = [];\n                var no_preview_class = '';\n\n                for (var i = 0; i < phrases.length; i++) {\n                    var phrase = jipt.phrases[phrases[i].id].data;\n                    statuses.push(jipt.phrase_classname(phrase));\n                    if (!no_preview_class) {\n                        no_preview_class = jipt.phrase_no_preview_classname(\n                            phrase,\n                        );\n                    }\n                }\n\n                for (var name in jipt.status) {\n                    var status = 'crowdin_jipt_' + jipt.status[name];\n\n                    if ($.inArray(status, statuses) >= 0) {\n                        return status + no_preview_class;\n                    }\n                }\n\n                return '' + no_preview_class;\n            },\n\n            phrase_no_preview_classname: function(phrase) {\n                var classname =\n                    jipt.pluralsPreview || phrase.text.length === 1\n                        ? ''\n                        : ' crowdin_jipt_no_preview';\n                return classname;\n            },\n\n            phrase_classname: function(phrase) {\n                if (phrase.hidden) {\n                    return 'crowdin_jipt_hidden';\n                }\n\n                return 'crowdin_jipt_' + this.get_phrase_status(phrase.status);\n            },\n\n            addPhraseToElement: function(element, data) {\n                var phrases = [];\n                if (element.data('phrases')) {\n                    phrases = element.data('phrases');\n                }\n\n                for (var i = 0; i < phrases.length; i++) {\n                    if (+phrases[i].id === data.id) {\n                        return; // already exists\n                    }\n                }\n\n                phrases.push(data);\n                element.data('phrases', phrases);\n            },\n\n            request: function(\n                method,\n                url,\n                data,\n                callback,\n                errorCallback,\n                additionalHeaders,\n            ) {\n                var headers = {\n                    Accept: 'application/json',\n                };\n\n                if (additionalHeaders) {\n                    for (var i in additionalHeaders) {\n                        headers[i] = additionalHeaders[i];\n                    }\n                }\n\n                var isBlob = data instanceof Blob;\n\n                if (method !== 'GET' && false === isBlob) {\n                    headers['Content-Type'] = 'application/json';\n                    data = JSON.stringify(data);\n                }\n\n                $.ajax({\n                    method: method,\n                    url: url,\n                    data: data,\n                    xhrFields: {\n                        withCredentials: true,\n                    },\n                    dataType: isBlob ? null : 'json',\n                    headers: headers,\n                    crossDomain: true,\n                    timeout: 45000,\n                    contentType: isBlob ? 'application/octet-stream' : '',\n                    processData: !isBlob,\n                    beforeSend: function(xhr, settings) {\n                        if ($.active > jipt.concurrentRequestsMaxCount) {\n                            jipt.pendingRequests.push($.extend({}, settings));\n                            xhr.abort();\n                        }\n                    },\n                    complete: function(xhr, status) {\n                        while (\n                            jipt.pendingRequests.length > 0 &&\n                            $.active < jipt.concurrentRequestsMaxCount\n                        ) {\n                            $.ajax(jipt.pendingRequests.shift());\n                        }\n\n                        if (status === 'timeout') {\n                            jipt._handle_jipt_error({errorCode: 'timeout'});\n                        }\n                    },\n                    success: function(response) {\n                        callback(response);\n                    },\n                    error: function(xhr) {\n                        if (errorCallback) {\n                            errorCallback(xhr);\n                            return;\n                        }\n\n                        if (xhr.status === 0) {\n                            jipt._show_error_dialog(\n                                '<p class=\"text-center\">Oops. Could not load data from remote server</p>',\n                                true,\n                            );\n                            return;\n                        }\n\n                        if (xhr.status === 401) {\n                            jipt._handle_jipt_error({errorCode: 'auth_error'});\n                        } else if (xhr.responseJSON) {\n                            jipt._handle_jipt_error(xhr.responseJSON);\n                        }\n                    },\n                });\n            },\n\n            findNext: function(direction, element, selector) {\n                var candidate = jipt[direction](element);\n\n                while (true) {\n                    if (candidate === false) {\n                        return false;\n                    }\n\n                    if (candidate.is(selector)) {\n                        return candidate;\n                    }\n\n                    candidate = jipt[direction](candidate);\n                }\n            },\n\n            next: function(element) {\n                var first_child = element.find('*:first');\n\n                if (first_child.length !== 0) {\n                    return first_child;\n                }\n\n                var next = element.next();\n\n                if (next.length !== 0) {\n                    return next;\n                }\n\n                var parent = element.parent();\n\n                while (true) {\n                    if (parent.is('html') || parent.length === 0) {\n                        return false;\n                    }\n\n                    var parent_next = parent.next();\n\n                    if (parent_next.length !== 0) {\n                        return parent_next;\n                    }\n\n                    parent = parent.parent();\n                }\n            },\n\n            prev: function(element) {\n                var prev = element.prev();\n\n                if (prev.length !== 0) {\n                    var prev_last = prev.find('*:last');\n\n                    if (prev_last.length !== 0) {\n                        return prev_last;\n                    } else {\n                        return prev;\n                    }\n                }\n\n                if (element.is('html') || element.length === 0) {\n                    return false;\n                }\n\n                return element.parent();\n            },\n\n            _load_phrases_delayed: function(text, callback) {\n                if (config.preload_texts === true) {\n                    return; // load phrases only once\n                }\n\n                $.extend(\n                    jipt._phrases.need_load,\n                    jipt.get_phrases_from_text(text),\n                );\n                jipt._phrases.callbacks.push(callback);\n\n                clearTimeout(jipt._phrases.load_timeout);\n                jipt._phrases.load_timeout = setTimeout(function() {\n                    var ids = jipt._phrases.need_load;\n                    var callbacks = jipt._phrases.callbacks.slice(0);\n\n                    jipt._phrases.need_load = {};\n                    jipt._phrases.callbacks = [];\n\n                    for (var id in ids) {\n                        if (jipt._phrases.was_loaded[id]) {\n                            delete ids[id];\n                        }\n                    }\n\n                    $.extend(jipt._phrases.was_loaded, ids);\n\n                    if ($.isEmptyObject(ids)) {\n                        return;\n                    }\n\n                    jipt._load_phrases(ids, callbacks);\n                }, 200);\n            },\n\n            _load_phrases: function(ids, callbacks) {\n                var responses_count = 0;\n\n                var edit_strings_context = 0;\n                if (config.edit_strings_context && !config.preload_texts) {\n                    edit_strings_context = 1;\n                }\n\n                if (config.preload_texts === true) {\n                    var serialized_ids_chunks = ['all'];\n                } else {\n                    var serialized_ids = jipt.serialize_ids(ids);\n                    var serialized_ids_chunks = jipt.string_chunks(\n                        serialized_ids,\n                        1400,\n                        '.',\n                    );\n\n                    if (!serialized_ids_chunks.length) {\n                        for (var j = 0; j < callbacks.length; j++) {\n                            callbacks[j]();\n                        }\n                        jipt.rebuild_panel_phrases();\n                        return;\n                    }\n                }\n\n                for (var i = 0; i < serialized_ids_chunks.length; i++) {\n                    jipt.request(\n                        'GET',\n                        Url.getFullUrl(\n                            '/api/v2/jipt/project/' +\n                                get_project_identifier() +\n                                '/strings',\n                        ),\n                        {\n                            languageCode: jipt.language.code,\n                            workflowStepId: jipt.workflowStep.id,\n                            editStringsContext: edit_strings_context,\n                            phrasesIds: serialized_ids_chunks[i],\n                        },\n                        function(response) {\n                            responses_count++;\n\n                            $.extend(jipt.phrases, response.data);\n\n                            if (\n                                responses_count === serialized_ids_chunks.length\n                            ) {\n                                for (var id in ids) {\n                                    if (\n                                        typeof jipt.phrases[id] === 'undefined'\n                                    ) {\n                                        jipt.phrases[id] = {\n                                            data: {\n                                                hidden: '0',\n                                                id: id,\n                                                status: 'not_found',\n                                                text: [jipt.not_found_warning],\n                                                translation: [''],\n                                            },\n                                        };\n                                    } else {\n                                        if (\n                                            config.domain &&\n                                            jipt.phrases[id].data\n                                                .visibleOnStep == false\n                                        ) {\n                                            jipt.phrases[id].data.status =\n                                                'not_visible_on_step';\n                                        }\n\n                                        if (\n                                            jipt.phrases[id].data\n                                                .fileNotAvailableForLanguage\n                                        ) {\n                                            jipt.phrases[id].data.status =\n                                                'file_not_available_for_language';\n                                        }\n                                    }\n                                }\n\n                                for (var j = 0; j < callbacks.length; j++) {\n                                    callbacks[j]();\n                                }\n\n                                jipt.delayed_rebuild_panel_phrases();\n                            }\n                        },\n                    );\n                }\n            },\n\n            update_strings_context: function(string_id, context) {\n                if (+string_id === 0 || typeof context === 'undefined') {\n                    return;\n                }\n\n                if (!config.preload_texts) {\n                    var new_context = config.edit_strings_context(context);\n\n                    if (editContextTimeout) {\n                        window.clearTimeout(editContextTimeout);\n                    }\n\n                    if (new_context.length > 1500) {\n                        console.warn(\n                            'Crowdin In-Context: Context cannot be updated because it is too long. String ID: ' +\n                                string_id,\n                        );\n                        return;\n                    }\n\n                    if (context === new_context) {\n                        return;\n                    }\n\n                    if (\n                        $.inArray(string_id, stringsToUpdate.updatedStrings) > 0\n                    ) {\n                        return;\n                    } else {\n                        stringsToUpdate.updatedStrings.push(string_id);\n                    }\n\n                    var stringsToCheck = stringsToUpdate.newStrings.slice();\n                    stringsToCheck.push({id: string_id, context: new_context});\n\n                    if (JSON.stringify(stringsToCheck).length > 1500) {\n                        jipt.send_strings();\n                    }\n\n                    stringsToUpdate.newStrings.push({\n                        id: string_id,\n                        context: new_context,\n                    });\n\n                    editContextTimeout = window.setTimeout(function() {\n                        jipt.send_strings();\n                    }, 1000);\n                }\n            },\n\n            send_strings: function() {\n                jipt.request(\n                    'PATCH',\n                    Url.getFullUrl(\n                        '/api/v2/jipt/project/' +\n                            get_project_identifier() +\n                            '/strings',\n                    ),\n                    {\n                        origin: window.location.origin,\n                        workflowStepId: jipt.workflowStep.id,\n                        strings: stringsToUpdate.newStrings,\n                    },\n                    function() {},\n                );\n\n                stringsToUpdate.newStrings.splice(\n                    0,\n                    stringsToUpdate.newStrings.length,\n                );\n            },\n\n            get_phrases_from_text: function(text) {\n                var phrase_ids = {};\n\n                while (true) {\n                    var match = jipt.regexp.globalStartPhrase.exec(text);\n                    if (match === null) {\n                        break;\n                    }\n\n                    phrase_ids[parseInt(match[1])] = true;\n                }\n\n                return phrase_ids;\n            },\n\n            serialize_ids: function(ids) {\n                var chunks = [];\n                var chunk = [];\n                var last = 0;\n\n                for (var id in ids) {\n                    if (id - last !== 1 && chunk.length !== 0) {\n                        chunks.push(chunk);\n                        chunk = [];\n                    }\n\n                    chunk.push(id);\n                    last = id;\n                }\n\n                if (chunk.length !== 0) {\n                    chunks.push(chunk);\n                }\n\n                var result = [];\n                for (var i = 0; i < chunks.length; i++) {\n                    var first = chunks[i][0];\n                    var last = chunks[i][chunks[i].length - 1];\n\n                    if (first === last) {\n                        result.push(first);\n                    } else {\n                        result.push(first + '-' + last);\n                    }\n                }\n\n                return result.join('.');\n            },\n\n            string_chunks: function(string, size, delimiter) {\n                var result = [];\n\n                while (true) {\n                    var index = string.indexOf(delimiter, size);\n                    if (index === -1) {\n                        if (string.length !== 0) {\n                            result.push(string);\n                        }\n                        break;\n                    }\n\n                    result.push(string.slice(0, index));\n                    string = string.slice(index + 1);\n                }\n\n                return result;\n            },\n\n            split: function(text, search) {\n                var result = [];\n                var searchLength = search.length;\n\n                while (true) {\n                    var searchPos = text.toLowerCase().indexOf(search);\n\n                    if (searchPos === -1) {\n                        result.push(text);\n                        break;\n                    }\n\n                    result.push(text.substr(0, searchPos));\n                    text = text.substr(searchPos + searchLength);\n                }\n\n                return result;\n            },\n\n            get_workflow_proofread_step_id: function() {\n                var workflowStepId = this.user.workflowStepId;\n\n                if (\n                    workflowStepId == 1 ||\n                    $.inArray(workflowStepId, this.workflowStepIds) == -1\n                ) {\n                    return this.workflowStepIds[\n                        this.workflowStepIds.length - 1\n                    ];\n                }\n\n                return workflowStepId;\n            },\n\n            get_phrase_status: function(translation_status) {\n                if (typeof translation_status == 'string') {\n                    return translation_status;\n                }\n\n                var s_id = this.get_workflow_proofread_step_id();\n                var status = this.status.untranslated;\n\n                // in this case it is important to maintain consistency checks\n                translation_status.translated &&\n                    (status = this.status.translated);\n                translation_status.approved[s_id] &&\n                    (status = this.status.approved);\n                translation_status.partially_approved[s_id] &&\n                    (status = this.status.partially_approved);\n                translation_status.partially_translated &&\n                    (status = this.status.partially_translated);\n                return status;\n            },\n\n            get_in_context_config_url: function(data) {\n                if (jipt.projectURL) {\n                    return jipt.projectURL + '/tools/in-context';\n                }\n\n                if (config.domain) {\n                    return (\n                        Url.getEntryPoint() +\n                        '/u/projects/' +\n                        data.projectId +\n                        '/tools/in-context'\n                    );\n                }\n\n                return (\n                    Url.getEntryPoint() +\n                    '/project/' +\n                    data.projectId +\n                    '/tools/in-context'\n                );\n            },\n        };\n\n    if (!window.location.search.match('\\\\bdisable_jipt\\\\b')) {\n        jipt.init();\n    }\n\n    window.jipt = {\n        target_language: Storage.get('language_code'),\n\n        set_draft_suggestion: function(translation_id, text) {\n            jipt.set_draft_suggestion(translation_id, text);\n        },\n\n        save_suggestions: function(suggestions, force_saving, callback) {\n            jipt.save_suggestions(suggestions, force_saving, callback);\n        },\n    };\n})();\n\nvar sanitizer = new (function() {\n    this.uri_protocol_named_ref_map = {Tab: '\\t', NewLine: '\\n'};\n    this.uri_blacklist_protocols = {\n        javascript: 1,\n        data: 1,\n        vbscript: 1,\n        mhtml: 1,\n    };\n    this.uri_protocol_colon = /(?::|&#[xX]0*3[aA];?|&#0*58;?|&colon;)/;\n    this.uri_protocols_whitespaces = /\\\\n|(?:^[\\x00-\\x20]+|[\\t\\n\\r\\x00]+)/g;\n    this.special_attr_value_unquoted_chars = /(?:^(?:[\"'`]|\\x00+$|$)|[\\x09-\\x0D >])/g;\n    (this.sensitive_html_entities = /&(?:#([xX][0-9A-Fa-f]+|\\d+);?|(Tab|NewLine|colon|semi|lpar|rpar|apos|sol|comma|excl|ast|midast|ensp|emsp|thinsp);|(nbsp|amp|AMP|lt|LT|gt|GT|quot|QUOT);?)/g),\n        (this.null_value = /\\x00/g);\n\n    this.url = function(string) {\n        return this.uri_blacklist_protocols[\n            this._getProtocol(this._convertSpecialChars(string))\n        ]\n            ? '#'\n            : string;\n    };\n\n    this.attributes = function(string) {\n        var reg,\n            match,\n            url,\n            i,\n            matches = [];\n        reg = /\\s+on\\w*\\s*=\\s*(\"([^\"]*\")|'[^']*'|([^'\">\\s]*))/gi; //onClick ...\n\n        while ((match = reg.exec(string)) !== null) {\n            string = string.replace(match[0], '');\n        }\n\n        reg = /\\bhref\\s*=[^\"']*(?:\"([^\"]*)\"|'([^']*)')/gi; //href='javascript:alert(0)'\n\n        while ((match = reg.exec(string)) !== null) {\n            matches.push(match[1]);\n        }\n\n        for (i in matches) {\n            url = this.url(matches[i]);\n            string = string.replace(matches[i], url);\n        }\n\n        return string;\n    };\n\n    this.tags = function(string, tags) {\n        var self = this;\n        var repeat_action = false;\n\n        tags.map(function(tag) {\n            var reg = new RegExp(\n                '<' +\n                    tag +\n                    '\\\\b[^<]*(?:(?!<\\\\/' +\n                    tag +\n                    '>)<[^<]*)*((<\\\\/' +\n                    tag +\n                    '>)|>)',\n                'ig',\n            );\n            var matchFullTag = string.match(reg);\n\n            if (matchFullTag) {\n                repeat_action = true;\n\n                if (matchFullTag.length === 1) {\n                    var matches = reg.exec(string);\n                    string = self._replaceTags(string, matches);\n                } else {\n                    string = self._replaceTags(string, matchFullTag);\n                }\n            }\n        });\n\n        if (repeat_action) {\n            string = self.tags(string, tags);\n        }\n\n        return string;\n    };\n\n    this._replaceTags = function(string, matches) {\n        for (var i = 0, length = matches.length; i < length; i++) {\n            string = string.replace(matches[i], '');\n        }\n\n        return string;\n    };\n\n    this._getRawProtocol = function(string) {\n        string = string.split(this.uri_protocol_colon, 2);\n        return string.length === 2 && string[0] ? string[0] : null;\n    };\n\n    this._getProtocol = function(string) {\n        string = this._getRawProtocol(string.replace(this.null_value, ''));\n        var self = this;\n        return string\n            ? this._htmlDecode(\n                  string,\n                  this.uri_protocol_named_ref_map,\n                  this.sensitive_html_entities,\n                  function() {\n                      return this.replace(\n                          self.uri_protocols_whitespaces,\n                          '',\n                      ).toLowerCase();\n                  },\n              )\n            : null;\n    };\n\n    this._getCharacter = function(num) {\n        return !isFinite(num) ||\n            num <= 0 ||\n            num > 0x10ffff ||\n            num === 0x0b ||\n            (num >= 0x01 && num <= 0x08) ||\n            (num >= 0x0e && num <= 0x1f) ||\n            (num >= 0x7f && num <= 0x9f) ||\n            (num >= 0xfdd0 && num <= 0xfdef) ||\n            (num & 0xffff) === 0xffff ||\n            (num & 0xffff) === 0xfffe\n            ? ''\n            : this._fromCodePoint(num);\n    };\n\n    this._fromCodePoint =\n        String.fromCodePoint ||\n        function(codePoint) {\n            if (arguments.length === 0) {\n                return '';\n            }\n\n            if (codePoint <= 0xffff) {\n                return String.fromCharCode(codePoint);\n            }\n\n            codePoint -= 0x10000;\n            return String.fromCharCode(\n                (codePoint >> 10) + 0xd800,\n                (codePoint % 0x400) + 0xdc00,\n            );\n        };\n\n    this._convertSpecialChars = function(string) {\n        return this._stringify(\n            string,\n            String.prototype.replace,\n            this.special_attr_value_unquoted_chars,\n            function(m) {\n                return m === '\\t'\n                    ? '&#9;'\n                    : m === '\\n'\n                    ? '&#10;'\n                    : m === '\\x0B'\n                    ? '&#11;'\n                    : m === '\\f'\n                    ? '&#12;'\n                    : m === '\\r'\n                    ? '&#13;'\n                    : m === ' '\n                    ? '&#32;'\n                    : m === '>'\n                    ? '&gt;'\n                    : m === '\"'\n                    ? '&quot;'\n                    : m === \"'\"\n                    ? '&#39;'\n                    : m === '`'\n                    ? '&#96;'\n                    : '';\n            },\n        );\n    };\n\n    this._stringify = function(string, callback) {\n        return typeof string === 'undefined'\n            ? 'undefined'\n            : string === null\n            ? 'null'\n            : callback.apply(string.toString(), [].splice.call(arguments, 2));\n    };\n\n    this._htmlDecode = function(string, namedRefMap, reNamedRef, callback) {\n        var decodedStr,\n            args = [].splice.call(arguments, 4),\n            self = this;\n\n        return this._stringify(string, function() {\n            decodedStr = this.replace(this.null_value, '').replace(\n                reNamedRef,\n                function(m, num, named, named1) {\n                    if (num) {\n                        num = Number(num[0] <= '9' ? num : '0' + num);\n                        return (num >= 0xd800 && num <= 0xdfff) || num === 0x0d\n                            ? ''\n                            : self._getCharacter(num);\n                    }\n\n                    return namedRefMap[named || named1] || m;\n                },\n            );\n\n            return callback ? callback.apply(decodedStr, args) : decodedStr;\n        });\n    };\n})();\n"]}